
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
	</style>
	<link href="../images/favicon-1a78870a.png" rel="icon" type="image/png" />
    <link href="../stylesheets/screen-5ecaa0e5.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="en en_index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../images/logo-499f9e49.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="javascript">Node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduccion" class="toc-h1 toc-link" data-title="Introducción">Introducción</a>
          </li>
          <li>
            <a href="#autenticacion" class="toc-h1 toc-link" data-title="Autenticación">Autenticación</a>
          </li>
          <li>
            <a href="#contratos" class="toc-h1 toc-link" data-title="Contratos">Contratos</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-un-contrato" class="toc-h2 toc-link" data-title="Propiedades de un Contrato">Propiedades de un Contrato</a>
                  </li>
                  <li>
                    <a href="#cavali" class="toc-h2 toc-link" data-title="Cavali">Cavali</a>
                  </li>
                  <li>
                    <a href="#crear-un-contrato" class="toc-h2 toc-link" data-title="Crear un Contrato">Crear un Contrato</a>
                  </li>
                  <li>
                    <a href="#obtener-un-contrato" class="toc-h2 toc-link" data-title="Obtener un Contrato">Obtener un Contrato</a>
                  </li>
                  <li>
                    <a href="#eliminar-un-contrato" class="toc-h2 toc-link" data-title="Eliminar un Contrato">Eliminar un Contrato</a>
                  </li>
                  <li>
                    <a href="#aprobar-un-contrato" class="toc-h2 toc-link" data-title="Aprobar un Contrato">Aprobar un Contrato</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#items-del-contrato" class="toc-h1 toc-link" data-title="Items del Contrato">Items del Contrato</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-un-item" class="toc-h2 toc-link" data-title="Propiedades de un Item">Propiedades de un Item</a>
                  </li>
                  <li>
                    <a href="#tipos-de-item" class="toc-h2 toc-link" data-title="Tipos de Item">Tipos de Item</a>
                  </li>
                  <li>
                    <a href="#errores-por-tipo-de-item" class="toc-h2 toc-link" data-title="Errores por tipo de Item">Errores por tipo de Item</a>
                  </li>
                  <li>
                    <a href="#customizar-opciones-de-un-item-por-usuario" class="toc-h2 toc-link" data-title="Customizar opciones de un item por usuario">Customizar opciones de un item por usuario</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#proceso-de-firma-via-api" class="toc-h1 toc-link" data-title="Proceso de firma vía API">Proceso de firma vía API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#obtener-items-pendientes" class="toc-h2 toc-link" data-title="Obtener Items pendientes">Obtener Items pendientes</a>
                  </li>
                  <li>
                    <a href="#enviar-un-archivo-multimedia" class="toc-h2 toc-link" data-title="Enviar un archivo multimedia">Enviar un archivo multimedia</a>
                  </li>
                  <li>
                    <a href="#enviar-informacion-de-firma" class="toc-h2 toc-link" data-title="Enviar información de firma">Enviar información de firma</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#configuracion-dinamica-del-template" class="toc-h1 toc-link" data-title="Configuración dinámica del template">Configuración dinámica del template</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#configuraciones-globales" class="toc-h2 toc-link" data-title="Configuraciones globales">Configuraciones globales</a>
                  </li>
                  <li>
                    <a href="#stages" class="toc-h2 toc-link" data-title="Stages">Stages</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#documentos-de-identidad-soportados" class="toc-h1 toc-link" data-title="Documentos de identidad soportados">Documentos de identidad soportados</a>
          </li>
          <li>
            <a href="#deceval" class="toc-h1 toc-link" data-title="Deceval">Deceval</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#restricciones" class="toc-h2 toc-link" data-title="Restricciones">Restricciones</a>
                  </li>
                  <li>
                    <a href="#flujo-de-firma" class="toc-h2 toc-link" data-title="Flujo de firma">Flujo de firma</a>
                  </li>
                  <li>
                    <a href="#crear-girador-natural" class="toc-h2 toc-link" data-title="Crear girador natural">Crear girador natural</a>
                  </li>
                  <li>
                    <a href="#consultar-girador" class="toc-h2 toc-link" data-title="Consultar girador">Consultar girador</a>
                  </li>
                  <li>
                    <a href="#estructura-del-pagare" class="toc-h2 toc-link" data-title="Estructura del Pagaré">Estructura del Pagaré</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#verificacion-de-identidad" class="toc-h1 toc-link" data-title="Verificación de identidad">Verificación de identidad</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-una-verificacion-de-identidad" class="toc-h2 toc-link" data-title="Propiedades de una verificación de identidad">Propiedades de una verificación de identidad</a>
                  </li>
                  <li>
                    <a href="#crear-verificacion-de-identidad" class="toc-h2 toc-link" data-title="Crear verificación de identidad">Crear verificación de identidad</a>
                  </li>
                  <li>
                    <a href="#listar-verificaciones-de-identidad" class="toc-h2 toc-link" data-title="Listar verificaciones de identidad">Listar verificaciones de identidad</a>
                  </li>
                  <li>
                    <a href="#obtener-verificacion-de-identidad" class="toc-h2 toc-link" data-title="Obtener verificación de identidad">Obtener verificación de identidad</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#plantillas-de-documento" class="toc-h1 toc-link" data-title="Plantillas de documento">Plantillas de documento</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-una-plantilla-de-documento" class="toc-h2 toc-link" data-title="Propiedades de una plantilla de documento">Propiedades de una plantilla de documento</a>
                  </li>
                  <li>
                    <a href="#listar-plantillas-de-documento" class="toc-h2 toc-link" data-title="Listar plantillas de documento">Listar plantillas de documento</a>
                  </li>
                  <li>
                    <a href="#obtener-plantilla-de-documento" class="toc-h2 toc-link" data-title="Obtener plantilla de documento">Obtener plantilla de documento</a>
                  </li>
                  <li>
                    <a href="#generar-documentos-rellenados" class="toc-h2 toc-link" data-title="Generar documentos rellenados">Generar documentos rellenados</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#configuracion-del-webhook" class="toc-h2 toc-link" data-title="Configuración del Webhook">Configuración del Webhook</a>
                  </li>
                  <li>
                    <a href="#especificacion-del-webhook" class="toc-h2 toc-link" data-title="Especificación del Webhook">Especificación del Webhook</a>
                  </li>
                  <li>
                    <a href="#tipos-de-eventos-webhook" class="toc-h2 toc-link" data-title="Tipos de Eventos Webhook">Tipos de Eventos Webhook</a>
                  </li>
                  <li>
                    <a href="#verificar-keynua-signature-webhook" class="toc-h2 toc-link" data-title="Verificar Keynua Signature Webhook">Verificar Keynua Signature Webhook</a>
                  </li>
                  <li>
                    <a href="#verificar-keynua-signature-webhook-v2" class="toc-h2 toc-link" data-title="Verificar Keynua Signature Webhook V2">Verificar Keynua Signature Webhook V2</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#otp" class="toc-h1 toc-link" data-title="OTP">OTP</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#metodos-de-envio" class="toc-h2 toc-link" data-title="Métodos de envío">Métodos de envío</a>
                  </li>
                  <li>
                    <a href="#propiedades-de-auth" class="toc-h2 toc-link" data-title="Propiedades de Auth">Propiedades de Auth</a>
                  </li>
                  <li>
                    <a href="#enviar-otp" class="toc-h2 toc-link" data-title="Enviar OTP">Enviar OTP</a>
                  </li>
                  <li>
                    <a href="#crear-codigo-otp-como-owner" class="toc-h2 toc-link" data-title="Crear código OTP como Owner">Crear código OTP como Owner</a>
                  </li>
                  <li>
                    <a href="#verificar-otp" class="toc-h2 toc-link" data-title="Verificar OTP">Verificar OTP</a>
                  </li>
                  <li>
                    <a href="#obtener-informacion" class="toc-h2 toc-link" data-title="Obtener información">Obtener información</a>
                  </li>
                  <li>
                    <a href="#errores" class="toc-h2 toc-link" data-title="Errores">Errores</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.keynua.com/account-request'>Sign Up for a Developer Key</a></li>
            <li><a href="https://github.com/tripit/slate">Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduccion'>Introducción</h1>
<blockquote>
<p>La URL base de nuestra API es distinta por ambiente:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>Pruebas: https://api.stg.keynua.com
Producción: https://api.keynua.com
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Pruebas</span><span class="p">:</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">api</span><span class="p">.</span><span class="nf">stg</span><span class="p">.</span><span class="nf">keynua</span><span class="p">.</span><span class="nf">com</span>
<span class="no">Producci</span><span class="err">ó</span><span class="ss">n: </span><span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">api</span><span class="p">.</span><span class="nf">keynua</span><span class="p">.</span><span class="nf">com</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">Pruebas</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="p">.</span><span class="n">stg</span><span class="p">.</span><span class="n">keynua</span><span class="p">.</span><span class="n">com</span>
<span class="n">Producción</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="p">.</span><span class="n">keynua</span><span class="p">.</span><span class="n">com</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Pruebas</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//api.stg.keynua.com</span>
<span class="nx">Producción</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//api.keynua.com</span>
</code></pre></div>
<p>Bienvenid@ a la documentación del API de Keynua! Puedes usar nuestro API para poder crear contratos, obtener el detalle del mismo o eliminar contratos.</p>

<p>Algunas características de nuestra API:</p>

<ul>
<li>Está basada en REST: los payload para los <code>request</code> y <code>response</code> deben estar en formato <code>JSON</code></li>
<li>Solo soporta <code>HTTPS</code></li>
</ul>
<h1 id='autenticacion'>Autenticación</h1><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.stg.keynua.com'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'x-api-key: YOUR-APIKEY-HERE'</span>
  <span class="nt">-H</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
</code></pre></div>
<p>Keynua utiliza <strong>API Keys</strong> y <strong>Authorization tokens</strong> para acceder al API. Una vez ya tengas una cuenta en el ambiente de pruebas de Keynua, puedes acceder a la sección <a href="https://app.stg.keynua.com/developers">Developers</a> y generar tu APIKey y APIToken. Estos valores deberán ser enviados en la cabecera de la siguiente manera:</p>

<table><thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>API Key para acceder al servicio. <strong>Debes usar el valor Secret, NO el ID</strong></td>
</tr>
<tr>
<td>authorization</td>
<td>Token único de autorización. <strong>Debes usar el valor Secret, NO el ID</strong></td>
</tr>
</tbody></table>

<aside class="notice">Si ya estás listo para integrar en producción, por favor contacta al equipo de <code>Keynua</code></aside>
<h1 id='contratos'>Contratos</h1>
<p>El API de Contratos permite crear, ver y eliminar un contrato</p>
<h2 id='propiedades-de-un-contrato'>Propiedades de un Contrato</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"some:id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="s2">"someone"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"templateId"</span><span class="p">:</span><span class="s2">"template-id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2021-01-24T02:52:41.426Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="s2">"2021-01-24T02:52:42.347Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="s2">"Contract title"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Description"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deletedAt"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"es"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"something"</span><span class="p">:</span><span class="s2">"any-value"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expirationInHours"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="err">User</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:</span><span class="err">Group</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"documents"</span><span class="p">:</span><span class="err">Document</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="err">Item</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"pending_input"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único del contrato</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Identificador único de la cuenta con la que se creó el contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template a usar</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creación del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título del contrato</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del contrato</td>
</tr>
<tr>
<td>finishedAt</td>
<td>string</td>
<td>Fecha de finalización del proceso de firma del contrato</td>
</tr>
<tr>
<td>deletedAt</td>
<td>string</td>
<td>Fecha de eliminación del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje del contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td>Metadata del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato. Este campo es usado como clave de búsqueda en la plataforma web de Keynua.</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>expirationInHours</td>
<td>integer</td>
<td>Expiración del contrato en horas, a partir de la fecha de inicio del contrato.</td>
</tr>
<tr>
<td>expirationDatetime</td>
<td>string</td>
<td>Fecha y hora de expiración del contrato en UTC y formato ISO 8601. Ejemplo: <code>2021-06-17T19:53:58.551Z</code>.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td><a href="#propiedades-de-un-usuario">Usuarios</a> del contrato</td>
</tr>
<tr>
<td>groups</td>
<td>array</td>
<td><a href="#propiedades-de-un-grupo">Grupos</a> del contrato</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td><a href="#propiedades-de-un-documento">Documentos</a> del contrato</td>
</tr>
<tr>
<td>items</td>
<td>array</td>
<td><a href="#items-del-contrato">Items</a> del contrato</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td><a href="#estados-del-contrato">Estado del contrato</a> actual</td>
</tr>
<tr>
<td>alerts</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-una-alerta">Alertas</a> del contrato</td>
</tr>
</tbody></table>
<h3 id='estados-del-contrato'>Estados del Contrato</h3>
<table><thead>
<tr>
<th>Valor</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>pending_input</td>
<td>Estado inicial del contrato, cuando ha sido creado pero aún nadie ha comenzado el proceso de firma</td>
</tr>
<tr>
<td>working</td>
<td>Cuando los Items del contrato están en proceso de ejecución</td>
</tr>
<tr>
<td>pending_approval</td>
<td>Cuando existe un Item pendiente a ser aprobado manualmente por el dueño del contrato</td>
</tr>
<tr>
<td>contract_approval</td>
<td>Cuando la aprobación del contrato se encuentra en progreso</td>
</tr>
<tr>
<td>error</td>
<td>Cuando existe un error sin resolver en uno de los Items del contrato</td>
</tr>
<tr>
<td>deleted</td>
<td>Cuando el contrato ha sido eliminado</td>
</tr>
<tr>
<td>done</td>
<td>Cuando el contrato ha sido firmado por todos y ha finalizado correctamente</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-usuario'>Propiedades de un Usuario</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Manuel Silva"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"msilva@keynua.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"signers"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"token-value"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"working"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"idInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe-id"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"idNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"verificationDigit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"names"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perez Alvarez"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-11-20"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-03-17"</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some address"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Usuarios que firman el contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único del usuario en el contrato</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del usuario</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>El correo electrónico del usuario</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>El teléfono del usuario</td>
</tr>
<tr>
<td>groups</td>
<td>array</td>
<td>Nombre de los grupos a los que pertenece el usuario, normalmente siempre pertenece a un sólo grupo. El identificador del grupo será asignado por el equipo de Keynua</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario que se utilizará para realizar la firma. Por ejemplo para <a href="#enviar-un-archivo-multimedia">enviar un archivo multimedia</a></td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>El <a href="#estados-del-usuario">estado del usuario</a> dentro del contrato, basado en el estado de todos los items del usuario. Solo existe para contratos creados luego del 04/04/2022.</td>
</tr>
<tr>
<td>idInfo</td>
<td>string</td>
<td>Información obtenida del OCR del documento enviado por el firmante. Esta información se devolverá solamente cuando el contrato haya finalizado y de momento aplica solamente para las Identificaciones con DNI Peruano. La información de la dirección (address) se devolverá solamente si el usuario también envía la parte trasera del DNI</td>
</tr>
</tbody></table>
<h3 id='estados-del-usuario'>Estados del Usuario</h3>
<table><thead>
<tr>
<th>Valor</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>pending</td>
<td>Estado inicial del usuario. Aún no ha enviado sus datos para la firma.</td>
</tr>
<tr>
<td>working</td>
<td>El usuario ya envió sus datos y estos están siendo procesados.</td>
</tr>
<tr>
<td>error</td>
<td>Alguno de los ítems del usuario ha presentado un error.</td>
</tr>
<tr>
<td>done</td>
<td>Todos los datos del usuario han sido validados y son correctos.</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-grupo'>Propiedades de un Grupo</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"signers"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Firmantes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"digitalSignature"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bulk"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Grupos que existen en el contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador del grupo</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del grupo</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del grupo</td>
</tr>
<tr>
<td>digitalSignature</td>
<td>boolean</td>
<td>Flag que indica si el grupo realizará firma digital o no</td>
</tr>
<tr>
<td>bulk</td>
<td>boolean</td>
<td>Flag que indica si el grupo pertenece a Firma Múltiple o no</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-documento'>Propiedades de un Documento</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"DocumentPdf.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ext"</span><span class="p">:</span><span class="s2">"pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sha"</span><span class="p">:</span><span class="s2">"pdf-hash"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="mi">3708</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"signed-url"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Los documentos que son firmados en el contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único del documento</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del documento incluyendo su extensión</td>
</tr>
<tr>
<td>ext</td>
<td>string</td>
<td>Extensión del documento</td>
</tr>
<tr>
<td>sha</td>
<td>string</td>
<td>Código sha256 del documento</td>
</tr>
<tr>
<td>size</td>
<td>integer</td>
<td>Tamaño en bytes del documento</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Tipo del documento</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>La URL para poder visualizar el documento</td>
</tr>
</tbody></table>
<h2 id='cavali'>Cavali</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"banking"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"product"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"uniqueCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">5478700</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issuedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issuedPlace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lima"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"civilStatus"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domicile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lima"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"representatives"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cavali permite crear un Pagaré y asociarlo a la firma de un contrato. Para crear un contrato, el proceso debe tener un Item Cavali y Item de tipo text con el id <code>documentNumber</code></p>

<aside class="warning">Si quieres crear contratos con Pagarés electrónicos, debes contactar al equipo de soporte de Keynua</aside>

<p>El Pagaré está compuesto por lo siguiente:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>banking</td>
<td>integer</td>
<td>Código de banca</td>
</tr>
<tr>
<td>product</td>
<td>integer</td>
<td>Código de producto</td>
</tr>
<tr>
<td>uniqueCode</td>
<td>integer</td>
<td>Código único del cliente</td>
</tr>
<tr>
<td>creditNumber</td>
<td>integer</td>
<td>Número de crédito</td>
</tr>
<tr>
<td>issuedDate</td>
<td>string</td>
<td>Fecha de emisión. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>conditionJustSign</td>
<td>integer</td>
<td>Condición del pagaré. Puede tener los siguientes valores: 1 (si)</td>
</tr>
<tr>
<td>special</td>
<td>integer</td>
<td>Indicador de pagaré especial. Puede tener los siguientes valores: 1 (si)</td>
</tr>
<tr>
<td>issuedPlace</td>
<td>string</td>
<td>Lugar de emisión</td>
</tr>
<tr>
<td>expirationDate</td>
<td>string</td>
<td>Fecha de caducidad. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>amount</td>
<td>double</td>
<td>Monto del pagaré</td>
</tr>
<tr>
<td>currency</td>
<td>integer</td>
<td>Moneda del pagaré. Puede tener los siguientes valores: 1 (S/)</td>
</tr>
<tr>
<td>compensatoryInterestAmount</td>
<td>double</td>
<td>El interés compensatorio sobre el monto</td>
</tr>
<tr>
<td>periodOne</td>
<td>integer</td>
<td>El período de capitalización 1</td>
</tr>
<tr>
<td>compensatoryInterestArrears</td>
<td>double</td>
<td>El interés compensatorio por el período de morosidad</td>
</tr>
<tr>
<td>periodTwo</td>
<td>integer</td>
<td>El período de capitalización 2</td>
</tr>
<tr>
<td>interestArrears</td>
<td>double</td>
<td>Interés moratorio del periodo</td>
</tr>
<tr>
<td>periodTwo</td>
<td>integer</td>
<td>El período de capitalización 3</td>
</tr>
<tr>
<td>specialClauses</td>
<td>string</td>
<td>Las Cláusulas especiales que pueda contener el Pagaré</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>El token de validación de firmas para proveedores</td>
</tr>
<tr>
<td>additionalField1</td>
<td>string</td>
<td>Campo adicional 1</td>
</tr>
<tr>
<td>additionalField2</td>
<td>string</td>
<td>Campo adicional 2</td>
</tr>
<tr>
<td>client</td>
<td>object</td>
<td><a href="#cliente-cavali">Cliente</a> del Pagaré</td>
</tr>
<tr>
<td>representatives</td>
<td>array</td>
<td>Arreglo de <a href="#representantes-cavali">Representantes</a> del cliente</td>
</tr>
<tr>
<td>guarantees</td>
<td>array</td>
<td>Arreglo de <a href="#garantías-cavali">Garantías</a> del cliente</td>
</tr>
</tbody></table>
<h3 id='cliente-cavali'>Cliente Cavali</h3>
<p>El cliente del pagaré. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>Id del firmante. Es el índice del elemento al que hace referencia en el atributo <code>users</code> al <a href="#crear-un-contrato">crear contrato</a></td>
</tr>
<tr>
<td>civilStatus</td>
<td>integer</td>
<td>Estado civil del cliente. Puede tener los siguientes valores: <code>1 (SOLTERO)</code>, <code>2 (CASADO)</code>, <code>3 (DIVORCIADO)</code>, <code>4 (VIUDO)</code></td>
</tr>
<tr>
<td>domicile</td>
<td>string</td>
<td>Domicilio del cliente <code>Máximo 100 de longitud</code></td>
</tr>
</tbody></table>
<h3 id='representantes-cavali'>Representantes Cavali</h3>
<p>Representante del cliente. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>Id del firmante. Es el índice del elemento al que hace referencia en el atributo <code>users</code> al <a href="#crear-un-contrato">crear contrato</a></td>
</tr>
</tbody></table>
<h3 id='garantias-cavali'>Garantías Cavali</h3>
<p>Garantía del cliente. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>Id del firmante. Es el índice del elemento al que hace referencia en el atributo <code>users</code> al <a href="#crear-un-contrato">crear contrato</a></td>
</tr>
<tr>
<td>civilStatus</td>
<td>integer</td>
<td>Estado civil. Puede tener los siguientes valores: <code>1 (SOLTERO)</code>, <code>2 (CASADO)</code>, <code>3 (DIVORCIADO)</code>, <code>4 (VIUDO)</code></td>
</tr>
<tr>
<td>domicile</td>
<td>string</td>
<td>Domicilio <code>Máximo 100 de longitud</code></td>
</tr>
<tr>
<td>representative</td>
<td>array</td>
<td>Arreglo de <a href="#representantes-cavali">Representantes</a></td>
</tr>
</tbody></table>
<h2 id='crear-un-contrato'>Crear un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">title</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Contract created by API</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">language</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">es</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">userEmailNotifications</span><span class="se">\"</span><span class="s2">: true,</span><span class="se">\n\t\"</span><span class="s2">templateId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">keynua-peru-default</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">documents</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">DocumentPdf.pdf</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">base64</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">YOUR-BASE64-PDF-HERE</span><span class="se">\"\n</span><span class="s2">    }</span><span class="se">\n</span><span class="s2">  ],</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">users</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Manuel Silva</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">msilva@keynua.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\t\"</span><span class="s2">groups</span><span class="se">\"</span><span class="s2">: [ </span><span class="se">\"</span><span class="s2">signers</span><span class="se">\"</span><span class="s2"> ]</span><span class="se">\n</span><span class="s2">    }</span><span class="se">\n</span><span class="s2">  ]</span><span class="se">\n</span><span class="s2">}</span><span class="se">\n</span><span class="s2">"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">title</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Contract created by API</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">language</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">es</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">userEmailNotifications</span><span class="se">\"</span><span class="s">: false,</span><span class="se">\n\t\"</span><span class="s">templateId</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">keynua-peru-default</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">documents</span><span class="se">\"</span><span class="s">: [</span><span class="se">\n</span><span class="s">    {</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">name</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">DocumentPdf.pdf</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">base64</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">YOUR-BASE64-PDF-HERE</span><span class="se">\"\n</span><span class="s">    }</span><span class="se">\n</span><span class="s">  ],</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">users</span><span class="se">\"</span><span class="s">: [</span><span class="se">\n</span><span class="s">    {</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">name</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Manuel Silva</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">email</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">msilva@keynua.com</span><span class="se">\"</span><span class="s">,</span><span class="se">\n\t\t\"</span><span class="s">groups</span><span class="se">\"</span><span class="s">: [ </span><span class="se">\"</span><span class="s">signers</span><span class="se">\"</span><span class="s"> ]</span><span class="se">\n</span><span class="s">    }</span><span class="se">\n</span><span class="s">  ]</span><span class="se">\n</span><span class="s">}</span><span class="se">\n</span><span class="s">"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="s">"/contracts/v1"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1 <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
  "title": "Contract created by API",
  "language": "es",
  "userEmailNotifications": true,
  "templateId": "keynua-peru-default",
  "documents": [
    {
      "name": "DocumentPdf.pdf",
      "base64": "YOUR-BASE64-PDF-HERE"
    }
  ],
  "users": [
    {
      "name": "Manuel Silva",
      "email": "msilva@keynua.com",
      "groups": [ "signers" ]
    }
  ]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Contract created by API</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">es</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">userEmailNotifications</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">templateId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keynua-peru-default</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">documents</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DocumentPdf.pdf</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">base64</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-BASE64-PDF-HERE</span><span class="dl">'</span>
    <span class="p">},</span>
  <span class="p">],</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Manuel Silva</span><span class="dl">'</span><span class="p">,</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">msilva@keynua.com</span><span class="dl">'</span><span class="p">,</span> <span class="na">groups</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">signers</span><span class="dl">'</span><span class="p">]}</span>
  <span class="p">]</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>


<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue creado satisfactoramente, el API retorna un Json estructurado como aparece en la sección de <a href="#contratos">Contratos</a></p>
</blockquote>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PUT /contracts/v1</code></p>
<h3 id='headers'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body'>Body</h3>
<p>Para crear el contrato, se tiene que enviar la data como un solo objeto JSON</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Título del contrato</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td><code>optional</code> Descripción del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td><code>optional</code> Referencia del contrato. Este campo es usado como clave de búsqueda en la plataforma web de Keynua</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td><code>Default &quot;es&quot;</code> Idioma del contrato. Puede ser <code>en</code> o <code>es</code></td>
</tr>
<tr>
<td>userEmailNotifications</td>
<td>boolean</td>
<td><code>Default &quot;false&quot;</code> Indica si los usuarios serán notificados por email cuando hay un error o finaliza un contrato</td>
</tr>
<tr>
<td>expirationInHours</td>
<td>integer</td>
<td><code>optional</code> Expiración del contrato en horas, a partir de la fecha de inicio del contrato. Mínimo uno (1)</td>
</tr>
<tr>
<td>expirationDatetime</td>
<td>string</td>
<td><code>optional</code> Fecha y hora de expiración del contrato en UTC y formato ISO 8601. Ejemplo: <code>2021-06-17T19:53:58.551Z</code>.</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Id del template a usar. Puedes usar uno de los template públicos de Keynua como <code>keynua-peru-default</code>. Si es un proceso customizado, el equipo de Keynua te enviará este valor</td>
</tr>
<tr>
<td>onBehalfOf</td>
<td>string</td>
<td>AccountId de una cuenta hija. Este campo es usado para organizaciones que necesitan crear contratos como si fueran sus cuentas hijas. Solo funciona si la cuenta hija pertenece a la misma organización de la cuenta padre y si cuenta con el permiso para crear contratos. Los accountId de las cuentas asociadas se pueden obtener <a href="https://app.keynua.com/profile/organization/?tab=members">aquí</a>, ya sea descargando todos los usuarios o copiando los Id que necesites.</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td>Arreglo de los documentos PDFs encodificados en base64 que van a ser firmados. Mínimo 1 y máximo 10. El peso máximo en total no debe ser mayor a 4.5 MB. En lugar de <code>base64</code> también se puede enviar <code>storageId</code>, como por ejemplo se obtiene de <a href="#generar-documentos-rellenados">este</a> API.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Arreglo de los usuarios que firmarán el contrato. El email es opcional y el valor a enviar en <strong>groups</strong> depende del templateId a usar. Para el caso de <code>keynua-peru-default</code>, el valor en groups debe ser <code>signers</code>. Si utilizan un template customizado en el que hay más de un grupo, por ejemplo firmas con DNI + Firma múltiple, el valor del grupo representará al grupo que pertenece dicho usuario</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td><code>optional</code> Metadata del contrato. Puedes enviar información en este campo como key-value para poder identificar el contrato creado por Keynua con algún Identificador interno de tu sistema.</td>
</tr>
<tr>
<td>flags</td>
<td>object</td>
<td><code>optional</code> Se podrá enviar información adicional para crear un contrato. Por ejemplo la información de <a href="#cavali">Cavali</a> para crear un contrato con Pagaré Electrónico se enviará con el key <code>cavaliData</code></td>
</tr>
<tr>
<td>templateOptions</td>
<td>object</td>
<td><code>optional</code> <a href="#configuracion-dinamica-del-template">Configuración dinámica del template</a> del contrato, si mandas este campo se omite el templateId</td>
</tr>
</tbody></table>
<h3 id='groups-y-prefilled-items'>Groups y Prefilled Items</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"firmantes-precargados"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"prefilledItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documentNumber"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444332323"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Manuel Silva"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"msilva@keynua.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"firmantes-especiales"</span><span class="p">],</span><span class="w">
            </span><span class="nl">"prefilledItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"role"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cliente"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan Araujo"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jaraujo@keynua.com"</span><span class="p">,</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Para conocer qué datos precargados y grupos de usuarios se pueden usar al crear un contrato, dirígete a la sección <a href="https://app.stg.keynua.com/developers/">Developers</a>.</p>

<aside class="warning">Si has usado la opción de Configuración dinámica del template, puedes saltar este paso ya que el target siempre será "documentNumber"</aside>

<p>En la sección <code>Grupos e items precargados</code>, elige un template para ver esta información en formato <code>JSON</code>. Un ejemplo de la respuesta puede ser la siguiente:</p>

<p><img src="https://user-images.githubusercontent.com/70590419/201201683-573f0137-a2c9-42a4-acde-47c503505124.png" alt="Image" /></p>

<p>A la derecha se puede ver cómo corresponde esta respuesta a la información que se debe enviar al crear el contrato.</p>

<p>Algunas observaciones importantes:</p>

<ul>
<li><code>id</code> corresponde al nombre al id del grupo, se incluye dentro del arreglo <code>groups</code>.</li>
<li><code>target</code> corresponde al id del valor precargado, se incluye en <code>target</code>, dentro del arreglo <code>prefilledItems</code>.</li>
<li><code>values</code> corresponde a los valores admitidos dentro de un valor precargado. Se debe escoger <em>un solo valor</em> de esta lista. Debe ir dentro de <code>text</code>.</li>
<li>De no existir <code>values</code>, se puede incluir dentro de <code>text</code> cualquier valor (relacionado al dato que se desee precargar).</li>
</ul>

<aside class="success">
Recuerda — En el <a href="https://app.stg.keynua.com/developers/" target=”_blank”>módulo de desarrollo</a> del portal Keynua puedes encontrar la sección <code>Crear contrato en modo desarrollo</code> e iniciar el modo para generar los <code>payloads</code> del api mediante la UI
</aside>
<h2 id='obtener-un-contrato'>Obtener un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1/{contractId}"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/contracts/v1/{contractId}"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.stg.keynua.com/contracts/v1/{contractId}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1/{contractId}</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue obtenido satisfactoriamente, el API retorna un Json estructurado como aparece en la sección de <a href="#contratos">Contratos</a></p>
</blockquote>

<p>Este API obtiene un contrato específico</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /contracts/v1/{contractId}</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>El ID del Contrato a obtener</td>
</tr>
</tbody></table>
<h2 id='eliminar-un-contrato'>Eliminar un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1/{contractId}"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Delete</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="s">"/contracts/v1/{contractId}"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1/<span class="o">{</span>contractId<span class="o">}</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1/{contractId}</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue eliminado, el API retornará un JSON como el siguiente:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"deletedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-25T21:38:50.055Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Este API elimina un Contrato</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>DELETE /contracts/v1/{contractId}</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>El ID del Contrato a eliminar</td>
</tr>
</tbody></table>

<aside class="warning">No se puede eliminar un contrato que su estado es <code>done</code>. Si eliminas un contrato que aún no ha sido iniciado por el firmante, la transacción utilizada será reintegrada a tu saldo. Si el contrato ya fue iniciado por el firmante, se tomará como una transacción utilizada.</aside>
<h2 id='aprobar-un-contrato'>Aprobar un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1/approve-contract"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">contractId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">CONTRACT-ID</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">message</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Crédito aprobado</span><span class="se">\"</span><span class="s2">}</span><span class="se">\n</span><span class="s2">"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">contractId</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">CONTRACT-ID</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">message</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Crédito aprobado</span><span class="se">\"</span><span class="s">}</span><span class="se">\n</span><span class="s">"</span>


<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/contracts/v1/approve-contract"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1/approve-contract <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
  "contractId": "CONTRACT-ID",
  "message": "Crédito aprobado",
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">contractId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">CONTRACT-ID</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Crédito aprobado</span><span class="dl">'</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1/approve-contract</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue aprobado, el API retornará un JSON como el siguiente:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"item"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"itemId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemState"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Este API Aprueba un Contrato, solo retornará un resultado exitoso si el contrato se encuentra en el estado: <code>contract_approval</code>. Este estado se asigna cuando el item de tipo <code>contractapproval</code> se pone en <code>working</code>. Para obtener el evento que asigna el estado puede integrar el webhook <code>ItemWorking</code> y validar que el atributo <code>type</code> sea igual al mencionado.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /contracts/v1/approve-contract</code></p>
<h3 id='body-2'>Body</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>El ID del Contrato a eliminar</td>
</tr>
<tr>
<td>message</td>
<td>Motivo de aprobación</td>
</tr>
</tbody></table>
<h1 id='items-del-contrato'>Items del Contrato</h1>
<p>Para llevar a cabo el flujo de firma de un contrato, cada uno de los usuarios deberá ingresar la información necesaria para firmar. Por ejemplo: la foto de su DNI, el video diciendo el código corto o el número de su DNI. También hace referencia a los procesos internos llevados a cabo por Keynua, por ejemplo la generación del PDF final o validación biométrica. A cada uno de estos elementos los llamamos <strong>Item</strong></p>
<h2 id='propiedades-de-un-item'>Propiedades de un Item</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Certificado y documentos"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signed-url"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador del item</td>
</tr>
<tr>
<td>version</td>
<td>integer</td>
<td>Versión del item. Siempre se mostrará la última versión disponible</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>El estado del item. Puede tener los siguientes valores: <code>success</code>, <code>pending</code>, <code>working</code>, <code>error</code></td>
</tr>
<tr>
<td>userId</td>
<td>integer</td>
<td>El identificador del usuario al que está relacionado este item</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>La referencia del item (está relacionado con la plantilla del contrato)</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Un título referente al item</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>El ID del <a href="#tipos-de-item">tipo del Item</a> al que pertenece</td>
</tr>
<tr>
<td>stageIndex</td>
<td>integer</td>
<td>El índice del nivel al que pertenece el item</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>El valor del item. La estructura varía de acuerdo al tipo del item. Cuando se trata de un Item que contiene un Archivo, habrá un key <strong>url</strong> el cual contiene la URL firmada para poder descargar el archivo. <strong>Las URLs firmadas tienen una duración máxima de 12 horas</strong>. Cuando el item tenga estado Error, se obtendrá el siguiente detalle de <a href="#errores-por-tipo-de-item">error por tipo de Item</a></td>
</tr>
</tbody></table>
<h2 id='tipos-de-item'>Tipos de Item</h2>
<p>En la siguiente tabla podrás ver los Tipos de Items que existen en Keynua. Los Items <strong>&quot;User Input&quot;</strong> se refieren a los Items que deben ser enviados por los usuarios.</p>

<table><thead>
<tr>
<th>Item</th>
<th>Id</th>
<th>User Input</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>Términos y condiciones</td>
<td>terms</td>
<td><code>si</code></td>
<td>Hace  referencia a si el usuario ha aceptado o no los términos y condiciones</td>
</tr>
<tr>
<td>Verificación de documentos</td>
<td>documents</td>
<td><code>si</code></td>
<td>Indica que se le han mostrado los documentos a firmar al usuario</td>
</tr>
<tr>
<td>Campo de Texto</td>
<td>text</td>
<td><code>si</code></td>
<td>Campo de texto ingresado por el usuario o por el creador del contrato, por ejemplo el número de Documento de Identidad</td>
</tr>
<tr>
<td>Imagen</td>
<td>image</td>
<td><code>si</code></td>
<td>Hace referencia a una imagen subida por un usuario, por ejemplo, foto del documento de identidad</td>
</tr>
<tr>
<td>Firma Ológrafa</td>
<td>imagesign</td>
<td><code>si</code></td>
<td>Firma ológrafa realizada por el usuario en el proceso de firma</td>
</tr>
<tr>
<td>Video</td>
<td>video</td>
<td><code>si</code></td>
<td>Video realizado por el usuario, en la mayoría de los casos hace referencia a la videofirma.</td>
</tr>
<tr>
<td>Email</td>
<td>email</td>
<td><code>no</code></td>
<td>Hace referencia al envío del email a un usuario</td>
</tr>
<tr>
<td>Reconocimiento de Documento</td>
<td>detectlabels</td>
<td><code>no</code></td>
<td>Proceso de Reconocimiento del formato de un Documento. Por ejemplo, si se le pide subir a un usuario la foto de su DNI del país y sube la foto de su pasaporte, este proceso detectará que no es el documento solicitado y arrojará un error</td>
</tr>
<tr>
<td>Reconocimiento de textos</td>
<td>checklabels</td>
<td><code>no</code></td>
<td>Este proceso realiza la verificación de textos entre 2 elementos, por ejemplo la búsqueda del documento de identidad ingresado y los textos extraídos de la imagen del documento</td>
</tr>
<tr>
<td>Conversión de Video</td>
<td>convertvideo</td>
<td><code>no</code></td>
<td>Proceso que indica que el video del firmante tiene un formato correcto para ser procesado</td>
</tr>
<tr>
<td>Reniec</td>
<td>reniec</td>
<td><code>no</code></td>
<td>Proceso que indica el resultado de la búsqueda del DNI ingresado en Reniec</td>
</tr>
<tr>
<td>Validación de Biometría Facial</td>
<td>facematch</td>
<td><code>no</code></td>
<td>Proceso que indica la validación Biométrica entre 2 elementos que pueden ser por ejemplo la foto obtenida de RENIEC y la videofirma realizada por el usuario</td>
</tr>
<tr>
<td>Reconocimiento de texto hablado</td>
<td>transcribe</td>
<td><code>no</code></td>
<td>Indica si el usuario dijo como texto hablado el código que corresponde con los documentos que está firmando</td>
</tr>
<tr>
<td>Prueba de vida</td>
<td>livenessdetection</td>
<td><code>no</code></td>
<td>Indica si se detectó vida en el video del usuario</td>
</tr>
<tr>
<td>Aprobación Manual</td>
<td>manualapproval</td>
<td><code>no</code></td>
<td>Indica si hubo una aprobación manual de algún Item como <code>detectlabels</code>, <code>facematch</code> o <code>transcribe</code></td>
</tr>
<tr>
<td>Generación de imágenes para insertar en el PDF final</td>
<td>generatethumbnails</td>
<td><code>no</code></td>
<td>Proceso que indica si se pudieron obtener los thumbnails necesarios antes de  poder crear el PDF de documento de firma final (Certificado)</td>
</tr>
<tr>
<td>Documento de Firma Electrónica/Digital</td>
<td>pdf</td>
<td><code>no</code></td>
<td>Indica si el archivo PDF de la firma electrónica se generó satisfactoriamente. <strong>En este Item puedes encontrar el PDF final de firma electrónica generado por Keynua</strong></td>
</tr>
<tr>
<td>Firma Digital</td>
<td>dsignature</td>
<td><code>no</code></td>
<td>Proceso de firma digital aplicado a un archivo de firma electrónica. En este Item puedes encontrar el archivo digital, en caso de que tu proceso incluya firma digital</td>
</tr>
<tr>
<td>Cavali - Perú</td>
<td>cavali</td>
<td><code>no</code></td>
<td>Proceso que indica el registro de un Pagaré electrónico en Cavali para Perú</td>
</tr>
<tr>
<td>Blockchain</td>
<td>blockchain</td>
<td><code>no</code></td>
<td>Proceso que indica si se registró correctamente el hash del documento de firma electrónica final(certificado) en Blockchain</td>
</tr>
<tr>
<td>Normativa NOM151 - México</td>
<td>knom151</td>
<td><code>no</code></td>
<td>Proceso que indica si se generó correctamente la constancia de conservación según la norma Méxicana NOM151</td>
</tr>
<tr>
<td>Firma Múltiple</td>
<td>bulksignature</td>
<td><code>no</code></td>
<td>Indica si se solicitó firmar al usuario de firma múltiple o si firmó satsifactoriamente. El estado &quot;error&quot; no está implementado por el momento en este Item.</td>
</tr>
<tr>
<td>Aprobación de contrato</td>
<td>contractapproval</td>
<td><code>no</code></td>
<td>Solicita aprobación por parte del administrador para finalizar el contrato.</td>
</tr>
</tbody></table>
<h2 id='errores-por-tipo-de-item'>Errores por tipo de Item</h2>
<p>Cuando ocurra un error en un Item, se obtendrán principalmente 2 atributos: <code>code</code> y <code>message</code>.</p>

<blockquote>
<p>Por ejem:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NotValidIdCard"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"El documento de identificación no es válido."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>El valor de <code>code</code> depende del tipo de error y tipo de Item como se detalla  a continuación</p>
<h3 id='documents'>documents</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>DocumentRejectedBySigner</td>
<td>El usuario rechazó el documento.</td>
</tr>
</tbody></table>

<aside class="notice">Para este Item, el valor de <code>message</code> vendría a ser el texto ingresado por la persona que rechazó el documento.</aside>
<h3 id='reniec'>reniec</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ReniecFailed</td>
<td>Ha fallado la conexión con Reniec y no fue posible obtener la información.</td>
</tr>
<tr>
<td>NotAllowedCancellation</td>
<td>El documento se encuentra cancelado.</td>
</tr>
<tr>
<td>NotAllowedRestriction</td>
<td>El documento presenta restricciones por parte de Reniec.</td>
</tr>
<tr>
<td>NotAllowedObservation</td>
<td>El documento presenta observaciones por parte de Reniec.</td>
</tr>
</tbody></table>
<h3 id='convertvideo'>convertvideo</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ConvertVideoFailed</td>
<td>No ha sido posible procesar el video del firmante. Este error puede ocurrir si el video es inválido.</td>
</tr>
</tbody></table>
<h3 id='detectlabels'>detectlabels</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>DidNotPass</td>
<td>La imagen procesada no es un documento válido.</td>
</tr>
<tr>
<td>DetectLabelsFailed</td>
<td>No ha sido posible detectar el formato esperado ni textos en la imagen.</td>
</tr>
</tbody></table>
<h3 id='checklabels'>checklabels</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>unmatchedInputText</td>
<td>El texto ingresado no coincide con la imagen del documento de identificación.</td>
</tr>
<tr>
<td>NotValidIdCard</td>
<td>El documento de identificación no es válido.</td>
</tr>
<tr>
<td>NotValidExpirationDateInIdCard</td>
<td>La fecha de expiración del documento no es válida.</td>
</tr>
<tr>
<td>ExpirationDateNotDetected</td>
<td>No se ha detectado la fecha de expiración en el documento.</td>
</tr>
<tr>
<td>NoDetectedTextsInImage</td>
<td>No se pudo detectar ningún texto dentro de la imagen.</td>
</tr>
<tr>
<td>DuplicatesFoundInId</td>
<td>Se ha detectado más de un documento de identificación.</td>
</tr>
</tbody></table>
<h3 id='transcribe'>transcribe</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ShortCodeNotFound</td>
<td>Error en el código hablado.</td>
</tr>
<tr>
<td>TranscriptionFailed</td>
<td>No fue posible extraer el audio del video.</td>
</tr>
</tbody></table>
<h3 id='facematch'>facematch</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>NotAMatch</td>
<td>La cara del video no coincide con el documento oficial.</td>
</tr>
<tr>
<td>SourceFaceNotFound</td>
<td>La cara en la imagen no se pudo encontrar.</td>
</tr>
<tr>
<td>FacemasksDetected</td>
<td>Se ha detectado una mascarilla en la imagen.</td>
</tr>
<tr>
<td>FaceMatchError</td>
<td>No fue posible encontrar una coincidencia facial.</td>
</tr>
<tr>
<td>MarkedAsFraud</td>
<td>Ha sido marcado como un posible fraude por parte de Keynua.</td>
</tr>
</tbody></table>
<h3 id='livenessdetection'>livenessdetection</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>AdminReject</td>
<td>Error obteniendo la prueba de vida del video.</td>
</tr>
<tr>
<td>ManyFacesDetected</td>
<td>Han sido detectadas múltiples caras en el video.</td>
</tr>
<tr>
<td>ScoreTooLow</td>
<td>El video no ha pasado el score mínimo y debe volver a enviarse.</td>
</tr>
<tr>
<td>NoFacesDetected</td>
<td>No se detectó ningún rostro en el video</td>
</tr>
<tr>
<td>InvalidPayloadStructure</td>
<td>Error obteniendo la prueba de vida del video.</td>
</tr>
<tr>
<td>MarkedAsFraud</td>
<td>Ha sido marcado como un posible fraude por parte de Keynua.</td>
</tr>
</tbody></table>
<h3 id='manualapproval'>manualapproval</h3>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ManualApproveRejected</td>
<td>El item ha sido rechazado por el administrador del contrato.</td>
</tr>
</tbody></table>
<h2 id='customizar-opciones-de-un-item-por-usuario'>Customizar opciones de un item por usuario</h2>
<p>Las opciones de los items que se encuentran establecidas en el template del contrato pueden ser customizadas para un usuario en especifico. Estas se indican para cada tipo de item que el usario tenga asignado en su proceso de firma. Las opciones deben ir dentro del atributo <strong>items</strong> de la <strong>metadata</strong> del usuario durante la creacion del contrato.</p>

<p>Esta configuración de puede aplicar a los siguientes items:</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some:user-name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"signers"</span><span class="p">],</span><span class="w">
    </span><span class="err">//</span><span class="w"> </span><span class="err">Some</span><span class="w"> </span><span class="err">user</span><span class="w"> </span><span class="err">attributes...</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"terms"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"table"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONDICIONES DEL CRÉDITO"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Monto del crédito"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"S/ 6000.00"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="p">{</span><span class="w">
                            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fecha del primer pago"</span><span class="p">,</span><span class="w">
                            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28/07/2021"</span><span class="w">
                        </span><span class="p">},</span><span class="w">
                        </span><span class="err">//</span><span class="w"> </span><span class="err">Some</span><span class="w"> </span><span class="err">items...</span><span class="w">
                    </span><span class="p">]</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='terms'>Terms:</h3>
<p><img src="../images/terms-example-f9388bd7.png" alt="terms-example" /></p>
<h1 id='proceso-de-firma-via-api'>Proceso de firma vía API</h1>
<p>Por defecto, Keynua ofrece al usuario completar el flujo de firma mediante la web de Keynua, sin necesidad de descargar un App o hacer algún registro previo. Esta web de Keynua puedes integrarla a tu propio dominio o a tu App móvil mediante un WebView, siguiendo las instrucciones que se detallan en esta <a href="https://github.com/Keynua/public-docs/wiki/Widget">documentación</a></p>

<p>Puedes usar las APIs de esta sección si lo que quieres es crear tu front personalizado para el flujo de firma. Luego de recibir los inputs del usuario, los procesaremos y validaremos según el flujo de firma que estés usando.</p>

<p>Antes de comenzar, debes reconocer los Items que necesitas enviar de acuerdo a los <a href="#tipos-de-item">Tipos de Item</a> &quot;User Input&quot; que tiene el template que estás usando.</p>

<p><strong>Flujo lógico</strong>
<img src="../images/flujofirma-6a7589d5.jpeg" alt="sign_process" /></p>

<p><strong>Flujo lógico - Error</strong>
<img src="../images/flujofirma_error-e1e3fe63.jpeg" alt="sign_process_error" /></p>

<aside class="warning">Cada template, puede tener distintos itemIds y tipos de Items. Por ello es importante validar esta información para cada uno de los templateIds que estés usando</aside>
<h2 id='obtener-items-pendientes'>Obtener Items pendientes</h2>
<p>Con este API podrás obtener un resumen de los Items que están pendientes a ser enviados. Es muy importante obtener el tipo de item que está pendiente a ser enviado, el itemId y el item version. <strong>El item version cambiará por cada intento de envío que hagas</strong>. Por ejemplo; si subes una foto de un documento que no es reconocido como el documento del país, devolveremos un error en el item de validación de formato del documento, pero el itemId y version que enviarás debe corresponder a la imagen del documento.</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4d50f870-xxxx-xxxx-xxxx-1b50872e31d5e1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keynua-peru-default"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Usuario Prueba"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"views"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"view_2_0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceptación de Términos"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"view_3_0"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documents"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Revisión de Documentos"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dniView"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nº DNI"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"imageDniView"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Foto del DNI"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"videoView"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"input"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"input"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Videofirma"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div><h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST /contracts/v1/sign</code></p>
<h3 id='headers-2'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-3'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario del cual se obtendrá la información</td>
</tr>
</tbody></table>
<h3 id='response-body'>Response body</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único del contrato (contractId)</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador de la plantilla utilizada</td>
</tr>
<tr>
<td>userName</td>
<td>string</td>
<td>Nombres del usuario que firma el contrato</td>
</tr>
<tr>
<td>views</td>
<td>array</td>
<td>Lista de vistas del contrato</td>
</tr>
<tr>
<td>views.id</td>
<td>string</td>
<td>Identificador único de la vista</td>
</tr>
<tr>
<td>views.type</td>
<td>string</td>
<td>Tipo de vista, puede ser <code>info</code> o <code>input</code>. <strong>Los que nos interesan son sólo los de tipo <code>input</code></strong></td>
</tr>
<tr>
<td>views.input</td>
<td>object</td>
<td>Si es un view de tipo <code>input</code>, obtendrás este objeto con más detalle</td>
</tr>
<tr>
<td>views.input.type</td>
<td>string</td>
<td>Tipo de Item, puede ser cualquiera de estos <a href="#item-values">ItemValues</a></td>
</tr>
<tr>
<td>views.input.id</td>
<td>number</td>
<td>Id del item, corresponde al valor de itemId</td>
</tr>
<tr>
<td>views.input.version</td>
<td>number</td>
<td>Versión actual del item</td>
</tr>
<tr>
<td>views.input.userId</td>
<td>number</td>
<td>Identificador del usuario</td>
</tr>
<tr>
<td>views.input.title</td>
<td>string</td>
<td>Título del item</td>
</tr>
</tbody></table>
<h2 id='enviar-un-archivo-multimedia'>Enviar un archivo multimedia</h2>
<p>Para poder enviar un archivo multimedia, debes conocer previamente los archivos que necesitas subir. El procedimiento se debe repetir por cada archivo que subirás, solo aplica para los items de tipo <code>image</code> y <code>video</code>.</p>
<h3 id='paso-1-solicitar-la-informacion-antes-de-subir-un-archivo'>Paso 1: solicitar la información antes de subir un archivo</h3>
<blockquote>
<p>Body payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some:user:token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some_file.jpg"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Si la solicitud fue satisfactoria, la respuesta tendrá la información para que puedas subir el contenido del archivo</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"linkId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some:id"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some:url:for:upload"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/jpeg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"x-amz-tagging"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account-id={accountId}"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"{another-key}"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{another-val}"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Ten en cuenta que {another-key} y {another-val} se refieren a posibles valores que podemos devolver y que deben ser enviados en el paso 2</p>
</blockquote>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>POST /contracts/v1/sign/upload</code></p>
<h3 id='headers-3'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-4'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario del cual se actualizará el item</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del archivo que se va a subir. Debe incluir su extensión</td>
</tr>
</tbody></table>
<h3 id='paso-2-subir-el-contenido-del-archivo'>Paso 2: subir el contenido del archivo</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://some:url:for:upload'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: image/jpeg'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="o">{</span>another-key<span class="o">}</span>: <span class="o">{</span>another-val<span class="o">}</span> <span class="se">\</span>
  <span class="nt">--data-binary</span> <span class="s2">"@some_file.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">axios</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">fs</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Read image file</span>
<span class="kd">const</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="dl">"</span><span class="s2">some_file.jpg</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// Send PUT request</span>
<span class="nx">axios</span>
  <span class="p">.</span><span class="nx">put</span><span class="p">(</span>
    <span class="dl">"</span><span class="s2">https://some:url:for:upload</span><span class="dl">"</span><span class="p">,</span>
    <span class="nx">image</span><span class="p">,</span>
    <span class="p">{</span>
      <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">image/jpeg</span><span class="dl">"</span><span class="p">,</span>
        <span class="p">{</span><span class="nx">another</span><span class="o">-</span><span class="nx">key</span><span class="p">}:</span> <span class="p">{</span><span class="nx">another</span><span class="o">-</span><span class="nx">val</span><span class="p">}</span>
      <span class="p">},</span>
    <span class="p">}</span>
  <span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">((</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>Ten en cuenta que {another-key} y {another-val} se refieren a posibles valores que se retornarán en el paso 1 y que deben ser enviados obligatoriamente en este paso. Si no hubo errores al subir el archivo, se retornará el código de estado 200</p>
</blockquote>

<p>Con la información obtenida en el paso 1, se subirá el archivo. <strong>IMPORTANTE: Ten en cuenta enviar los headers recibidos en el paso 1</strong></p>

<aside class="warning">Los archivos no deben pesar más de 1MB y el video no debe tener una duración de más de 15 segundos</aside>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>PUT {URL-STEP-1}</code></p>
<h3 id='headers-4'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>{Content-Type-Step-1}</td>
</tr>
<tr>
<td>{another-key}</td>
<td>{another-value} (Hace referencia a otro header que se puede haber enviado en el paso1)</td>
</tr>
</tbody></table>

<aside class="warning">Ten en cuenta que <code>{another-key}</code> y <code>{another-val}</code> se refieren a posibles valores que se retornarán en el paso 1 y que deben ser enviados obligatoriamente en este paso</aside>
<h3 id='body-5'>Body</h3>
<p>El archivo en binario de no más de 1MB y video de no más de 15 segundos de duración</p>
<h2 id='enviar-informacion-de-firma'>Enviar información de firma</h2>
<p>Luego de detectar los Items que debes enviar, puedes usar este API para finalmente enviar la información de firma por cada Item. Los Items que podrás enviar son los Items &quot;User Input&quot; como por ejemplo la aceptación de Términos y Condiciones, la visualización de Documentos, un texto y los archivos multimedia como imagen y video.</p>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v2/sign/batch <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "token": "USER-TOKEN-HERE",
    "items": [
        {
            "itemId": 0,
            "version": 0,
            "value": {
                "viewedAt": "2023-03-30T20:15:30.001Z"
            }
        },
        {
            "itemId": 1,
            "version": 0,
            "value": {
                "opened": true
            }
        },
        {
            "itemId": 2,
            "version": 0,
            "value": {
                "text": "46464646"
            }
        },
        {
            "itemId": 3,
            "version": 0,
            "value": {
                "linkId": "LINK-ID-HERE"
            }
        }
    ]

}'</span>
</code></pre></div><h3 id='http-request-8'>HTTP Request</h3>
<p><code>PUT /contracts/v2/sign/batch</code></p>
<h3 id='headers-5'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-6'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario del cual se actualizará la información</td>
</tr>
<tr>
<td>items</td>
<td>array</td>
<td>Arreglo de <a href="#item-values">Item Values</a> a enviar</td>
</tr>
<tr>
<td>otpToken</td>
<td>string</td>
<td>El token de otp necesario <strong>solo</strong> para los contratos que utilizan otp.</td>
</tr>
</tbody></table>
<h3 id='response-body-2'>Response body</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>ok</td>
<td>boolean</td>
<td>Si se ha recibido la información correctamente, obtendrás <code>true</code></td>
</tr>
</tbody></table>
<h3 id='item-values'>Item Values</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>itemId</td>
<td>integer</td>
<td>El identificador del item</td>
</tr>
<tr>
<td>version</td>
<td>integer</td>
<td>La versión actual del item. Ten en cuenta que en caso de un error, esta versión aumentará y deberás usar siempre el último valor. Por ello es importante obtener la último versión mediante el API <a href="#obtener-items-pendientes">Obtener Items pendientes</a></td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>El value a enviar por cada tipo de Item. En las siguientes tablas podrás ver el detalle del value a enviar por cada tipo de item</td>
</tr>
</tbody></table>
<h3 id='item-de-terminos-y-condiciones'>Item de Términos y Condiciones</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>viewedAt</td>
<td>string</td>
<td>ISO String de la fecha</td>
</tr>
</tbody></table>
<h3 id='item-de-documentos'>Item de Documentos</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>opened</td>
<td>boolean</td>
<td>Si los archivos fueron abiertos</td>
</tr>
</tbody></table>
<h3 id='item-de-texto'>Item de Texto</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>text</td>
<td>string</td>
<td>Valor del texto</td>
</tr>
</tbody></table>
<h3 id='archivos-multimedia-image-video'>Archivos multimedia (image/video)</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>linkId</td>
<td>string</td>
<td>linkId obtenido en el paso 1 de <a href="#enviar-un-archivo-multimedia">Enviar un archivo multimedia</a></td>
</tr>
</tbody></table>
<h1 id='configuracion-dinamica-del-template'>Configuración dinámica del template</h1><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1 <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
  "title": "Contract created by API",
  "language": "es",
  "userEmailNotifications": true,
  "templateOptions": {
        "mock": true,
        "classesId": "belcorp-classes-v2",
        "stages": [
           {
              "groups": [
                 {
                    "name": "Firmantes",
                    "type": "signers",
                    "views": {
                        "nothingMore": "nothing-more-custom",
                        "finished": "finished",
                        "validating": "validating-custom",
                        "items": {
                           "terms": "terms-basic",
                           "documents": "documents-v1",
                           "documentNumber": "document-number-dni",
                           "idFront": "image-front-dni",
                           "idBack": "image-back-dni",
                           "videoSignature": "video-signature"
                        }
                    },
                    "documentSides": "both",
                    "documentType": "pe-dni",
                    "allowsUpdateItemTypes": [
                       "detectlabels",
                       "facematch",
                       "checklabels"
                    ],
                    "documentValidations": [
                       "verify-content-reniec",
                       "expiration-date"
                    ],
                    "signatureTypes": [
                       "video-signature"
                    ],
                    "allViewsAtOnce": true,
                    "prefilledActive": true,
                    "workingMessages": {
                       "approvalMessageTitle": "Tu solicitud está en proceso. Por favor comunícate con nuestro Call Center."                  },
                    "errorMessages": {
                       "contentReniecUnmatchedTitle": "El número del DNI registrado: {documentNumber}, no coincide con el número del DNI de la foto",
                       "contentReniecUnmatchedSubtitle": "Contáctanos para mayor información: belcorp_respondepe@belcorp.biz"
                    },
                    "dynamicFields": [
                        {
                            "name": "Foto recibo agua o Luz",
                            "type": "image",
                            "viewId": "imagereciboview",
                            "options": {
                                "orientation": "vertical",
                                "overlay": true,
                                "camera": "environment",
                                "invalidExtensions": [
                                  ".pdf",
                                  ".mp4"
                                ]
                            }
                        }
                    ],
                    "minimumScore": {
                        "idfront": 30,
                        "idback": 30,
                        "liveness-detection": 50,
                        "idfront-approval": 50,
                        "idback-approval": 60,
                        "reniec-video-approval": 80,
                        "reniec-idfront-approval": 80
                    },
                    "matchPercent": {
                        "reniec-idfront": 30,
                        "reniec-video": 60
                    },
                    "validateMinAge": 18,
                    "reviewEachDocument": false,
                    "disableNotification": true,
                    "disableReminder": true,
                    "skipSurveyEmail": true,
                    "maskDocumentNumberValue": true
                 }
              ]
           }
        ]
    },
  "documents": [
    {
      "name": "DocumentPdf.pdf",
      "base64": "YOUR-BASE64-PDF-HERE"
    }
  ],
  "users": [
    {
      "name": "Manuel Silva",
      "email": "msilva@keynua.com",
      "groups": [ "signers" ]
    }
  ]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Contract created by API</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">es</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">userEmailNotifications</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">templateOptions</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">mock</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">classesId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">belcorp-classes-v2</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">stages</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
           <span class="p">{</span>
              <span class="dl">"</span><span class="s2">groups</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                 <span class="p">{</span>
                    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Firmantes</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">signers</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">views</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">"</span><span class="s2">nothingMore</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">nothing-more-custom</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">finished</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">finished</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">validating</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">validating-custom</span><span class="dl">"</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">items</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                           <span class="dl">"</span><span class="s2">terms</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">terms-basic</span><span class="dl">"</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2">documents</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">documents-v1</span><span class="dl">"</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2">documentNumber</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">document-number-dni</span><span class="dl">"</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2">idFront</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">image-front-dni</span><span class="dl">"</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2">idBack</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">image-back-dni</span><span class="dl">"</span><span class="p">,</span>
                           <span class="dl">"</span><span class="s2">videoSignature</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">video-signature</span><span class="dl">"</span>
                        <span class="p">}</span>
                    <span class="p">},</span>
                    <span class="dl">"</span><span class="s2">documentSides</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">both</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">documentType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">pe-dni</span><span class="dl">"</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">allowsUpdateItemTypes</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                       <span class="dl">"</span><span class="s2">detectlabels</span><span class="dl">"</span><span class="p">,</span>
                       <span class="dl">"</span><span class="s2">facematch</span><span class="dl">"</span><span class="p">,</span>
                       <span class="dl">"</span><span class="s2">checklabels</span><span class="dl">"</span>
                    <span class="p">],</span>
                    <span class="dl">"</span><span class="s2">documentValidations</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                       <span class="dl">"</span><span class="s2">verify-content-reniec</span><span class="dl">"</span><span class="p">,</span>
                       <span class="dl">"</span><span class="s2">expiration-date</span><span class="dl">"</span>
                    <span class="p">],</span>
                    <span class="dl">"</span><span class="s2">signatureTypes</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                       <span class="dl">"</span><span class="s2">video-signature</span><span class="dl">"</span>
                    <span class="p">],</span>
                    <span class="dl">"</span><span class="s2">allViewsAtOnce</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">prefilledActive</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">workingMessages</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                       <span class="dl">"</span><span class="s2">approvalMessageTitle</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Tu solicitud está en proceso. Por favor comunícate con nuestro Call Center.</span><span class="dl">"</span>                  <span class="p">},</span>
                    <span class="dl">"</span><span class="s2">errorMessages</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                       <span class="dl">"</span><span class="s2">contentReniecUnmatchedTitle</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">El número del DNI registrado: {documentNumber}, no coincide con el número del DNI de la foto</span><span class="dl">"</span><span class="p">,</span>
                       <span class="dl">"</span><span class="s2">contentReniecUnmatchedSubtitle</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Contáctanos para mayor información: belcorp_respondepe@belcorp.biz</span><span class="dl">"</span>
                    <span class="p">},</span>
                    <span class="dl">"</span><span class="s2">dynamicFields</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Foto recibo agua o Luz</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">viewId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">imagereciboview</span><span class="dl">"</span><span class="p">,</span>
                            <span class="dl">"</span><span class="s2">options</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                                <span class="dl">"</span><span class="s2">orientation</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">vertical</span><span class="dl">"</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">overlay</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">camera</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">environment</span><span class="dl">"</span><span class="p">,</span>
                                <span class="dl">"</span><span class="s2">invalidExtensions</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
                                  <span class="dl">"</span><span class="s2">.pdf</span><span class="dl">"</span><span class="p">,</span>
                                  <span class="dl">"</span><span class="s2">.mp4</span><span class="dl">"</span>
                                <span class="p">]</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">],</span>
                    <span class="dl">"</span><span class="s2">minimumScore</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">"</span><span class="s2">idfront</span><span class="dl">"</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">idback</span><span class="dl">"</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">liveness-detection</span><span class="dl">"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">idfront-approval</span><span class="dl">"</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">idback-approval</span><span class="dl">"</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">reniec-video-approval</span><span class="dl">"</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">reniec-idfront-approval</span><span class="dl">"</span><span class="p">:</span> <span class="mi">80</span>
                    <span class="p">},</span>
                    <span class="dl">"</span><span class="s2">matchPercent</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="dl">"</span><span class="s2">reniec-idfront</span><span class="dl">"</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                        <span class="dl">"</span><span class="s2">reniec-video</span><span class="dl">"</span><span class="p">:</span> <span class="mi">60</span>
                    <span class="p">},</span>
                    <span class="dl">"</span><span class="s2">validateMinAge</span><span class="dl">"</span><span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">reviewEachDocument</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">disableNotification</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">disableReminder</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">skipSurveyEmail</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="dl">"</span><span class="s2">maskDocumentNumberValue</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
                 <span class="p">}</span>
              <span class="p">]</span>
           <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
  <span class="na">documents</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DocumentPdf.pdf</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">base64</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-BASE64-PDF-HERE</span><span class="dl">'</span>
    <span class="p">},</span>
  <span class="p">],</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Manuel Silva</span><span class="dl">'</span><span class="p">,</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">msilva@keynua.com</span><span class="dl">'</span><span class="p">,</span> <span class="na">groups</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">signers</span><span class="dl">'</span><span class="p">]}</span>
  <span class="p">]</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>


<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue creado satisfactoramente, el API retorna un Json estructurado como aparece en la sección de <a href="#contratos">Contratos</a></p>
</blockquote>

<p>Describe las opciones que podemos enviar en el atributo <code>templateOptions</code> al crear el contrato</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>mock</td>
<td>boolean</td>
<td>Default &quot;false&quot; Indica si es un flujo de prueba, se remueven del flujo las validaciones de identidad</td>
</tr>
<tr>
<td>classesId</td>
<td>string</td>
<td>Id del registro de <code>Custom Classes</code></td>
</tr>
<tr>
<td>global</td>
<td>objeto</td>
<td><a href="#configuraciones-globales">Configuraciones globales</a> del template</td>
</tr>
<tr>
<td>stages</td>
<td>array</td>
<td>Contiene las <a href="#stages">estapas</a> del template</td>
</tr>
</tbody></table>
<h2 id='configuraciones-globales'>Configuraciones globales</h2>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>maximumSigningAttempts</td>
<td>integer</td>
<td><code>optional</code> Indica la cantidad máxima de intentos de firma de un usuario</td>
</tr>
<tr>
<td>contractApproval</td>
<td>boolean</td>
<td><code>optional</code> Activa la funcionalidad de aprobación de contratos, ver detalle del api para <a href="#aprobar-un-contrato">Aprobar un Contrato</a></td>
</tr>
</tbody></table>
<h2 id='stages'>Stages</h2>
<p>Los Stages no solo contienen las configuraciones de los grupos, tambien indica cuando inicia la ejecucion de sus items puesto que se ejecutan si y solo si el stage previo finaliza.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>groups</td>
<td>array</td>
<td>Configuraciones de los <a href="#grupos">grupos</a>.</td>
</tr>
</tbody></table>
<h3 id='grupos'>Grupos</h3>
<p>Los grupos incluyen los siguientes tipos: <code>viewers</code>, <code>signers</code> y <code>bulk</code>.</p>

<p><strong>Viewers</strong></p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del grupo, este mismo nombre tendrías que agregarlo a cada usuario que quieras que pertenezca a este gurpo al <a href="#crear-un-contrato">crear el contrato</a></td>
</tr>
<tr>
<td>type</td>
<td>enum</td>
<td><code>viewers</code></td>
</tr>
<tr>
<td>dynamicFields</td>
<td>array</td>
<td>Agrega <a href="#items-customizados">items customizados</a> al flujo.</td>
</tr>
<tr>
<td>removeUserInput</td>
<td>boolean</td>
<td>Indica si el visor debe completar el input <code>text</code> ingresando su nombre o rol en el flujo</td>
</tr>
<tr>
<td>rejectDocuments</td>
<td>boolean</td>
<td>Indica si el visor puede rechazar el documento</td>
</tr>
</tbody></table>

<p><strong>Signers</strong></p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del grupo, este mismo nombre tendrías que agregarlo a cada usuario que quieras que pertenezca a este gurpo al <a href="#crear-un-contrato">crear el contrato</a></td>
</tr>
<tr>
<td>type</td>
<td>enum</td>
<td><code>signers</code></td>
</tr>
<tr>
<td>documentType</td>
<td>string</td>
<td>El tipo de documento que se quiere validar. Ver tabla de los <a href="#documentos-de-identidad-soportados">tipos de documentos</a> soportados</td>
</tr>
<tr>
<td>documentSides</td>
<td>string</td>
<td>Lados del documento de identidad. Puede ser <code>both</code>, <code>back</code> o <code>frontal</code></td>
</tr>
<tr>
<td>signatureTypes</td>
<td>array</td>
<td>Indica los tipos de firma. Puede ser <code>selfie</code>, <code>video-signature</code>, <code>draw</code> y <code>digital-signature</code></td>
</tr>
<tr>
<td>facematch</td>
<td>array</td>
<td>Indica los items a los cuales se le aplicará el reconocimiento facial. Puede ser <code>selfie</code>, <code>liveness</code>, <code>video-signature</code>, <code>reniec</code> y <code>document-frontal</code></td>
</tr>
<tr>
<td>liveness3D</td>
<td>boolean</td>
<td>Incluir validación 3D</td>
</tr>
<tr>
<td>documentValidations</td>
<td>array</td>
<td>Indica las opciones de validación que puedes agregar a los documentos. Puede ser <code>verify-content-reniec</code>, para comparar que los datos de la foto del DNI coincidan con Reniec (Sólo Perú) o <code>expiration-date</code>, para comprobar que el documento de identidad no ha expirado aún o <code>verify-id-number</code>, para comprobar que el número de documento ingresado en el flujo de firma se encuentre en el documento.</td>
</tr>
<tr>
<td>views</td>
<td>object</td>
<td><a href="#vistas-customizadas">Vistas customizadas</a> del template</td>
</tr>
<tr>
<td>dynamicFields</td>
<td>array</td>
<td>Agrega <a href="#items-customizados">items customizados</a> al flujo</td>
</tr>
<tr>
<td>maxNamesDifference</td>
<td>float</td>
<td>Porcentaje de similitud entre los nombres y apellidos que extrae del documento y reniec, la sensibilidad se encuentra en el intervalo de 0 a 1, mientras más se acerque a 0 la validación es más estricta. Por ejemplo: 0.5 indica una sensibilidad intermedia.</td>
</tr>
<tr>
<td>prefilledActive</td>
<td>boolean</td>
<td>Activa los <code>prefilled items</code>, para que el creador del contrato pueda pre-rellenar el número de documento del firmante. Cuando se activa esta opción, el valor que debes ingresar como targetId dentro de cada user es <strong>documentNumber</strong>. Más referencia en la sección de <a href="#crear-un-contrato">crear contrato</a></td>
</tr>
<tr>
<td>reviewEachDocument</td>
<td>boolean</td>
<td>Indica si se debe debe obligar al firmante a abrir todos los documentos para poder continuar con la firma</td>
</tr>
<tr>
<td>disableNotification</td>
<td>boolean</td>
<td>Indica si se quiere omitir el correo de inici</td>
</tr>
<tr>
<td>disableReminder</td>
<td>boolean</td>
<td>Indica si se quiere omitir el recordatorio</td>
</tr>
<tr>
<td>skipSurveyEmail</td>
<td>boolean</td>
<td>Indica si se quiere omitir la encuesta de satisfacción</td>
</tr>
<tr>
<td>allViewsAtOnce</td>
<td>boolean</td>
<td>Esta modalidad muestra todos los pasos del flujo de firma en vertical</td>
</tr>
<tr>
<td>maskDocumentNumberValue</td>
<td>boolean</td>
<td>Oculta el número de documento ingresado en caso de error</td>
</tr>
<tr>
<td>validateMinAge</td>
<td>number</td>
<td>Edad minima del firmante permitida. Disponible para validaciones gubernamentales</td>
</tr>
<tr>
<td>denyInstructionsGrade</td>
<td>boolean</td>
<td>Si activas esta opción, se devolverá un error si el DNI evaluado tiene el grado de Instrucción de Iletrado o Educación Especial. <strong>Para contratos, esta opción está activa por defecto</strong></td>
</tr>
<tr>
<td>minimumScore</td>
<td>objeto</td>
<td>Customizar la sensibilidad de las validaciones de identidad. Para más detalle consultar la sección <a href="#customizar-validaciones">Customizar validaciones</a></td>
</tr>
<tr>
<td>matchPercent</td>
<td>objeto</td>
<td>Customizar la sensibilidad de las validaciones de reconocimiento facial. Para más detalle consultar la sección <a href="#customizar-validaciones">Customizar validaciones</a></td>
</tr>
<tr>
<td>workingMessages</td>
<td>objeto</td>
<td>Customizar mensajes del flujo de firma en progreso. Para más detalle consultar la sección <a href="#customizar-mensajes">Customizar mensajes</a></td>
</tr>
<tr>
<td>errorMessages</td>
<td>objeto</td>
<td>Customiar mensaje de error del flujo de firma. Para más detalle consultar la sección <a href="#customizar-mensajes">Customizar mensajes</a></td>
</tr>
</tbody></table>

<p><strong>Bulk (Firma gerentes)</strong></p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del grupo, este mismo nombre tendrías que agregarlo a cada usuario que quieras que pertenezca a este gurpo al <a href="#crear-un-contrato">crear el contrato</a></td>
</tr>
<tr>
<td>type</td>
<td>enum</td>
<td><code>bulk</code></td>
</tr>
<tr>
<td>requiredItems</td>
<td>array</td>
<td>El arreglo puede contener los siguientes elementos: <code>video</code>, <code>imagesign</code>, <code>visto</code> e <code>image</code></td>
</tr>
</tbody></table>
<h3 id='vistas-customizadas'>Vistas customizadas</h3>
<p>Las vistas personalizadas permiten modificar la apariencia del Widget dinámicamente.</p>

<p>El atributo de <code>views</code> debe completarse con la siguiente estructura:</p>

<p><img src="../images/custom-views-c632a1d3.png" alt="views" /></p>

<table><thead>
<tr>
<th>Nombre</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code>expired</code></td>
<td>Personalizar vista de expiración del contrato</td>
</tr>
<tr>
<td><code>finished</code></td>
<td>Personalizar vista de finalización del contrato</td>
</tr>
<tr>
<td><code>deleted</code></td>
<td>Personalizar vista de contrato eliminado</td>
</tr>
<tr>
<td><code>nothingMore</code></td>
<td>Personalizar vista de firma enviada</td>
</tr>
<tr>
<td><code>validating</code></td>
<td>Personalizar vista de validación de firma</td>
</tr>
<tr>
<td><code>maxAttempts</code></td>
<td>Personalizar vista de bloqueo por máximo de intentos de firma</td>
</tr>
<tr>
<td><code>pending</code></td>
<td>Personalizar vista de flujo de firma pendiente</td>
</tr>
<tr>
<td><code>viewers</code></td>
<td>Personalizar vista de Vistos buenos</td>
</tr>
<tr>
<td><code>terms</code></td>
<td>Vista asignada al <code>input</code> de términos y condiciones.</td>
</tr>
<tr>
<td><code>documents</code></td>
<td>Vista asignada al <code>input</code> de Documentos.</td>
</tr>
<tr>
<td><code>documentNumber</code></td>
<td>Vista asignada al <code>input</code> de Número de documento.</td>
</tr>
<tr>
<td><code>idFront</code></td>
<td>Vista asignada al <code>input</code> de Foto frotal del documento de identidad.</td>
</tr>
<tr>
<td><code>idBack</code></td>
<td>Vista asignada al <code>input</code> de Foto posterior del documento de identidad.</td>
</tr>
<tr>
<td><code>drawnSignature</code></td>
<td>Vista asignada al <code>input</code> de firma dibujada.</td>
</tr>
<tr>
<td><code>selfie</code></td>
<td>Vista asignada al <code>input</code> de Foto Selfie.</td>
</tr>
<tr>
<td><code>videoSignature</code></td>
<td>Vista asignada al <code>input</code> de Video firma.</td>
</tr>
</tbody></table>
<h3 id='items-customizados'>Items customizados</h3>
<p>Los items customizado tienen una estructura base en cual cambian los <code>options</code> acorde a su tipo. Los tipos disponibles: <code>image</code>, <code>text</code> y <code>video</code>.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del item</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Puede ser <code>image</code>, <code>text</code> o <code>video</code></td>
</tr>
<tr>
<td>prefilledId</td>
<td>string</td>
<td>Si tenemos el atributo <code>prefilledActive</code> activado podemos especificar el id de referencia para ingresar el valor del item</td>
</tr>
<tr>
<td>viewId</td>
<td>string</td>
<td>Id de la vista customizada</td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>Opciones del item</td>
</tr>
</tbody></table>

<p>Opciones del item:</p>

<ul>
<li>Imagen (<code>image</code>)</li>
</ul>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>btnLabel</td>
<td>string</td>
<td>Texto del botón principal</td>
</tr>
<tr>
<td>invalidExtensions</td>
<td>array</td>
<td>Extensiones inválidas</td>
</tr>
<tr>
<td>placeholderImgName</td>
<td>string</td>
<td>Id de la ilustración del item</td>
</tr>
<tr>
<td>orientation</td>
<td>string</td>
<td>Orientación de la cámara. Puede ser <code>horizontal</code> o <code>vertical</code></td>
</tr>
<tr>
<td>camera</td>
<td>string</td>
<td>Tipo de cámara. Puede ser <code>environment</code> o <code>user</code></td>
</tr>
</tbody></table>

<ul>
<li>Texto (<code>text</code>)</li>
</ul>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>regex</td>
<td>string</td>
<td>Validación del formato</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Tipo del input. Puede ser <code>text</code>, <code>number</code> o <code>tel</code></td>
</tr>
<tr>
<td>minLength</td>
<td>number</td>
<td>Longitud máxima del input</td>
</tr>
<tr>
<td>maxLength</td>
<td>number</td>
<td>Longitud mínima del input</td>
</tr>
</tbody></table>

<ul>
<li>Video (<code>video</code>)</li>
</ul>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>btnLabel</td>
<td>string</td>
<td>Texto del botón principal</td>
</tr>
<tr>
<td>invalidExtensions</td>
<td>array</td>
<td>Extensiones inválidas</td>
</tr>
<tr>
<td>placeholderImgName</td>
<td>string</td>
<td>Id de la ilustración del item</td>
</tr>
<tr>
<td>orientation</td>
<td>string</td>
<td>Orientación de la cámara. Puede ser <code>horizontal</code> o <code>vertical</code></td>
</tr>
<tr>
<td>camera</td>
<td>string</td>
<td>Tipo de cámara. Puede ser <code>environment</code> o <code>user</code></td>
</tr>
<tr>
<td>hideNativeButton</td>
<td>boolean</td>
<td>Oculta botón de la cámara nativa</td>
</tr>
</tbody></table>
<h3 id='customizar-mensajes'>Customizar mensajes</h3>
<p>Customizar mensajes de un flujo en proceso:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>approvalMessageTitle</td>
<td>string</td>
<td>Título de la aprobación manual</td>
</tr>
<tr>
<td>approvalMessageSubtitle</td>
<td>string</td>
<td>Subtítulo de la aprobación manual</td>
</tr>
</tbody></table>

<p>Customizar mensajes de error:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>idNumberUnmatchedTitle</td>
<td>string</td>
<td>Título del mensaje cuando el número de documeto es inválido</td>
</tr>
<tr>
<td>idNumberUnmatchedSubtitle</td>
<td>string</td>
<td>Subtítulo del mensaje cuando el número de documeto es inválido</td>
</tr>
<tr>
<td>contentReniecUnmatchedTitle</td>
<td>string</td>
<td>Título del mensaje cuando el contenido del documento es inválido</td>
</tr>
<tr>
<td>contentReniecUnmatchedSubtitle</td>
<td>string</td>
<td>Subtítulo del mensaje cuando el contenido del documento es inválido</td>
</tr>
</tbody></table>
<h3 id='customizar-validaciones'>Customizar validaciones</h3>
<p>Customizar validaciones de identidad:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>idfront</td>
<td>number</td>
<td>Validación del formato frontal del documento</td>
</tr>
<tr>
<td>idback</td>
<td>number</td>
<td>Validación del formato posterior del documento</td>
</tr>
<tr>
<td>idfront-approval</td>
<td>number</td>
<td>Aprobación manual de la parte frontal del documento</td>
</tr>
<tr>
<td>idback-approval</td>
<td>number</td>
<td>Aprobación manual de la parte posterior del documento</td>
</tr>
<tr>
<td>liveness-detection</td>
<td>number</td>
<td>Aprobación manual de la prueba de vida</td>
</tr>
<tr>
<td>video-idfront-approval</td>
<td>number</td>
<td>Aprobación manual entre video y la parte frontal del documento</td>
</tr>
<tr>
<td>reniec-idfront-approval</td>
<td>number</td>
<td>Aprobación manual entre reniec y la parte frontal del documento</td>
</tr>
<tr>
<td>reniec-video-approval</td>
<td>number</td>
<td>Aprobación manual entre reniec y la video firma</td>
</tr>
<tr>
<td>reniec-liveness-approval</td>
<td>number</td>
<td>Aprobación manual entre reniec y prueba de vida</td>
</tr>
<tr>
<td>video-liveness-approval</td>
<td>number</td>
<td>Aprobación manual entre video firma y prueba de vida</td>
</tr>
<tr>
<td>selfie-reniec-approval</td>
<td>number</td>
<td>Aprobación manual entre selfie y reniec</td>
</tr>
<tr>
<td>selfie-idfront-approval</td>
<td>number</td>
<td>Aprobación manual entre selfie y la parte frontal del documento</td>
</tr>
</tbody></table>

<p>Customizar validaciones de reconocimiento facial:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>video-idfront</td>
<td>number</td>
<td>Facematch entre video firma y la parte frontal del documento</td>
</tr>
<tr>
<td>reniec-idfront</td>
<td>number</td>
<td>Facematch entre reniec y la parte frontal del documento</td>
</tr>
<tr>
<td>reniec-video</td>
<td>number</td>
<td>Facematch entre reniec y video firma</td>
</tr>
<tr>
<td>reniec-liveness</td>
<td>number</td>
<td>Facematch entre reniec y prueba de vida</td>
</tr>
<tr>
<td>video-liveness</td>
<td>number</td>
<td>Facematch entre video firma y prueba de vida</td>
</tr>
<tr>
<td>selfie-reniec</td>
<td>number</td>
<td>Facematch entre selfie y reniec</td>
</tr>
<tr>
<td>selfie-idfront</td>
<td>number</td>
<td>Facematch entre selfie y la parte frontal del documento</td>
</tr>
</tbody></table>
<h1 id='documentos-de-identidad-soportados'>Documentos de identidad soportados</h1>
<table><thead>
<tr>
<th>id</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code>pe-dni</code></td>
<td>Documento de identidad Perú</td>
</tr>
<tr>
<td><code>pe-ce</code></td>
<td>Carné de extrangerīa Perú</td>
</tr>
<tr>
<td><code>passport</code></td>
<td>Pasaporte</td>
</tr>
<tr>
<td><code>co-cedula</code></td>
<td>Cédula Colombiana</td>
</tr>
<tr>
<td><code>br-denatran</code></td>
<td>Denatran Brasil</td>
</tr>
<tr>
<td><code>cl-cedula</code></td>
<td>Cédula Chile</td>
</tr>
<tr>
<td><code>mx-ife</code></td>
<td>Documento de identidad Mexico (IFE)</td>
</tr>
<tr>
<td><code>sv-dui</code></td>
<td>DUI (El Salvador)</td>
</tr>
<tr>
<td><code>pa-id</code></td>
<td>Cédula panameña</td>
</tr>
<tr>
<td><code>ar-id</code></td>
<td>Cédula argentina</td>
</tr>
<tr>
<td><code>br-id</code></td>
<td>Cédula brasilera</td>
</tr>
<tr>
<td><code>bo-id</code></td>
<td>Cédula boliviana</td>
</tr>
<tr>
<td><code>cr-id</code></td>
<td>Cédula costarricense</td>
</tr>
<tr>
<td><code>cu-id</code></td>
<td>Cédula cubana</td>
</tr>
<tr>
<td><code>ec-id</code></td>
<td>Cédula ecuatoriana</td>
</tr>
<tr>
<td><code>gt-id</code></td>
<td>Cédula guatemalteca</td>
</tr>
<tr>
<td><code>hn-id</code></td>
<td>Cédula hondureña</td>
</tr>
<tr>
<td><code>ni-id</code></td>
<td>Cédula nicaraguense</td>
</tr>
<tr>
<td><code>py-id</code></td>
<td>Cédula paraguaya</td>
</tr>
<tr>
<td><code>pr-id</code></td>
<td>Cédula puertorriqueña</td>
</tr>
<tr>
<td><code>do-id</code></td>
<td>Cédula dominicana</td>
</tr>
<tr>
<td><code>uy-id</code></td>
<td>Cédula uruguaya</td>
</tr>
<tr>
<td><code>us-id</code></td>
<td>Licencia de conducir</td>
</tr>
<tr>
<td><code>ve-id</code></td>
<td>Cédula venezolana</td>
</tr>
<tr>
<td><code>ch-cedula</code></td>
<td>Cédula chilena</td>
</tr>
<tr>
<td><code>global</code></td>
<td>Global</td>
</tr>
</tbody></table>
<h1 id='deceval'>Deceval</h1>
<p>Permite asociar un Pagaré emitido en el sistema de Deceval a un contrato.</p>

<aside class="warning">Si quieres crear contratos con Deceval, debes contactar al equipo de soporte de Keynua</aside>
<h2 id='restricciones'>Restricciones</h2>
<ol>
<li>El objeto <code>decevalData</code> se debe agregar a los flags en la <a href="#crear-un-contrato">creación del contrato</a>.</li>
<li>Todos los usuarios del contrato que se agregan mediante el atributo <code>users</code> deben pertenecer al grupo de firmantes del proceso si y solo si participan en el Pagaré.</li>
</ol>
<h2 id='flujo-de-firma'>Flujo de firma</h2>
<ol>
<li>Registrar giradores.</li>
<li>Creación del Pagaré en Deceval.</li>
<li>Usuario realiza la firma del contrato mediante el Widget de keynua.</li>
<li>Se ejecuta el item de firma Deceval: Este item usa la accion &quot;FirmarPagares&quot; del servicio de
Deceval para registrar la firma del participante.</li>
<li>Se ejecuta el item de validación del Pagaré: consulta el estado del Pagaré en el sistema de Deceval mediante la acción &quot;ConsultarPagares&quot; para guardar el documento generado en el contrato y adjuntarlo al pdf final.</li>
</ol>
<h2 id='crear-girador-natural'>Crear girador natural</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/deceval/v1/crear-girador-natural"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">POST</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">girador</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">nombresNat_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Nombre</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">correoElectronico</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">prueba@example.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">primerApellido_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Apellido 1</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">segundoApellido_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Apellido 2</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">numeroCelular</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2348458734</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">estadoCivil</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">soltero</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">direccion1PersonaGrupo_PGP</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Domicilio 1</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">telefono1PersonaGrupo_PGP</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">3495852343</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">fechaExpedicion_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2021-09-01</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">fechaNacimiento_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2021-09-01</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">fkIdDepartamentoExpedicion_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">11</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">fkIdCiudadExpedicion_Nat</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">11001</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">fkIdTipoDocumento</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">1</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">numeroDocumento</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">523642456</span><span class="se">\"\n</span><span class="s2">  }</span><span class="se">\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">girador</span><span class="se">\"</span><span class="s">: {</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">nombresNat_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Nombre</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">correoElectronico</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">prueba@example.com</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">primerApellido_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Apellido 1</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">segundoApellido_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Apellido 2</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">numeroCelular</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">2348458734</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">estadoCivil</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">soltero</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">direccion1PersonaGrupo_PGP</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Domicilio 1</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">telefono1PersonaGrupo_PGP</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">3495852343</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">fechaExpedicion_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">2021-09-01</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">fechaNacimiento_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">2021-09-01</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">fkIdDepartamentoExpedicion_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">11</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">fkIdCiudadExpedicion_Nat</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">11001</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">fkIdTipoDocumento</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">1</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">numeroDocumento</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">523642456</span><span class="se">\"\n</span><span class="s">  }</span><span class="se">\n</span><span class="s">}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/deceval/v1/crear-girador-natural"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/deceval/v1/crear-girador-natural <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
  "girador": {
    "nombresNat_Nat": "Nombre",
    "correoElectronico": "prueba@example.com",
    "primerApellido_Nat": "Apellido 1",
    "segundoApellido_Nat": "Apellido 2",
    "numeroCelular": "2348458734",
    "estadoCivil": "soltero",
    "direccion1PersonaGrupo_PGP": "Domicilio 1",
    "telefono1PersonaGrupo_PGP": "3495852343",
    "fechaExpedicion_Nat": "2021-09-01",
    "fechaNacimiento_Nat": "2021-09-01",
    "fkIdDepartamentoExpedicion_Nat": "11",
    "fkIdCiudadExpedicion_Nat": "11001",
    "fkIdTipoDocumento": "1",
    "numeroDocumento": "523642456"
  }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">girador</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">nombresNat_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Nombre</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">correoElectronico</span><span class="p">:</span> <span class="dl">'</span><span class="s1">prueba@example.com</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">primerApellido_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Apellido 1</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">segundoApellido_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Apellido 2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">numeroCelular</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2348458734</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">estadoCivil</span><span class="p">:</span> <span class="dl">'</span><span class="s1">soltero</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">direccion1PersonaGrupo_PGP</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Domicilio 1</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">telefono1PersonaGrupo_PGP</span><span class="p">:</span> <span class="dl">'</span><span class="s1">3495852343</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fechaExpedicion_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2021-09-01</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fechaNacimiento_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2021-09-01</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fkIdDepartamentoExpedicion_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">11</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fkIdCiudadExpedicion_Nat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">11001</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fkIdTipoDocumento</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">numeroDocumento</span><span class="p">:</span> <span class="dl">'</span><span class="s1">523642456</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/deceval/v1/crear-girador-natural</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>


<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Los participantes del Pagaré deben ser registrados como giradores antes de crear un proceso de firma con Deceval.</p>
</blockquote>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST /deceval/v1/crear-girador-natural</code></p>
<h3 id='headers-6'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-7'>Body</h3>
<p>Para crear el girador, se tiene que enviar la data como un objeto JSON</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>nombresNat_Nat</td>
<td>string</td>
<td>Nombres</td>
</tr>
<tr>
<td>correoElectronico</td>
<td>string</td>
<td>Correo electrónico</td>
</tr>
<tr>
<td>primerApellido_Nat</td>
<td>string</td>
<td>Primer apellido</td>
</tr>
<tr>
<td>segundoApellido_Nat</td>
<td>string</td>
<td>Segundo apellido</td>
</tr>
<tr>
<td>fkIdTipoDocumento</td>
<td>string</td>
<td>Tipo de documento. Puede tener los siguientes valores: <code>&quot;1&quot; (CEDULA DE CIUDADANIA)</code> , <code>&quot;2&quot; (CEDULA DE EXTRANJERIA)</code></td>
</tr>
<tr>
<td>numeroDocumento</td>
<td>string</td>
<td>Número de documento</td>
</tr>
<tr>
<td>numeroCelular</td>
<td>string</td>
<td>Número de celular</td>
</tr>
<tr>
<td>estadoCivil</td>
<td>string</td>
<td>Estado civil</td>
</tr>
<tr>
<td>direccion1PersonaGrupo_PGP</td>
<td>string</td>
<td>Dirección de domicilio</td>
</tr>
<tr>
<td>telefono1PersonaGrupo_PGP</td>
<td>string</td>
<td>Teléfono</td>
</tr>
<tr>
<td>fechaNacimiento_Nat</td>
<td>string</td>
<td>Fecha de nacimiento. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>fechaExpedicion_Nat</td>
<td>string</td>
<td>Fecha de expedición. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>fkIdDepartamentoExpedicion_Nat</td>
<td>string</td>
<td>Departamento de expedición</td>
</tr>
<tr>
<td>fkIdCiudadExpedicion_Nat</td>
<td>string</td>
<td>Cuidad de expedición</td>
</tr>
</tbody></table>
<h2 id='consultar-girador'>Consultar girador</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/deceval/v1/obtener-girador"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">POST</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">idClasePersona</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">1</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">tipoDocumento</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">1</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">    </span><span class="se">\"</span><span class="s2">numeroDocumento</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">523642456</span><span class="se">\"\n</span><span class="s2">    }"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">idClasePersona</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">1</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">tipoDocumento</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">1</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">    </span><span class="se">\"</span><span class="s">numeroDocumento</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">523642456</span><span class="se">\"\n</span><span class="s">    }"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/deceval/v1/crear-girador-natural"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/deceval/v1/obtener-girador <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "idClasePersona": "1",
    "tipoDocumento": "1",
    "numeroDocumento": "523642456",
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">idClasePersona</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">tipoDocumento</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">numeroDocumento</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">523642456</span><span class="dl">"</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">deceval/v1/obtener-girador</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>


<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><h3 id='http-request-10'>HTTP Request</h3>
<p><code>POST /deceval/v1/obtener-girador</code></p>
<h3 id='headers-7'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-8'>Body</h3>
<p>Para obtener el girador, se tiene que enviar la data como un objeto JSON</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>idClasePersona</td>
<td>string</td>
<td>Tipo de girador. Puede tener los siguientes valores: <code>&quot;1&quot; (NATURAL)</code> , <code>&quot;2&quot; (JURIDICO)</code></td>
</tr>
<tr>
<td>numeroDocumento</td>
<td>string</td>
<td>Número de documento</td>
</tr>
<tr>
<td>tipoDocumento</td>
<td>string</td>
<td>Tipo de documento. Puede tener los siguientes valores: <code>&quot;1&quot; (CEDULA DE CIUDADANIA)</code> , <code>&quot;2&quot; (CEDULA DE EXTRANJERIA)</code></td>
</tr>
</tbody></table>
<h2 id='estructura-del-pagare'>Estructura del Pagaré</h2>
<blockquote>
<p><code>decevalData</code></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"flags"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"decevalData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"promissoryNote"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"tipoPagare"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"numCredito"</span><span class="p">:</span><span class="w"> </span><span class="s2">"964234"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"fechaVencimientoFinanciero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-13"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"numReferencia"</span><span class="p">:</span><span class="w"> </span><span class="s2">"985462"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"numPagareEntidad"</span><span class="p">:</span><span class="w"> </span><span class="s2">"642345"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"creditoReembolsableEn"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"valorPesosDesembolso"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
                </span><span class="nl">"valorPesosDesembolsoLetras"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DIEZ MIL"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"otorganteNumId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444332323"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"otorganteTipoId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"apoderadoNumId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"754345789"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"apoderadoTipoId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"listaCodeudoresAvalistasPagare"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"giradorNumId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"048918289"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"idRol"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"giradorTipoId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="nl">"giradorNumId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"453456345"</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"idRol"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                        </span><span class="nl">"giradorTipoId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"ciudadCreacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11001"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"deptoCreacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"paisCreacion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CO"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p><code>users</code></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"signers"</span><span class="w"> </span><span class="p">],</span><span class="w">
            </span><span class="nl">"prefilledItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documentNumber"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"444332323"</span><span class="w"> </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nombres y Apellidos 1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"correo1@ejemplo.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"signers"</span><span class="w"> </span><span class="p">],</span><span class="w">
            </span><span class="nl">"prefilledItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documentNumber"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"754345789"</span><span class="w"> </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nombres y Apellidos 2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"correo2@ejemplo.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"signers"</span><span class="w"> </span><span class="p">],</span><span class="w">
            </span><span class="nl">"prefilledItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documentNumber"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"048918289"</span><span class="w"> </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nombres y Apellidos 3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"correo3@ejemplo.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"signers"</span><span class="w"> </span><span class="p">],</span><span class="w">
            </span><span class="nl">"prefilledItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"target"</span><span class="p">:</span><span class="w"> </span><span class="s2">"documentNumber"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"text"</span><span class="p">:</span><span class="w"> </span><span class="s2">"453456345"</span><span class="w"> </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nombres y Apellidos 4"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"correo4@ejemplo.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='promissorynote'>promissoryNote:</h3>
<p>Detalle del pagaré. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>tipoPagare</td>
<td>string</td>
<td>Tipo de Pagaré. Puede tener los siguientes valores: <code>&quot;1&quot; (Diligenciado)</code> , <code>&quot;2&quot; (En blanco con carta de instrucciones)</code>.</td>
</tr>
<tr>
<td>numCredito</td>
<td>string</td>
<td>Número de crédito</td>
</tr>
<tr>
<td>fechaVencimientoFinanciero</td>
<td>string</td>
<td>Fecha de vencimiento. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>numReferencia</td>
<td>string</td>
<td>Número de referencia</td>
</tr>
<tr>
<td>numPagareEntidad</td>
<td>string</td>
<td>Número del Pagaré de la entidad</td>
</tr>
<tr>
<td>creditoReembolsableEn</td>
<td>integer</td>
<td>Indica el tipo de moneda del desembolso. Puede tener los siguientes valores: <code>1 (EnURV)</code> , <code>2 (En Pesos)</code> , <code>3 (En Dólares)</code> , 4 <code>(Otros)</code></td>
</tr>
<tr>
<td>valorPesosDesembolso</td>
<td>integer</td>
<td>Valor de desembolso</td>
</tr>
<tr>
<td>valorPesosDesembolsoLetras</td>
<td>string</td>
<td>Valor de desembolso representado en texto</td>
</tr>
<tr>
<td>otorganteTipoId</td>
<td>string</td>
<td>Tipo de documento del apoderado.  Puede tener los siguientes valores: <code>&quot;1&quot; (CEDULA DE CIUDADANIA)</code> , <code>&quot;2&quot; (CEDULA DE EXTRANJERIA)</code>.</td>
</tr>
<tr>
<td>otorganteNumId</td>
<td>string</td>
<td>Número de documento del otorgante</td>
</tr>
<tr>
<td>apoderadoTipoId</td>
<td>string</td>
<td>Tipo de documento del apoderado.  Puede tener los siguientes valores: <code>&quot;1&quot; (CEDULA DE CIUDADANIA)</code> , <code>&quot;2&quot; (CEDULA DE EXTRANJERIA)</code>.</td>
</tr>
<tr>
<td>apoderadoNumId</td>
<td>string</td>
<td>Número de documento del apoderado</td>
</tr>
<tr>
<td>ciudadCreacion</td>
<td>string</td>
<td>Cuidad de creacion del Pagaré</td>
</tr>
<tr>
<td>deptoCreacion</td>
<td>string</td>
<td>Departamento de creación del Pagaré</td>
</tr>
<tr>
<td>paisCreacion</td>
<td>string</td>
<td>Pais de creación del Pagaré</td>
</tr>
<tr>
<td>listaCodeudoresAvalistasPagare</td>
<td><a href="#CodeudoresAvalistas">CodeudoresAvalistas[]</a></td>
<td>Lista de codeudores y avalistas</td>
</tr>
</tbody></table>
<h3 id='codeudoresavalistas'>CodeudoresAvalistas</h3>
<p>El codeudor o avalista del pagaré. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>giradorTipoId</td>
<td>string</td>
<td>Tipo de documento del apoderado.  Puede tener los siguientes valores: <code>&quot;1&quot; (CEDULA DE CIUDADANIA)</code> , <code>&quot;2&quot; (CEDULA DE EXTRANJERIA)</code>.</td>
</tr>
<tr>
<td>idRol</td>
<td>string</td>
<td>Rol del participante. Puede tener los siguientes valores: <code>&quot;6&quot; (Codeudor)</code> , <code>&quot;7&quot; (Avalista)</code></td>
</tr>
<tr>
<td>giradorNumId</td>
<td>string</td>
<td>Nùmero de documento del participante</td>
</tr>
</tbody></table>
<h1 id='verificacion-de-identidad'>Verificación de identidad</h1>
<p>Permite crear, listar y obtener verificaciones de identidad.</p>
<h2 id='propiedades-de-una-verificacion-de-identidad'>Propiedades de una verificación de identidad</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"userRealName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JOHN, DOE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:03:50.272Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirationInHours"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:08.500Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6afe9bb0-a6e3-11eb-9a2c-11fc3348624ae1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88b93325-82c4-40aa-9606-f49c757382ae"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_email@gmail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"countryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...ZlOWJiMC1hNmUzLTExZWItOWEyYy0xMWZjMzM0ODYyNGFlMS"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:02.309Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@keynua.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-18T22:40:05.851Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userFullName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Lima"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identification 123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userIdInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe-id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"idNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verificationDigit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"names"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perez Alvarez"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-11-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-03-17"</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some address"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="err">ContractItem</span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userRealName</td>
<td>string</td>
<td>No</td>
<td>Nombre completo del usuario</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>No</td>
<td><code>pending</code>, <code>pending_input</code>, <code>pending_approval</code>, <code>working</code>, <code>error</code>, <code>done</code>, <code>deleted</code>, <code>max_attempts</code>, o <code>expired</code></td>
</tr>
<tr>
<td>finishedAt</td>
<td>string</td>
<td>Sí</td>
<td>Fecha y hora de finalización en formato ISO</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>No</td>
<td>Lenguaje con el cual se completará el proceso de identificación</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Sí</td>
<td>Campo libre. Útil para realizar búsquedas.</td>
</tr>
<tr>
<td>expirationInHours</td>
<td>string</td>
<td>Sí</td>
<td>En cuantas horas luego de la creación, la verificación expirará. <code>0</code> no expira.</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Sí</td>
<td>Fecha y hora en formato ISO del momento en que la verificación está lista para ser completada.</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>No</td>
<td>Id interno</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>No</td>
<td>Número de documento nacional de identificación</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>Identificador único de la verificación</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>No</td>
<td>Id de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>userEmail</td>
<td>string</td>
<td>Sí</td>
<td>Email del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userPhone</td>
<td>string</td>
<td>Sí</td>
<td>Teléfono celular del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>countryCode</td>
<td>string</td>
<td>No</td>
<td>Código del país en el que se realiza la verificación</td>
</tr>
<tr>
<td>userToken</td>
<td>string</td>
<td>No</td>
<td>Token con el cual se puede armar el link donde se realizará la verificación. Por ejemplo: <code>https://sign.keynua.com/index.html?token={token}</code></td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>No</td>
<td>Fecha y hora de creación en formato ISO</td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>No</td>
<td>Email de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Sí</td>
<td>Id de la organización en la que se creó la verificación</td>
</tr>
<tr>
<td>updatedAt</td>
<td>string</td>
<td>No</td>
<td>Última fecha y hora en formato ISO en la que se realizó alguna modificación</td>
</tr>
<tr>
<td>userFullName</td>
<td>string</td>
<td>Sí</td>
<td>Nombre completo de la persona</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>No</td>
<td>Nombre de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>timezone</td>
<td>string</td>
<td>No</td>
<td>Huso horario  utilizado en notificaciones y mensajes</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>No</td>
<td>Título de la verificación</td>
</tr>
<tr>
<td>userIdInfo</td>
<td>string</td>
<td>Sí</td>
<td>Información obtenida del OCR del documento enviado por el firmante. Esta información se devolverá solamente cuando la Identificación haya finalizado y de momento solo aplica para las Identificaciones Peruanas. La información de la dirección (address) se devolverá solamente si el usuario también envía la parte trasera del DNI</td>
</tr>
<tr>
<td>items</td>
<td><a href="#items-del-contrato">ContractItem</a>[]</td>
<td>No</td>
<td>Lista de pasos que sigue la verificación.</td>
</tr>
</tbody></table>
<h2 id='crear-verificacion-de-identidad'>Crear verificación de identidad</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> PUT <span class="s1">'https://api.keynua.com/identity-verification/v1'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data-raw</span> <span class="s1">'{
    "documentNumber": "12345678",
    "userPhone": "51123456789",
    "userFullName": "Patrick Star",
    "title": "Identification 12345678",
    "type": "video",
    "documentType": "pe-dni",
    "disableInitialNotification": false,
    "validateDocument": true
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.dev.keynua.com/identity-verification/v1"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"application/json"</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">documentNumber</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">12345678</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">userPhone</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">51123456789</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">userFullName</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Patrick Star</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">title</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Identification 12345678</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">video</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2"> </span><span class="se">\"</span><span class="s2">documentType</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">pe-dni</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2"> </span><span class="se">\"</span><span class="s2">disableInitialNotification</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">false</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2"> </span><span class="se">\"</span><span class="s2">validateDocument</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">true</span><span class="se">\"\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.keynua.com"</span><span class="p">)</span>
<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s">"documentNumber"</span><span class="p">:</span> <span class="s">"12345678"</span><span class="p">,</span>
    <span class="s">"userPhone"</span><span class="p">:</span> <span class="s">"51123456789"</span><span class="p">,</span>
    <span class="s">"userFullName"</span><span class="p">:</span> <span class="s">"Patrick Star"</span><span class="p">,</span>
    <span class="s">"title"</span><span class="p">:</span> <span class="s">"Identification 12345678"</span><span class="p">,</span>
    <span class="s">"type"</span><span class="p">:</span> <span class="s">"video"</span><span class="p">,</span>
    <span class="s">"documentType"</span><span class="p">:</span> <span class="s">"pe-dni"</span><span class="p">,</span>
    <span class="s">"disableInitialNotification"</span><span class="p">,</span> <span class="s">"false"</span><span class="p">,</span>
    <span class="s">"validateDocument"</span><span class="p">:</span> <span class="s">"true"</span><span class="p">,</span>
<span class="p">})</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="s">"/identity-verification/v1"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/identity-verification/v1</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">postData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
    <span class="dl">"</span><span class="s2">documentNumber</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">12345678</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">userPhone</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">51123456789</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">userFullName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Patrick Star</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">title</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Identification 12345678</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">video</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">documentType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">pe-dni</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">disableInitialNotification</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span>
    <span class="dl">"</span><span class="s2">validateDocument</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">postData</span><span class="p">);</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si la plantilla fue creada satisfactoriamente, el API retorna un Json estructurado como aparece en la sección de <a href="#propiedades-de-una-verificacion-de-identidad">verificación de identidad</a>.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"userRealName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JOHN, DOE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:03:50.272Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirationInHours"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:08.500Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6afe9bb0-a6e3-11eb-9a2c-11fc3348624ae1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88b93325-82c4-40aa-9606-f49c757382ae"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_email@gmail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"countryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV...9TstTqlChryW4mZGyAgHE9Y"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:02.309Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account_email@keynua.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-19T20:55:48.186Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userFullName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Lima"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identification 123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signersemail"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invitación de inicio de firma"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usernotifier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"allowsManualUpdate"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowsRetry"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hideOnWebApp"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceptación de Términos"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"termsAndConditionsUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dev.keynua.com/legal/terms-and-conditions/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"privacypolicyUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dev.keynua.com/legal/privacy-policy/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"viewedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:03:13.928Z"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"allowsManualUpdate"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowsRetry"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hideOnWebApp"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-11'>HTTP Request</h3>
<p><code>PUT /identity-verification/v1</code></p>
<h3 id='headers-8'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>Authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h3 id='request-body'>Request body</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>No</td>
<td>Nombre que se le quiera dar a la verificación</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>No</td>
<td>Número de documento nacional de identificación de la persona</td>
</tr>
<tr>
<td>documentType</td>
<td>string</td>
<td>No</td>
<td>Tipo de documento nacional. Por ahora soportamos <code>ch-cedula</code>, <code>br-denatran</code>, <code>cl-cedula</code>, <code>co-cedula</code>, <code>mx-ife</code>, <code>pe-ce</code>, <code>pe-dni</code>, <code>pe-dni-ce</code>, <code>sv-dui</code>, <code>pa-id</code>, <code>br-id</code>,<code>ar-id</code>, <code>bo-id</code>, <code>cr-id</code>, <code>cu-id</code>, <code>ec-id</code>, <code>gt-id</code>, <code>hn-id</code>, <code>ni-id</code>, <code>pr-id</code>, <code>py-id</code>, <code>do-id</code>, <code>us-id</code>,<code>uy-id</code> y <code>ve-id</code>.</td>
</tr>
<tr>
<td>userFullName</td>
<td>string</td>
<td>Sí</td>
<td>Nombre completo de la persona</td>
</tr>
<tr>
<td>userEmail</td>
<td>string</td>
<td>Sí</td>
<td>Email de la persona. Si se envía, no enviar el campo <code>userPhone</code> también.</td>
</tr>
<tr>
<td>userPhone</td>
<td>string</td>
<td>Sí</td>
<td>Teléfono celular de la persona. Si se envía, no enviar el campo <code>userEmail</code> también.</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Sí</td>
<td>Campo útil para realizar búsquedas entre verificaciones creadas</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Sí</td>
<td><code>selfie</code>, <code>video</code>, <code>smile</code> o <code>liveness</code>. <code>selfie</code> solo pide un selfie y valida esa imagen con RENIEC. <code>video</code> además de lo anterior, solicita que se grabe un video diciendo un código de 6 dígitos, y realiza una prueba de vida utilizando el video. <code>smile</code> solicita que se grabe un video sonriendo, y realiza una prueba de vida utilizando el video (BETA). <code>liveness</code> realiza una prueba de vida 3D.</td>
</tr>
<tr>
<td>disableInitialNotification</td>
<td>boolean</td>
<td>Sí</td>
<td>Opción para desactivar la notificación inicial que se envía a la persona.</td>
</tr>
<tr>
<td>documentSide</td>
<td><code>front</code> o <code>both</code></td>
<td>Sí</td>
<td>SOLO PARA DNI DE PERÚ. Opción para indicar qué lados del DNI validar. Si no es enviado no se hará ninguna validación.</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Sí</td>
<td>Lenguaje con el cual se creará el proceso de identificación</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Sí</td>
<td>Nombre de cuenta que se usará al crear el proceso de identificación. De no ser enviado, se usará el nombre de la cuenta que está creando la identificación.</td>
</tr>
</tbody></table>
<h3 id='combinaciones-no-soportadas-por-defecto'>Combinaciones no soportadas por defecto</h3>
<p>Por ahora los paises que soportamos para <code>selfie</code> y <code>video</code> son <code>sv-dui</code>, <code>mx-ife</code>, <code>cl-cedula</code>, <code>pe-dni</code>, <code>br-denatran</code> y <code>co-cedula</code>. En caso se cree una identificación con <code>selfie</code> o <code>video</code> con algún país que no esté en esta lista, automáticamente se considerará el documento como <code>global</code>. La lista completa sí está soportada con el type <code>liveness</code>.</p>
<h3 id='response-body-3'>Response body</h3>
<p><a href="#propiedades-de-una-verificacion-de-identidad">IdentityVerification</a></p>
<h2 id='listar-verificaciones-de-identidad'>Listar verificaciones de identidad</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s1">'https://api.keynua.com/identity-verification/v1/list'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.dev.keynua.com/identity-verification/v1/list"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.keynua.com"</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/identity-verification/v1/list"</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/identity-verification/v1/list</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88b93325-82c4-40aa-9606-f49c757382ae"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@keynua.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:02.309Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identification 70671142"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_email@gmail.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"565b0132-ef7d-4a27-aa8c-f0f96a2d74b1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@keynua.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-24T00:10:50.237Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identification 123456789"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userPhone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51123456789"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhY2NvdW50SWQi...jIwMjEtMDQtMjRUMDA6MTA6NTAuMjM3WiJ9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite obtener una lista de verificaciones de identidad creadas.</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>GET /identity-verification/v1/list</code> obtiene las de tu cuenta</p>

<p><code>GET /identity-verification/v1/list-org</code> obtiene las de tu organización</p>
<h3 id='headers-9'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>Authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h3 id='search-params'>Search params</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>startKey</td>
<td>string</td>
<td>Sí</td>
<td>Sirve para obtener la siguiente porción de items en la lista. Recibe el valor de <code>next</code> que se obtiene en la respuesta.</td>
</tr>
<tr>
<td>startDate</td>
<td>string</td>
<td>Sí</td>
<td>Enviar necesariamente junto con <code>endDate</code> para listar las verificaciones dentro de un rango de fechas. Debe estar en formato ISO.</td>
</tr>
<tr>
<td>endDate</td>
<td>string</td>
<td>Sí</td>
<td>Enviar necesariamente junto con <code>startDate</code> para listar las verificaciones dentro de un rango de fechas. Debe estar en formato ISO.</td>
</tr>
<tr>
<td>limit</td>
<td>number</td>
<td>Sí</td>
<td>La cantidad máxima de items que el api debe devolver. Si no se envía, el api devuelve alrededor de 1 MB de datos.</td>
</tr>
<tr>
<td>expanded</td>
<td>boolean</td>
<td>Sí</td>
<td><code>true</code> si se quiere más detalle en cada item de la lista.</td>
</tr>
</tbody></table>
<h3 id='response-body-4'>Response body</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>items</td>
<td><a href="#response-body-verificationitem">VerificationItem</a>[]</td>
<td>Lista de verificaciones</td>
</tr>
<tr>
<td>next</td>
<td>string</td>
<td><code>Opcional</code> Envía este valor en <code>startKey</code> para obtener la siguiente porción de la lista. Si no se encuentra en la respuesta, entonces no quedan más items en la lista.</td>
</tr>
</tbody></table>
<h3 id='response-body-verificationitem'>Response body VerificationItem</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Requiere expanded</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>Identificador único de la verificación</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>No</td>
<td><code>pending</code>, <code>pending_input</code>, <code>pending_approval</code>, <code>working</code>, <code>error</code>, <code>done</code>, <code>deleted</code>, o <code>expired</code></td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>No</td>
<td>Email de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>No</td>
<td>Fecha y hora de creación en formato ISO</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>No</td>
<td>Número de documento</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>No</td>
<td>Título de la verificación</td>
</tr>
<tr>
<td>userEmail</td>
<td>string</td>
<td>No</td>
<td><code>Opcional</code> Email del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userPhone</td>
<td>string</td>
<td>No</td>
<td><code>Opcional</code> Teléfono celular del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Sí</td>
<td>Id de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Sí</td>
<td>Id de la organización en la que se creó la verificación</td>
</tr>
<tr>
<td>countryCode</td>
<td>string</td>
<td>Sí</td>
<td>Código del país en el que realiza la verificación</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Sí</td>
<td>Lenguaje con el cual se completará el proceso de identificación</td>
</tr>
<tr>
<td>expirationInHours</td>
<td>string</td>
<td>Sí</td>
<td>En cuantas horas luego de la creación la verificación expirará. <code>0</code> no expira.</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Sí</td>
<td>Fecha y hora en formato ISO del momento en que el verificante ingresa todos sus datos</td>
</tr>
<tr>
<td>userFullName</td>
<td>string</td>
<td>Sí</td>
<td>Nombre completo de la persona</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Sí</td>
<td>Nombre de la cuenta que creó la verificación</td>
</tr>
</tbody></table>
<h2 id='obtener-verificacion-de-identidad'>Obtener verificación de identidad</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s1">'https://api.keynua.com/identity-verification/v1/{verification_id}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.dev.keynua.com/identity-verification/v1/{verification_id}"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.keynua.com"</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/identity-verification/v1/{verification_id}"</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/identity-verification/v1/{verification_id}</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si la plantilla fue obtenida satisfactoriamente, el API retorna un Json estructurado como aparece en la sección de <a href="#propiedades-de-una-verificacion-de-identidad">verificación de identidad</a>.</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"userRealName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JOHN, DOE"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:03:50.272Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirationInHours"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:08.500Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6afe9bb0-a6e3-11eb-9a2c-11fc3348624ae1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88b93325-82c4-40aa-9606-f49c757382ae"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_email@gmail.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"countryCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV...9TstTqlChryW4mZGyAgHE9Y"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:02:02.309Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account_email@keynua.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-19T20:55:48.186Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userFullName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/Lima"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identification 123456789"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"userIdInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe-id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"idNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"verificationDigit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"names"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perez Alvarez"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-11-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-03-17"</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some address"</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signersemail"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Invitación de inicio de firma"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"usernotifier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"allowsManualUpdate"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowsRetry"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hideOnWebApp"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Aceptación de Términos"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"terms"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"termsAndConditionsUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dev.keynua.com/legal/terms-and-conditions/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"privacypolicyUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.dev.keynua.com/legal/privacy-policy/"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"viewedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-04-26T23:03:13.928Z"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"allowsManualUpdate"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"allowsRetry"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hideOnWebApp"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite obtener una verificación de identidad</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>GET /identity-verification/v1/{verification_id}</code></p>
<h3 id='headers-10'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>Authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h3 id='response-body-5'>Response body</h3>
<p><a href="#propiedades-de-una-verificacion-de-identidad">IdentityVerification</a></p>
<h1 id='plantillas-de-documento'>Plantillas de documento</h1>
<p>Permite listar, obtener y rellenar plantillas de documentos PDF.</p>

<aside class="notice">Estas plantillas son creadas únicamente desde el Web App. Si quieres usar esta funcionalidad ponte en contacto con el equipo de soporte de Keynua.</aside>
<h2 id='propiedades-de-una-plantilla-de-documento'>Propiedades de una plantilla de documento</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z8f8bc671-626d-4212-9c8c-c5d5f9464fa6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-248e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A document template"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"creator@keynua.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="err">DocumentTemplateField</span><span class="p">[],</span><span class="w">
  </span><span class="nl">"files"</span><span class="p">:</span><span class="w"> </span><span class="err">DocumentTemplateFile</span><span class="p">[],</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>templateId</td>
<td>string</td>
<td>No</td>
<td>El id de la plantilla de documento</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>No</td>
<td>El id del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>No</td>
<td>El nombre de la plantilla de documento</td>
</tr>
<tr>
<td>creatorEmail</td>
<td>string</td>
<td>No</td>
<td>El email del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>fields</td>
<td><a href="#propiedades-de-documenttemplatefield">DocumentTemplateField</a>[]</td>
<td>No</td>
<td>Contiene las reglas para cada campo de la plantilla de documento. Los valores de estos campos serán utilizados para generar los archivos finales.</td>
</tr>
<tr>
<td>files</td>
<td><a href="#propiedades-de-documenttemplatefile">DocumentTemplateFile</a>[]</td>
<td>No</td>
<td>Los archivos pdf que serán utilizados como base para generar los archivos que incluyan los valores de los campos</td>
</tr>
<tr>
<td>updatedAt</td>
<td>string</td>
<td>No</td>
<td>La fecha y hora de la última modificación en formato ISO</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>No</td>
<td>La fecha y hora de creación en formato ISO</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-documenttemplatefield'>Propiedades de DocumentTemplateField</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email-0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default value"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"regex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^</span><span class="se">\\</span><span class="s2">d?$"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A placeholder"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>El id del campo</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>No</td>
<td>El nombre del campo</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>No</td>
<td>El tipo del campo. <code>string</code>, <code>date</code> o <code>number</code>.</td>
</tr>
<tr>
<td>required</td>
<td>boolean</td>
<td>No</td>
<td>Si el campo es obligatorio</td>
</tr>
<tr>
<td>default</td>
<td>string</td>
<td>Sí</td>
<td>Un valor por defecto para el campo</td>
</tr>
<tr>
<td>minLength</td>
<td>number</td>
<td>Sí</td>
<td>La longitud mínima para campos de tipo <code>string</code></td>
</tr>
<tr>
<td>maxLength</td>
<td>number</td>
<td>Sí</td>
<td>La longitud máxima para campos de tipo <code>string</code></td>
</tr>
<tr>
<td>regex</td>
<td>string</td>
<td>Sí</td>
<td>Regex para validar campos de tipo <code>string</code></td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>Sí</td>
<td>Texto adicional</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-documenttemplatefile'>Propiedades de DocumentTemplateFile</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/48101c38-f770-4ea8-88ab-25"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b5d1b359-3736-424b-b83d-f0d0da910a89"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"isotype_stamp.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3708</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>No</td>
<td>Url que contiene el documento original</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>Id del archivo</td>
</tr>
<tr>
<td>name</td>
<td>boolean</td>
<td>No</td>
<td>Nombre del archivo</td>
</tr>
<tr>
<td>size</td>
<td>number</td>
<td>No</td>
<td>Tamaño del archivo</td>
</tr>
</tbody></table>
<h2 id='listar-plantillas-de-documento'>Listar plantillas de documento</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contract-manager-document-templates/api"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/contract-manager-document-templates/api"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s1">'https://api.stg.keynua.com/contract-manager-document-templates/api'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">method</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">hostname</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.stg.keynua.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/contract-manager-document-templates/api</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">x-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-KEY-HERE</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-TOKEN-HERE</span><span class="dl">'</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Success response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"templates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z8f8bc671-626d-4212-9c8c-c5d5f9464fa6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f570-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test 1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"creator@keynua.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fileCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fieldCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-11T21:18:18.463Z962ce87f-d3b7-4cbb-afa0-04e85e2791b2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4e28-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test 2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"creator@keynua.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fileCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fieldCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-11T21:18:18.463Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-11T21:18:18.463Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJwayI6IjQ4MTAxYzM4LWY3NzAtNGVhOC04OGFiLTI1OGU2NzJkODhiZDp0ZW1wbGF0ZSIsInJrIjoiMjAyMS0wMi0wMlQyMToxMzozNy42NDhaNGE3YWZiZDEtMTQ0Yi00YmRmLWI1NTUtOWFlZTQ2MDMxZGE1In0="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite obtener una lista de las plantillas de documento que pertenecen al usuario o a su organización.</p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>GET /contract-manager-document-templates/api</code></p>
<h3 id='headers-11'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h3 id='search-params-2'>Search params</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>number</td>
<td>Sí</td>
<td>La cantidad máxima de items que el api debe devolver. Si no se envía, el api devuelve todos.</td>
</tr>
<tr>
<td>start</td>
<td>string</td>
<td>Sí</td>
<td>Sirve para obtener la siguiente porción de items en la lista. Recibe el valor de <code>next</code> que se obtiene en la respuesta.</td>
</tr>
<tr>
<td>organizational</td>
<td>boolean</td>
<td>Sí</td>
<td><code>true</code> si se quiere las plantillas de documento de la organización</td>
</tr>
</tbody></table>
<h3 id='response-body-6'>Response body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>templates</td>
<td><a href="#response-body-templateitem">TemplateItem</a></td>
<td>Lista de plantillas de documento</td>
</tr>
<tr>
<td>next</td>
<td>string</td>
<td><code>opcional</code> Envía este valor en <code>start</code> para obtener la siguiente porción de la lista. Si no se encuentra en la respuesta, entonces no quedan más items en la lista.</td>
</tr>
</tbody></table>
<h3 id='response-body-templateitem'>Response body TemplateItem</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>templateId</td>
<td>string</td>
<td>El id de la plantilla de documento</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>El id del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre de la plantilla de documento</td>
</tr>
<tr>
<td>creatorEmail</td>
<td>string</td>
<td>El email del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>fileCount</td>
<td>number</td>
<td>Cantidad de archivos en la plantilla</td>
</tr>
<tr>
<td>fieldCount</td>
<td>number</td>
<td>Cantidad de campos en la plantilla</td>
</tr>
<tr>
<td>updatedAt</td>
<td>string</td>
<td>La fecha y hora de la última modificación en formato ISO</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>La fecha y hora de creación en formato ISO</td>
</tr>
</tbody></table>
<h2 id='obtener-plantilla-de-documento'>Obtener plantilla de documento</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contract-manager-document-templates/api/{templateId}"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/contract-manager-document-templates/api/{templateId}"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s1">'https://api.stg.keynua.com/contract-manager-document-templates/api/{templateId}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">method</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">hostname</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.dev.keynua.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/contract-manager-document-templates/api/{templateId}</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">x-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-KEY-HERE</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-TOKEN-HERE</span><span class="dl">'</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si la plantilla fue obtenida satisfactoramente, el API retorna un Json estructurado como aparece en la sección de <a href="#propiedades-de-una-plantilla-de-documento">Plantilla de documento</a></p>
</blockquote>

<p>Permite obtener una plantilla de documento.</p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>GET /contract-manager-document-templates/api/{templateId}</code></p>
<h3 id='headers-12'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h2 id='generar-documentos-rellenados'>Generar documentos rellenados</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contract-manager-document-templates/api/create-filled-files/{templateId}"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"application/json"</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">fieldValues</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">email-0</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">value</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">user@mail.com</span><span class="se">\"\n</span><span class="s2">    },</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">date-0</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">value</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2020-10-09</span><span class="se">\"\n</span><span class="s2">    }</span><span class="se">\n</span><span class="s2">  ]</span><span class="se">\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
  <span class="s">"fieldValues"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s">"name"</span><span class="p">:</span> <span class="s">"email-0"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"user@mail.com"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s">"name"</span><span class="p">:</span> <span class="s">"date-0"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"2020-10-09"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/contract-manager-document-templates/api/create-filled-files/{templateId}"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://api.stg.keynua.com/contract-manager-document-templates/api/create-filled-files/{templateId} \
  --header '</span>x-api-key: YOUR-API-KEY-HERE<span class="s1">' \
  --header '</span>authorization: YOUR-API-TOKEN-HERE<span class="s1">'
  --header '</span>Content-Type: application/json<span class="s1">' \
  --data-raw '</span><span class="o">{</span>
    <span class="s2">"fieldValues"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"name"</span>: <span class="s2">"email-0"</span>,
        <span class="s2">"value"</span>: <span class="s2">"user@mail.com"</span>
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"name"</span>: <span class="s2">"date-0"</span>,
        <span class="s2">"value"</span>: <span class="s2">"2020-10-09"</span>
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span><span class="s1">'
</span></code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.stg.keynua.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/contract-manager-document-templates/api/create-filled-files/{templateId</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">postData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">fieldValues</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">email-0</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user@mail.com</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">date-0</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2020-10-09</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">postData</span><span class="p">);</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Success response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b5d1b359-3736-424b-b83d-f0d0da910a89"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"storageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJidWNrZXQiOiJjb250cmFjdC1tYW5hZ2VyLWRvY3Vt"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/id-del-documento"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">8568</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sha256"</span><span class="p">:</span><span class="w"> </span><span class="s2">"edd34e53e6b709fc4344f6799a8c228320e879fd7f92c95ed6ad8d7c4e0cd812"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"428c25aa-6d9e-405e-9c19-9fafc9f1a3ec"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"storageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJidWNrZXQiOiJjb250cmFjdC1tYW5hZ2VyLWRvY3Vt"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/id-del-documento"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">56628</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sha256"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b4b488d71896341ff6520881e56da7e5cfe41a603de5f16eef68114c2c9acda3"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>En base a cada documento de una plantilla, este API genera otros documentos pdf que incluyen el valor de cada campo enviado.</p>
<h3 id='http-request-16'>HTTP Request</h3>
<p><code>POST /contract-manager-document-templates/api/create-filled-files/{templateId}</code></p>
<h3 id='headers-13'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-9'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>fieldValues</td>
<td><a href="#propiedades-de-fieldvalues">FieldValues</a>[]</td>
<td>No</td>
<td>Lista de items que contienen el id y valor de cada campo</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-fieldvalues'>Propiedades de FieldValues</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Id que indica a qué <a href="#propiedades-de-documenttemplatefield">DocumentTemplateField</a> de la plantilla corresponde <code>value</code></td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>Valor del campo que es validado con las reglas de <a href="#propiedades-de-documenttemplatefield">DocumentTemplateField</a></td>
</tr>
</tbody></table>
<h3 id='response-body-item'>Response body item</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Id del archivo dentro de la plantilla</td>
</tr>
<tr>
<td>storageId</td>
<td>string</td>
<td>Id de almacenamiento. Se puede utilizar para <a href="#crear-un-contrato">crear contratos</a>.</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>Url para descargar el documento generado</td>
</tr>
<tr>
<td>size</td>
<td>number</td>
<td>Tamaño en bytes del documento generado</td>
</tr>
<tr>
<td>sha256</td>
<td>string</td>
<td>Hash sha256 del documento generado</td>
</tr>
</tbody></table>
<h1 id='webhooks'>Webhooks</h1>
<p>Los Webhooks permiten suscribirte a ciertos eventos de un Contrato o de una Verificación de identidad. Por ejemplo cuando un contrato es creado, cuando ocurre un error en el proceso de firma o el contrato ha sido firmado satisfactoriamente. Cuando ocurre uno de estos eventos, enviaremos un request <strong>HTTP POST</strong> a la API configurada en el webhook.</p>
<h2 id='configuracion-del-webhook'>Configuración del Webhook</h2>
<aside class="warning">Para poder configurar tu Webhook debes contactar al equipo de Keynua</aside>

<p>Una vez ya tengas una cuenta en el ambiente de pruebas de Keynua, puedes acceder a la sección <a href="https://app.stg.keynua.com/developers">Developers</a> y configurar tu Webhook.</p>

<p>Si tu API necesita unos headers específicos, puedes agregarlo en la configuración del Webhook y nosotros lo enviaremos en cada request. También puedes desactivar las notificaciones de eventos para las verificaciones de identidad luego de crear el webhook.</p>

<p>Los eventos son disparados por las mismas circunstancias para contratos y para verificación de identidad. Entre los eventos que puedes escoger están:</p>

<table><thead>
<tr>
<th>Evento</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>Created</td>
<td>Serás notificado cuando un contrato o verificación de identidad fue creado satisfactoriamente</td>
</tr>
<tr>
<td>Started</td>
<td>Serás notificado cuando un contrato o verificación de identidad fue creado satisfactoriamente y está listo para ser firmado o completado. <strong>Recomendamos usar este evento en lugar del evento Created ya que este evento te notificará cuando el contrato está listo para comenzar el proceso de firma</strong></td>
</tr>
<tr>
<td>Finished</td>
<td>Serás notificado cuando el contrato o verificación de identidad ha sido completado por todos y finalizó correctamente</td>
</tr>
<tr>
<td>Deleted</td>
<td>Serás notificado cuando el contrato ha sido eliminado</td>
</tr>
<tr>
<td>ItemWorking</td>
<td>Serás notificado cada vez que se comienza a procesar un <a href="#propiedades-de-un-item">Item</a></td>
</tr>
<tr>
<td>ItemSuccess</td>
<td>Serás notificado cada vez que un <a href="#propiedades-de-un-item">Item</a> ha concluído satisactoriamente</td>
</tr>
<tr>
<td>ItemError</td>
<td>Serás notificado cada vez que ocurre un error en un <a href="#propiedades-de-un-item">Item</a></td>
</tr>
<tr>
<td>OTPCreated</td>
<td>Serás notificado cada vez que se envíe un <a href="#otp">OTP</a> de tipo <code>webhook</code> al usuario</td>
</tr>
</tbody></table>

<p>Una vez configurado el Webhook, te llegará un email de confirmación al correo que ingresaste. Luego, debes seleccionar la opción <strong>Habilitar</strong> para poder activar el Webhook. Keynua enviará un HTTP POST al API configurado y será activado si cumple estos requisitos:</p>

<ul>
<li>El API debe ser de acceso público</li>
<li>El API debe ser HTTPS</li>
<li>El API debe retornar status code 200 y el body del response debe ser <code>KEYNUA</code></li>
</ul>

<p>Una vez tengas habilitado tu Webhook, puedes comenzar a escuchar las notificaciones de tus contratos siguiendo la siguiente <a href="#especificación-del-webhook">Especificación del Webhook</a>.</p>

<aside class="notice">Si ya estás listo para integrar en producción, por favor contacta al equipo de <code>Keynua</code></aside>
<h2 id='especificacion-del-webhook'>Especificación del Webhook</h2>
<p>El request tendrá la siguiente estructura</p>
<h3 id='headers-14'>Headers</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractFinished"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-TS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1604957455847"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-Token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12fafbc..."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-Sig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec7584cb..."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-SigV2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f2a13aa..."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
<tr>
<td>x-keynua-webhook-sig</td>
<td>Firma del request para el control de la manipulación de la petición. Para más información revisa la sección de <a href="#verificar-keynua-signature-webhook">Verificar Keynua Signature Webhook</a></td>
</tr>
<tr>
<td>x-keynua-webhook-sigV2</td>
<td>Firma del request V2 para el control de la manipulación de la petición. Para más información revisa la sección de <a href="#verificar-keynua-signature-webhook-v2">Verificar Keynua Signature Webhook V2</a></td>
</tr>
<tr>
<td>x-keynua-webhook-ts</td>
<td>Numero de milisegundos desde UNIX Epoch (01/01/1970) cuando se envió el evento</td>
</tr>
<tr>
<td>x-keynua-webhook-type</td>
<td>Nombre del evento emitido</td>
</tr>
<tr>
<td>x-keynua-webhook-token</td>
<td>Token unico generado por request con una integridad de 24 horas</td>
</tr>
</tbody></table>
<h3 id='body-10'>Body</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractFinished"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d6c5ce27-fa63-4fb8-8f0f-83278c6b7985"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>Nombre del <a href="#tipos-de-eventos-webhook">tipo de evento</a> emitido. Puede ser <code>ContractCreated</code>, <code>ContractStarted</code>, <code>ContractItemUpdated</code>, <code>ContractFinished</code>, <code>ContractDeleted</code>, <code>IdentityVerificationCreated</code>, <code>IdentityVerificationStarted</code>, <code>IdentityVerificationFinished</code>, <code>IdentityVerificationItemUpdated</code>, o <code>OTPCreated</code></td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Codigo de la cuenta propietaria del webhook</td>
</tr>
<tr>
<td>payload</td>
<td>object</td>
<td>Datos del evento que varian segun el valor de <a href="#tipos-de-eventos-webhook">type</a></td>
</tr>
</tbody></table>
<h2 id='tipos-de-eventos-webhook'>Tipos de Eventos Webhook</h2>
<p>Keynua enviará un request a tu API configurado por cada Evento registrado. En esta tabla podrás ver la relación que existe entre cada evento registrado y los tipos de eventos disponibles</p>

<table><thead>
<tr>
<th>Evento del Webhook</th>
<th>Tipo de Evento</th>
</tr>
</thead><tbody>
<tr>
<td>Created</td>
<td><a href="#propiedades-de-contractcreated">ContractCreated</a> o <a href="#propiedades-de-identityverificationcreated">IdentityVerificationCreated</a></td>
</tr>
<tr>
<td>Started</td>
<td><a href="#propiedades-de-contractstarted">ContractStarted</a> o <a href="#propiedades-de-identityverificationstarted">IdentityVerificationStarted</a></td>
</tr>
<tr>
<td>Finished</td>
<td><a href="#propiedades-de-contractfinished">ContractFinished</a> o <a href="#propiedades-de-identityverificationfinished">IdentityVerificationFinished</a></td>
</tr>
<tr>
<td>Deleted</td>
<td><a href="#propiedades-de-contractdeleted">ContractDeleted</a></td>
</tr>
<tr>
<td>ItemWorking</td>
<td><a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a> o <a href="#propiedades-de-identityverificationitemupdated">IdentityVerificationItemUpdated</a>. Item.state <code>working</code></td>
</tr>
<tr>
<td>ItemSuccess</td>
<td><a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a> o <a href="#propiedades-de-identityverificationitemupdated">IdentityVerificationItemUpdated</a>. Item.state <code>success</code></td>
</tr>
<tr>
<td>ItemError</td>
<td><a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a> o <a href="#propiedades-de-identityverificationitemupdated">IdentityVerificationItemUpdated</a>. Item.state <code>error</code></td>
</tr>
<tr>
<td>OTPCreated</td>
<td><a href="#propiedades-de-otpcreated">OTPCreated</a></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractcreated'>Propiedades de ContractCreated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractCreated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mi primer webhook"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ejemplo de mi primer webhook"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato ha sido creado.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Codigo del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripcion del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idima del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creacion del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metada del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractstarted'>Propiedades de ContractStarted</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractStarted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mi primer webhook"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T01:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"longCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"signers"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3028</span><span class="p">,</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato está listo para ser firmado.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Código del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idioma del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creación del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metadata del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>longCode</td>
<td>string</td>
<td>Código largo del contrato</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-usuario-webhook">Usuarios</a> del Contrato</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-documento-webhook">Documentos</a> del contrato</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractfinished'>Propiedades de ContractFinished</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractFinished"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing WH CC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T01:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T02:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"longCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"signers"</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="nl">"idInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe-id"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"idNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"verificationDigit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"names"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perez Alvarez"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-11-20"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-03-17"</span><span class="w">
                    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some address"</span><span class="p">,</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3028</span><span class="p">,</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
    </span><span class="nl">"pdfItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Certificado y documentos"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cmfiles.dev.keynua.com/contracts/48ae1990..."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"individuals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pdf.24.1.test_contract_1.pdf"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cmfiles.dev.keynua.com/contracts/48ae1990..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pdf.24.1.test_contract_2.pdf"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cmfiles.dev.keynua.com/contracts/48ae1990..."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"userIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reniec"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dniExpired"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"dni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato ha sido firmado por todos y ha finalizado correctamente.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Código del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idioma del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creación del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>finishedAt</td>
<td>string</td>
<td>Fecha de finalización del proceso de firma del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metadata del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>longCode</td>
<td>string</td>
<td>Código largo del contrato</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-usuario-webhook">Usuarios</a> del Contrato</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-documento-webhook">Documentos</a> del contrato. Acá encontrarás los <strong>documentos originales del contrato</strong>, NO el documento final de firma. Si lo que quieres es el documento final de firma, podrás obtenerlo desde el <a href="#propiedades-de-un-item">Item</a> <strong>PDF</strong> en <a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a></td>
</tr>
<tr>
<td>pdfItems</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-pdf-item">PDF Items</a>. Este incluirá información sobre los documentos finales del contrato y te permitirá descargarlos. <strong>Para identificaciones este atributo no existe.</strong></td>
</tr>
<tr>
<td>alerts</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-una-alerta">Alertas</a> del contrato</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-pdf-item'>Propiedades de un PDF item</h3>
<p>Contiene datos que permiten obtener los documentos finales del contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Título del item</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>URL que permite descargar el documento. <strong>Expira en 12 horas</strong></td>
</tr>
<tr>
<td>individuals</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-documento-individual">documentos individuales</a> cada uno con las firmas de las personas correspondientes. Solo es incluído en contratos configurados para producir documentos individuales.</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-documento-individual'>Propiedades de un documento individual</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Nombre del documento</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>URL que permite descargar el documento. <strong>Expira en 12 horas</strong></td>
</tr>
<tr>
<td>userIds</td>
<td>array</td>
<td>Arreglo de números. Son los ids de los usuarios que firmaron el documento individual. Si el contrato no ha sido configurado para tener firmantes por documento, entonces este atributo no será incluido y se puede asumir que todos los firmantes han firmado este documento.</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractdeleted'>Propiedades de ContractDeleted</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractDeleted"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3c6ed45d-93e7-49b1-a6e4-99e274dffe15"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ref"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0a957760-910e-11ec-a9d7-d9cff2a71c0ee1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3c6ed45d-93e7-49b1-a6e4-99e274dffe15"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-18T22:56:43.478Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-18T22:56:46.506Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john.doe@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-41a8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rent contract"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rent-template"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"customAttr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customData"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"deletedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-02-24T00:00:18.622Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato ha sido eliminado.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>string</td>
<td>Idima del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>Código del contrato</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Código de la cuenta propietaria del webhook</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creacion del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>Email de la cuenta creadora del contrato</td>
</tr>
<tr>
<td>organizationId</td>
<td>string o undefined</td>
<td>Código de la organización de la cuenta creadora del contrato</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Nombre de la persona creadora del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metada del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>deletedAt</td>
<td>string</td>
<td>Fecha de eliminación del contrato</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractitemupdated'>Propiedades de ContractItemUpdated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractItemUpdated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing WH CC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T01:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"longCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"item"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"refId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signersemail"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"working"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mail de inicio de firma"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"signers"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando un elemento del contrato ha cambiado de estado. Los estados pueden ser <code>working</code>, <code>success</code>, <code>error</code></p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Código del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idioma del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creación del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metadata del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>longCode</td>
<td>string</td>
<td>Código largo del contrato</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>item</td>
<td>object</td>
<td><a href="#propiedades-de-un-item">Item</a> del contrato que ha cambiado de estado</td>
</tr>
<tr>
<td>user</td>
<td>object</td>
<td><a href="#propiedades-de-un-usuario-webhook">Usuario</a> al que pertenece el elemento modificado. Si el valor es null el elemento le pertenece a todos los usuarios</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-identityverificationcreated'>Propiedades de IdentityVerificationCreated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityVerificationCreated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identificación de 12345678"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando una verificación de identidad ha sido creada.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje con el cual se completará el proceso de identificación</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Campo libre. Útil para realizar búsquedas.</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>Id interno</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>Número de documento nacional de identificación</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único de la verificación</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Id de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha y hora de creación en formato ISO</td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>Email de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Id de la organización en la que se creó la verificación</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Nombre de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título de la verificación</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-identityverificationstarted'>Propiedades de IdentityVerificationStarted</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityVerificationStarted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identificación de 12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userPhone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456789"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...ZlOWJiMC1hNmUzLTExZWItOWEyYy0xMWZjMzM0ODY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando una verificación de identidad está lista para ser completada.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje con el cual se completará el proceso de identificación</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Campo libre. Útil para realizar búsquedas.</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>Id interno</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>Número de documento nacional de identificación</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único de la verificación</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Id de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha y hora de creación en formato ISO</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha y hora en formato ISO del momento en que la verificación está lista para ser completada.</td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>Email de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Id de la organización en la que se creó la verificación</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Nombre de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título de la verificación</td>
</tr>
<tr>
<td>userEmail</td>
<td>string</td>
<td>Email del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userPhone</td>
<td>string</td>
<td>Teléfono celular del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userToken</td>
<td>string</td>
<td>Token con el cual se puede armar el link donde se realizará la verificación. Por ejemplo: https://sign.keynua.com/index.html?token={token}</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-identityverificationfinished'>Propiedades de IdentityVerificationFinished</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityVerificationFinished"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identificación de 12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userPhone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456789"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...ZlOWJiMC1hNmUzLTExZWItOWEyYy0xMWZjMzM0ODY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userIdInfo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pe-id"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"idNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"verificationDigit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"names"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Juan"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perez Alvarez"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"birthDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1992-11-20"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"expirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2026-03-17"</span><span class="w">
            </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Some address"</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"alerts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reniec"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dniExpired"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"dni"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando una verificación de identidad ha sido completada por la persona y ha finalizado correctamente.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje con el cual se completará el proceso de identificación</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Campo libre. Útil para realizar búsquedas.</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>Id interno</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>Número de documento nacional de identificación</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único de la verificación</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Id de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha y hora de creación en formato ISO</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha y hora en formato ISO del momento en que la verificación está lista para ser completada.</td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>Email de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Id de la organización en la que se creó la verificación</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Nombre de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título de la verificación</td>
</tr>
<tr>
<td>userEmail</td>
<td>string</td>
<td>Email del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userPhone</td>
<td>string</td>
<td>Teléfono celular del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userToken</td>
<td>string</td>
<td>Token con el cual se puede armar el link donde se realizará la verificación. Por ejemplo: https://sign.keynua.com/index.html?token={token}</td>
</tr>
<tr>
<td>userIdInfo</td>
<td>string</td>
<td>Información obtenida del OCR del documento enviado por el firmante. De momento, esta información se devolverá solamente para Identificaciones Peruanas. La información de la dirección (address) se devolverá solamente si el usuario también envía la parte trasera del DNI</td>
</tr>
<tr>
<td>alerts</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-una-alerta">Alertas</a> de la identificación.</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-identityverificationitemupdated'>Propiedades de IdentityVerificationItemUpdated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IdentityVerificationItemUpdated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"documentNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"accountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Star"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Identificación de 12345678"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@mail.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userPhone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456789"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...ZlOWJiMC1hNmUzLTExZWItOWEyYy0xMWZjMzM0ODY"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"item"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signersemail"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"working"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mail de inicio de firma"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando un item de una verificación de identidad cambia de estado. Los estados pueden ser <code>working</code>, <code>success</code>, <code>error</code>.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje con el cual se completará el proceso de identificación</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Campo libre. Útil para realizar búsquedas.</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>Id interno</td>
</tr>
<tr>
<td>documentNumber</td>
<td>string</td>
<td>Número de documento nacional de identificación</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único de la verificación</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Id de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha y hora de creación en formato ISO</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha y hora en formato ISO del momento en que la verificación está lista para ser completada.</td>
</tr>
<tr>
<td>accountEmail</td>
<td>string</td>
<td>Email de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Id de la organización en la que se creó la verificación</td>
</tr>
<tr>
<td>accountName</td>
<td>string</td>
<td>Nombre de la cuenta que creó la verificación</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título de la verificación</td>
</tr>
<tr>
<td>userEmail</td>
<td>string</td>
<td>Email del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userPhone</td>
<td>string</td>
<td>Teléfono celular del verificante en el cual recibirá el link de inicio del proceso</td>
</tr>
<tr>
<td>userToken</td>
<td>string</td>
<td>Token con el cual se puede armar el link donde se realizará la verificación. Por ejemplo: https://sign.keynua.com/index.html?token={token}</td>
</tr>
<tr>
<td>item</td>
<td>object</td>
<td><a href="#propiedades-de-un-item">Item</a> del contrato que ha cambiado de estado</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-otpcreated'>Propiedades de OTPCreated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OTPCreated"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"refId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"organizationId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Referencia"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Manuel Silva"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55sm9z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"resendInSec"</span><span class="p">:</span><span class="w"> </span><span class="mi">480</span><span class="p">,</span><span class="w">
    </span><span class="nl">"availableAttempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando se envía un <a href="#otp">OTP</a> de tipo webhook al usuario.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>refId</td>
<td>string</td>
<td>Identificador único del contrato</td>
</tr>
<tr>
<td>userId</td>
<td>string</td>
<td>Identificador único del usuario en el contrato</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Identificador único de la cuenta con la que se creó el contrato</td>
</tr>
<tr>
<td>organizationId</td>
<td>string</td>
<td>Identificador único de la organización con la que se creó el contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>userName</td>
<td>string</td>
<td>El nombre del usuario</td>
</tr>
<tr>
<td>code</td>
<td>string</td>
<td>Código OTP generado</td>
</tr>
<tr>
<td>resendInSec</td>
<td>integer</td>
<td>En cuantos segundos se podrá solicitar el envío de un nuevo código</td>
</tr>
<tr>
<td>availableAttempts</td>
<td>integer</td>
<td>Cuantos intentos aún quedan disponibles</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje del contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td>Metadata del contrato</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-usuario-webhook'>Propiedades de un Usuario Webhook</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"signers"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único del usuario en el contrato</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del usuario</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>El correo electrónico del usuario</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>El teléfono del usuario</td>
</tr>
<tr>
<td>groups</td>
<td>array</td>
<td>Nombre de los grupos a los que pertenece el usuario</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-documento-webhook'>Propiedades de un Documento Webhook</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3028</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del documento</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Tipo del documento en formato MIME</td>
</tr>
<tr>
<td>size</td>
<td>integer</td>
<td>Peso del documento en bytes</td>
</tr>
<tr>
<td>url</td>
<td>integer</td>
<td>Link del documento. <strong>Expira en 12 horas</strong></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-una-alerta'>Propiedades de una Alerta</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>Tipo de alerta. <strong>reniec</strong></td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>Información de la alerta</td>
</tr>
</tbody></table>

<p>La información de la alerta tiene las siguientes propiedades:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>string</td>
<td>Codigo de la alerta. <strong>dniExpired</strong></td>
</tr>
<tr>
<td>userId</td>
<td>integer</td>
<td>ID del usuario, para las identificaciones siempre es 0 ya que el flujo solo tiene un participante.</td>
</tr>
<tr>
<td>dni</td>
<td>string</td>
<td>Número del documento expirado</td>
</tr>
</tbody></table>
<h2 id='verificar-keynua-signature-webhook'>Verificar Keynua Signature Webhook</h2><div class="highlight"><pre class="highlight plaintext"><code>SHA_256(requestPayloadAsString + ts + webHookSecret)
</code></pre></div>
<p>Si quieres verificar la integridad del payload y asegurarte de que Keynua es quién está golpeando tu API Webhook, debes verificar el Signature que envía Keynua en el header <code>X-Keynua-Webhook-Sig</code></p>

<p>Para verificar este valor necesitas:</p>

<ul>
<li>El object payload del body <code>body.payload</code> como string</li>
<li>El valor del header <code>X-Keynua-Webhook-TS</code></li>
<li>El valor del <code>secret</code> que obtuviste al crear el webhook</li>
</ul>

<p>Luego de ello debes concatenar todos estos valores y aplicarle SHA256, el resultado debe ser el mismo que el valor del header <code>X-Keynua-Webhook-Sig</code></p>

<aside class="notice">Si el resultado de tu hash coincide con el que te enviamos, puedes tener la seguridad de que es Keynua quién envió la información a tu API y que la información no ha sido alterada en tránsito.</aside>
<h2 id='verificar-keynua-signature-webhook-v2'>Verificar Keynua Signature Webhook V2</h2><div class="highlight"><pre class="highlight plaintext"><code>SHA_256(webhookToken + ts + webHookSecret)
</code></pre></div>
<p>Si quieres verificar que Keynua es quien está golpeando tu API Webhook, debes verificar el SignatureV2 que envía Keynua en el header <code>X-Keynua-Webhook-SigV2</code></p>

<p>Para verificar este valor necesitas:</p>

<ul>
<li>El valor del header <code>X-Keynua-Webhook-Token</code></li>
<li>El valor del header <code>X-Keynua-Webhook-TS</code></li>
<li>El valor del <code>secret</code> que obtuviste al crear el webhook</li>
</ul>

<p>Luego de ello debes concatenar todos estos valores y aplicarle SHA256, el resultado debe ser el mismo que el valor del header <code>X-Keynua-Webhook-SigV2</code></p>

<aside class="notice">Si el resultado de tu hash coincide con el que te enviamos, puedes tener la seguridad de que es Keynua quién envió la información a tu API.</aside>
<h1 id='otp'>OTP</h1>
<p>Conjunto de APIs que permiten enviar, verificar y revisar códigos de un solo
uso para realizar la firma de documentos.</p>
<h2 id='metodos-de-envio'>Métodos de envío</h2>
<p>Existen diferentes canales de comunicación por OTP y los firmantes. El canal
es definido en el template y tiene los siguientes valores:</p>

<table><thead>
<tr>
<th>Canal</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>sms</td>
<td>Se envía el código al número del firmante a través de un sms.</td>
</tr>
<tr>
<td>email</td>
<td>Se envía el código al correo del firmante.</td>
</tr>
<tr>
<td>webhook</td>
<td>Se envía el código al webhook definido por la cuenta que creo el contrato a través del evento <code>OTPCreated</code></td>
</tr>
</tbody></table>
<h2 id='propiedades-de-auth'>Propiedades de Auth</h2><h3 id='contractauth'>ContractAuth</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td><code>contract</code></td>
<td>No</td>
<td>Tipo de autenticación.</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>No</td>
<td>El token del usuario dado al crear el contrato.</td>
</tr>
</tbody></table>
<h3 id='ownerauth'>OwnerAuth</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td><code>owner</code></td>
<td>No</td>
<td>Tipo de autenticación.</td>
</tr>
<tr>
<td>contractId</td>
<td>string</td>
<td>No</td>
<td>Identificador único del contrato</td>
</tr>
<tr>
<td>userId</td>
<td>string</td>
<td>No</td>
<td>Identificador único del usuario en el contrato</td>
</tr>
</tbody></table>
<h3 id='genericauth'>GenericAuth</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td><code>generic</code></td>
<td>No</td>
<td>Tipo de autenticación.</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>Identificador genérico.</td>
</tr>
</tbody></table>
<h2 id='enviar-otp'>Enviar OTP</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/send-otp/v1"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n\t\"</span><span class="s2">auth</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\n\t\t\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">contract</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\t\"</span><span class="s2">token</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">eyJ0eXAiOiJ...Dq_5VSiZo</span><span class="se">\"\n\t</span><span class="s2">}</span><span class="se">\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="p">{</span>
        <span class="s">"auth"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"type"</span><span class="p">:</span> <span class="s">"contract"</span><span class="p">,</span>
            <span class="s">"token"</span><span class="p">:</span> <span class="s">"eyJ0eXAiOiJ...Dq_5VSiZo"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="s">"/send-otp/v1"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/send-otp/v1 <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "auth": {
        "type": "contract",
        "token": "eyJ0eXAiOiJKV1Q...Dq_5VSiZo"
    }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">auth</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">contract</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">token</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eyJ0eXA..._2iDq_5VSiZo</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">DONE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://api.stg.keynua.com/send-otp/v1</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Success response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"resendInSec"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nl">"availableAttempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite enviar un código OTP al usuario dueño del token.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PUT https://api.stg.keynua.com/send-otp/v1</code></p>
<h3 id='request-body'>Request body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>auth</td>
<td><a href="#contractauth">ContractAuth</a></td>
<td>No</td>
<td>Permite identificar el OTP del usuario y contrato</td>
</tr>
</tbody></table>
<h3 id='response-body'>Response body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>sent</td>
<td>boolean</td>
<td>Si el código OTP se envió o no.</td>
</tr>
<tr>
<td>channel</td>
<td>string</td>
<td>Por qué medio se realizó el envío del código.</td>
</tr>
<tr>
<td>resendInSec</td>
<td>number</td>
<td>En cuantos segundos se podrá solicitar el envío de un nuevo código.</td>
</tr>
<tr>
<td>availableAttempts</td>
<td>number</td>
<td>Cuantos intentos aún quedan disponibles.</td>
</tr>
</tbody></table>
<h2 id='crear-codigo-otp-como-owner'>Crear código OTP como Owner</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/send-otp/v1/create-code-as-owner"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n\t\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">owner</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\"</span><span class="s2">contractId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">00000000-0000-0000-0000-000000000001</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\"</span><span class="s2">userId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">0</span><span class="se">\"\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="p">{</span>
        <span class="s">"auth"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"type"</span><span class="p">:</span> <span class="s">"owner"</span><span class="p">,</span>
            <span class="s">"contractId"</span><span class="p">:</span> <span class="s">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span>
            <span class="s">"userId"</span><span class="p">:</span> <span class="s">"0"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/send-otp/v1/create-code-as-owner"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/send-otp/v1/create-code-as-owner <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
  "auth": {
      "type": "owner",
      "contractId": "00000000-0000-0000-0000-000000000001",
      "userId": "0"
  }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">auth</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">owner</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">contractId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">00000000-0000-0000-0000-000000000001</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">userId</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">DONE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://api.stg.keynua.com/send-otp/v1/create-code-as-owner</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Success response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qwe123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"resendInSec"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
  </span><span class="nl">"availableAttempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite crear y obtener un nuevo código OTP (Sin enviarle el código al usuario).
De manera similar al <em>endpoint</em> anterior y según la configuración del contrato,
se limita la cantidad de códigos generados en un lapso de tiempo.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://api.stg.keynua.com/send-otp/v1/create-code-as-owner</code></p>
<h3 id='headers'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='request-body-2'>Request body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>auth</td>
<td><a href="#ownerauth">OwnerAuth</a> o <a href="#contractauth">ContractAuth</a></td>
<td>No</td>
<td>Permite identificar el OTP del usuario y contrato</td>
</tr>
</tbody></table>
<h3 id='response-body-2'>Response body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>string</td>
<td>El código OTP</td>
</tr>
<tr>
<td>resendInSec</td>
<td>number</td>
<td>En cuantos segundos se podrá solicitar un nuevo código.</td>
</tr>
<tr>
<td>availableAttempts</td>
<td>number</td>
<td>Cuantos intentos aún quedan disponibles.</td>
</tr>
</tbody></table>
<h2 id='verificar-otp'>Verificar OTP</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/send-otp/v1"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n\t\"</span><span class="s2">auth</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\n\t\t\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">contract</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\t\"</span><span class="s2">token</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">eyJ0eXA...2iDq_5VSiZo</span><span class="se">\"\n\t</span><span class="s2">},</span><span class="se">\n\t\"</span><span class="s2">code</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">GtEyfgCb</span><span class="se">\"\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="p">{</span>
        <span class="s">"auth"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"type"</span><span class="p">:</span> <span class="s">"contract"</span><span class="p">,</span>
            <span class="s">"token"</span><span class="p">:</span> <span class="s">"eyJ0eXAiOiJ...Dq_5VSiZo"</span>
        <span class="p">},</span>
        <span class="s">"code"</span><span class="p">:</span> <span class="s">"as34Er"</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/send-otp/v1"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/send-otp/v1 <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "auth": {
        "type": "contract",
        "token": "eyJ0..._5VSiZo"
    },
    "code": "GtEyfgCb"
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">auth</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">contract</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">token</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eyJ0eXA..._2iDq_5VSiZo</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GtEyfgCb</span><span class="dl">"</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">DONE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://api.stg.keynua.com/send-otp/v1</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Success response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"otpToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXA...qivpYpLm9R7LHid3w"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite verificar si el código OTP ingresado es correcto o no.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST https://api.stg.keynua.com/send-otp/v1</code></p>
<h3 id='request-body-3'>Request body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>auth</td>
<td><a href="#contractauth">ContractAuth</a></td>
<td>No</td>
<td>Permite identificar el OTP del usuario y contrato</td>
</tr>
<tr>
<td>code</td>
<td>string</td>
<td>No</td>
<td>Código OTP ingresado por el firmante.</td>
</tr>
</tbody></table>
<h3 id='response-body-3'>Response body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>otpToken</td>
<td>string</td>
<td>Token que debe ser enviado en el <em>Paso 3</em> al <a href="#actualizar-el-valor-de-un-item">actualizar el valor de un item</a> para demostrar que se ingresó correctamente el código OTP.</td>
</tr>
</tbody></table>
<h2 id='obtener-informacion'>Obtener información</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/send-otp/v1/details"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n\t\"</span><span class="s2">auth</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\n\t\t\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">contract</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\t\"</span><span class="s2">token</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">eyJ0eXAiOiJ...Dq_5VSiZo</span><span class="se">\"\n\t</span><span class="s2">}</span><span class="se">\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="p">{</span>
        <span class="s">"auth"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"type"</span><span class="p">:</span> <span class="s">"contract"</span><span class="p">,</span>
            <span class="s">"token"</span><span class="p">:</span> <span class="s">"eyJ0eXAiOiJ...Dq_5VSiZo"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/send-otp/v1/details"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> POST <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/send-otp/v1/details <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "auth": {
        "type": "contract",
        "token": "eyJ0eXAiOiJKV1Q...Dq_5VSiZo"
    }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">auth</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">contract</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">token</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eyJ0eXA..._2iDq_5VSiZo</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">();</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">withCredentials</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">readystatechange</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">DONE</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="dl">"</span><span class="s2">POST</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">https://api.stg.keynua.com/send-otp/v1/details</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Success response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"sent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sms"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"resendInSec"</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="p">,</span><span class="w">
  </span><span class="nl">"availableAttempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite revisar el estado del código actual.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://api.stg.keynua.com/send-otp/v1/details</code></p>
<h3 id='request-body-4'>Request body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>auth</td>
<td><a href="#contractauth">ContractAuth</a></td>
<td>No</td>
<td>Permite identificar el OTP del usuario y contrato</td>
</tr>
</tbody></table>
<h3 id='response-body-4'>Response body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>sent</td>
<td>boolean</td>
<td>Si el código OTP se envió o no.</td>
</tr>
<tr>
<td>channel</td>
<td>string</td>
<td>Por qué medio se realizó el envío del código.</td>
</tr>
<tr>
<td>resendInSec</td>
<td>number</td>
<td>En cuantos segundos se podrá solicitar el envío de un nuevo código.</td>
</tr>
<tr>
<td>availableAttempts</td>
<td>number</td>
<td>Cuantos intentos aún quedan disponibles.</td>
</tr>
</tbody></table>
<h2 id='errores'>Errores</h2>
<table><thead>
<tr>
<th>Code</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td><code>OUT_OF_DELIVERIES</code></td>
<td>Se ha excedido la cantidad permitida de notificaciones.</td>
</tr>
<tr>
<td><code>CODE_SENT_RECENTLY</code></td>
<td>El código ya se envió y necesario esperar el tiempo definido en la configuración para poder solicitar uno nuevo.</td>
</tr>
<tr>
<td><code>INVALID_AUTH</code></td>
<td>Los valores enviados en <code>auth</code> no son correctos.</td>
</tr>
<tr>
<td><code>USED_CODE</code></td>
<td>Ya se verificó correctamente el código enviado. Es necesario solicitar uno nuevo para realizar otra verificación.</td>
</tr>
<tr>
<td><code>EXPIRED_CODE</code></td>
<td>El último código enviado ya venció. Es necesario solicitar uno nuevo para realizar otra verificación.</td>
</tr>
<tr>
<td><code>OUT_OF_ATTEMPTS</code></td>
<td>La configuración de OTP ya no permite más intentos.</td>
</tr>
<tr>
<td><code>WRONG_CODE</code></td>
<td>El código enviado no es el correcto.</td>
</tr>
<tr>
<td><code>INVALID_TOKEN</code></td>
<td>El token enviado dentro de <code>auth</code> no es el correcto.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>El API de Keynua usa los siguientes códigos de errores.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Tu request no es válido.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Las credenciales no son válidas o pueden haber expirado.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Acceso denegado, es probable que no estés enviando las credenciales o sean incorrectas.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- El Item que estás buscando no existe..</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Tus request son muy consecutivos, baja la velocidad de los request!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Tenemos problemas en nuestro servidores, intenta más tarde por favor.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- Estamos temporalmente fuera de servicio, intenta más tarde por favor.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="javascript">Node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>

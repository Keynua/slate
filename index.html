
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
	</style>
	<link href="images/favicon-1a78870a.png" rel="icon" type="image/png" />
    <link href="stylesheets/screen-b3397d56.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-499f9e49.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="javascript">Node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduccion" class="toc-h1 toc-link" data-title="Introducción">Introducción</a>
          </li>
          <li>
            <a href="#autenticacion" class="toc-h1 toc-link" data-title="Autenticación">Autenticación</a>
          </li>
          <li>
            <a href="#contratos" class="toc-h1 toc-link" data-title="Contratos">Contratos</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-un-contrato" class="toc-h2 toc-link" data-title="Propiedades de un Contrato">Propiedades de un Contrato</a>
                  </li>
                  <li>
                    <a href="#cavali" class="toc-h2 toc-link" data-title="Cavali">Cavali</a>
                  </li>
                  <li>
                    <a href="#crear-un-contrato" class="toc-h2 toc-link" data-title="Crear un Contrato">Crear un Contrato</a>
                  </li>
                  <li>
                    <a href="#obtener-un-contrato" class="toc-h2 toc-link" data-title="Obtener un Contrato">Obtener un Contrato</a>
                  </li>
                  <li>
                    <a href="#eliminar-un-contrato" class="toc-h2 toc-link" data-title="Eliminar un Contrato">Eliminar un Contrato</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#items-del-contrato" class="toc-h1 toc-link" data-title="Items del Contrato">Items del Contrato</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-un-item" class="toc-h2 toc-link" data-title="Propiedades de un Item">Propiedades de un Item</a>
                  </li>
                  <li>
                    <a href="#tipos-de-item" class="toc-h2 toc-link" data-title="Tipos de Item">Tipos de Item</a>
                  </li>
                  <li>
                    <a href="#actualizar-el-valor-de-un-item" class="toc-h2 toc-link" data-title="Actualizar el valor de un item">Actualizar el valor de un item</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#plantillas-de-documento" class="toc-h1 toc-link" data-title="Plantillas de documento">Plantillas de documento</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#propiedades-de-una-plantilla-de-documento" class="toc-h2 toc-link" data-title="Propiedades de una plantilla de documento">Propiedades de una plantilla de documento</a>
                  </li>
                  <li>
                    <a href="#listar-plantillas-de-documento" class="toc-h2 toc-link" data-title="Listar plantillas de documento">Listar plantillas de documento</a>
                  </li>
                  <li>
                    <a href="#obtener-plantilla-de-documento" class="toc-h2 toc-link" data-title="Obtener plantilla de documento">Obtener plantilla de documento</a>
                  </li>
                  <li>
                    <a href="#generar-documentos-rellenados" class="toc-h2 toc-link" data-title="Generar documentos rellenados">Generar documentos rellenados</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#configuracion-del-webhook" class="toc-h2 toc-link" data-title="Configuración del Webhook">Configuración del Webhook</a>
                  </li>
                  <li>
                    <a href="#especificacion-del-webhook" class="toc-h2 toc-link" data-title="Especificación del Webhook">Especificación del Webhook</a>
                  </li>
                  <li>
                    <a href="#tipos-de-eventos-webhook" class="toc-h2 toc-link" data-title="Tipos de Eventos Webhook">Tipos de Eventos Webhook</a>
                  </li>
                  <li>
                    <a href="#verificar-keynua-signature-webhook" class="toc-h2 toc-link" data-title="Verificar Keynua Signature Webhook">Verificar Keynua Signature Webhook</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://www.keynua.com/account-request'>Sign Up for a Developer Key</a></li>
            <li><a href="https://github.com/tripit/slate">Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduccion'>Introducción</h1>
<blockquote>
<p>La URL base de nuestra API es distintia por ambiente:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>Pruebas: https://api.stg.keynua.com
Producción: https://api.keynua.com
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="no">Pruebas</span><span class="p">:</span> <span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">api</span><span class="p">.</span><span class="nf">stg</span><span class="p">.</span><span class="nf">keynua</span><span class="p">.</span><span class="nf">com</span>
<span class="no">Producci</span><span class="err">ó</span><span class="ss">n: </span><span class="n">https</span><span class="ss">:/</span><span class="o">/</span><span class="n">api</span><span class="p">.</span><span class="nf">keynua</span><span class="p">.</span><span class="nf">com</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">Pruebas</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="p">.</span><span class="n">stg</span><span class="p">.</span><span class="n">keynua</span><span class="p">.</span><span class="n">com</span>
<span class="n">Producción</span><span class="p">:</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">api</span><span class="p">.</span><span class="n">keynua</span><span class="p">.</span><span class="n">com</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="nx">Pruebas</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//api.stg.keynua.com</span>
<span class="nx">Producción</span><span class="p">:</span> <span class="nx">https</span><span class="p">:</span><span class="c1">//api.keynua.com</span>
</code></pre></div>
<p>Bienvenid@ a la documentación del API de Keynua! Puedes usar nuestro API para poder crear contratos, obtener el detalle del mismo o eliminar contratos.</p>

<p>Algunas características de nuestra API:</p>

<ul>
<li>Está basada en REST: los payload para los <code>request</code> y <code>response</code> deben estar en formato <code>JSON</code></li>
<li>Solo soporta <code>HTTPS</code></li>
</ul>
<h1 id='autenticacion'>Autenticación</h1><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s1">'https://api.stg.keynua.com'</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s1">'x-api-key: YOUR-APIKEY-HERE'</span>
  <span class="nt">-H</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
</code></pre></div>
<p>Keynua utiliza <strong>API Keys</strong> y <strong>Authorization tokens</strong> para acceder al API. Una vez ya tengas una cuenta en el ambiente de pruebas de Keynua, puedes acceder a la sección <a href="https://app.stg.keynua.com/developers">Developers</a> y generar tu APIKey y APIToken. Estos valores deberán ser enviados en la cabecera de la siguiente manera:</p>

<table><thead>
<tr>
<th>Header</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>API Key para acceder al servicio.</td>
</tr>
<tr>
<td>authorization</td>
<td>Token único de autorización.</td>
</tr>
</tbody></table>

<aside class="notice">Si ya estás listo para integrar en producción, por favor contacta al equipo de <code>Keynua</code></aside>
<h1 id='contratos'>Contratos</h1>
<p>El API de Contratos permite crear, ver y eliminar un contrato</p>
<h2 id='propiedades-de-un-contrato'>Propiedades de un Contrato</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"some:id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="s2">"someone"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"templateId"</span><span class="p">:</span><span class="s2">"template-id"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="s2">"2021-01-24T02:52:41.426Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="s2">"2021-01-24T02:52:42.347Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="s2">"Contract title"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">"Description"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"deletedAt"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"language"</span><span class="p">:</span><span class="s2">"es"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"metadata"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"something"</span><span class="p">:</span><span class="s2">"any-value"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expirationInHours"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="err">User</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:</span><span class="err">Group</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"documents"</span><span class="p">:</span><span class="err">Document</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"items"</span><span class="p">:</span><span class="err">Item</span><span class="p">[],</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="s2">"pending_input"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador único del contrato</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Identificador único de la cuenta con la que se creó el contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template a usar</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creación del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Título del contrato</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del contrato</td>
</tr>
<tr>
<td>finishedAt</td>
<td>string</td>
<td>Fecha de finalización del proceso de firma del contrato</td>
</tr>
<tr>
<td>deletedAt</td>
<td>string</td>
<td>Fecha de eliminación del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Lenguaje del contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td>Metadata del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato. Este campo es usado como clave de búsqueda en la plataforma web de Keynua.</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>expirationInHours</td>
<td>integer</td>
<td>Expiración del contrato en horas, a partir de la fecha de inicio del contrato</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td><a href="#propiedades-de-un-usuario">Usuarios</a> del contrato</td>
</tr>
<tr>
<td>groups</td>
<td>array</td>
<td><a href="#propiedades-de-un-grupo">Grupos</a> del contrato</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td><a href="#propiedades-de-un-documento">Documentos</a> del contrato</td>
</tr>
<tr>
<td>items</td>
<td>array</td>
<td><a href="#items-del-contrato">Items</a> del contrato</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td><a href="#estados-del-contrato">Estado del contrato</a> actual</td>
</tr>
</tbody></table>
<h3 id='estados-del-contrato'>Estados del Contrato</h3>
<table><thead>
<tr>
<th>Valor</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>pending_input</td>
<td>Estado inicial del contrato, cuando ha sido creado pero aún nadie ha comenzado el proceso de firma</td>
</tr>
<tr>
<td>working</td>
<td>Cuando los Items del contrato están en proceso de ejecución</td>
</tr>
<tr>
<td>pending_approval</td>
<td>Cuando existe un Item pendiente a ser aprobado manualmente por el dueño del contrato</td>
</tr>
<tr>
<td>error</td>
<td>Cuando existe un error sin resolver en uno de los Items del contrato</td>
</tr>
<tr>
<td>deleted</td>
<td>Cuando el contrato ha sido eliminado</td>
</tr>
<tr>
<td>done</td>
<td>Cuando el contrato ha sido firmado por todos y ha finalizado correctamente</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-usuario'>Propiedades de un Usuario</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Manuel Silva"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="s2">"msilva@keynua.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"signers"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="s2">"token-value"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Usuarios que firman el contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único del usuario en el contrato</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del usuario</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>El correo electrónico del usuario</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>El teléfono del usuario</td>
</tr>
<tr>
<td>groups</td>
<td>array</td>
<td>Nombre de los grupos a los que pertenece el usuario, normalmente siempre pertenece a un sólo grupo. El identificador del grupo será asignado por el equipo de Keynua</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario que se utilizará para realizar la firma. Por ejemplo para <a href="#actualizar-el-valor-de-un-item">actualizar los valores de cada item</a></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-grupo'>Propiedades de un Grupo</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"signers"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Firmantes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"digitalSignature"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bulk"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Grupos que existen en el contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Identificador del grupo</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del grupo</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripción del grupo</td>
</tr>
<tr>
<td>digitalSignature</td>
<td>boolean</td>
<td>Flag que indica si el grupo realizará firma digital o no</td>
</tr>
<tr>
<td>bulk</td>
<td>boolean</td>
<td>Flag que indica si el grupo pertenece a Firma Múltiple o no</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-documento'>Propiedades de un Documento</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"DocumentPdf.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ext"</span><span class="p">:</span><span class="s2">"pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sha"</span><span class="p">:</span><span class="s2">"pdf-hash"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="mi">3708</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="s2">"signed-url"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Los documentos que son firmados en el contrato.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único del documento</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del documento incluyendo su extensión</td>
</tr>
<tr>
<td>ext</td>
<td>string</td>
<td>Extensión del documento</td>
</tr>
<tr>
<td>sha</td>
<td>string</td>
<td>Código sha256 del documento</td>
</tr>
<tr>
<td>size</td>
<td>integer</td>
<td>Tamaño en bytes del documento</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Tipo del documento</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>La URL para poder visualizar el documento</td>
</tr>
</tbody></table>
<h2 id='cavali'>Cavali</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"banking"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="nl">"product"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"uniqueCode"</span><span class="p">:</span><span class="w"> </span><span class="mi">5478700</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issuedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-09-20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"issuedPlace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lima"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"civilStatus"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domicile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lima"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"representatives"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cavali permite crear un Pagaré y asociarlo a la firma de un contrato. Para crear un contrato, el proceso debe tener un Item Cavali y Item de tipo text con el id <code>documentNumber</code></p>

<aside class="warning">Si quieres crear contratos con Pagarés electrónicos, debes contactar al equipo de soporte de Keynua</aside>

<p>El Pagaré esta compuesto por lo siguiente:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>banking</td>
<td>integer</td>
<td>Código de banca</td>
</tr>
<tr>
<td>product</td>
<td>integer</td>
<td>Código de producto</td>
</tr>
<tr>
<td>uniqueCode</td>
<td>integer</td>
<td>Código único del cliente</td>
</tr>
<tr>
<td>issuedDate</td>
<td>string</td>
<td>Fecha de emisión. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>conditionJustSign</td>
<td>integer</td>
<td>Condición del pagaré. Puede tener los siguientes valores: 1 (si)</td>
</tr>
<tr>
<td>special</td>
<td>integer</td>
<td>Indicador de pagaré especial. Puede tener los siguientes valores: 1 (si)</td>
</tr>
<tr>
<td>issuedPlace</td>
<td>string</td>
<td>Lugar de emisión</td>
</tr>
<tr>
<td>expirationDate</td>
<td>string</td>
<td>Fecha de caducidad. Formato: YYYY-MM-dd</td>
</tr>
<tr>
<td>amount</td>
<td>double</td>
<td>Monto del pagaré</td>
</tr>
<tr>
<td>currency</td>
<td>integer</td>
<td>Moneda del pagaré. Puede tener los siguientes valores: 1 (S/)</td>
</tr>
<tr>
<td>compensatoryInterestAmount</td>
<td>double</td>
<td>El interés compensatorio sobre el monto</td>
</tr>
<tr>
<td>periodOne</td>
<td>integer</td>
<td>El período de capitalización 1</td>
</tr>
<tr>
<td>compensatoryInterestArrears</td>
<td>double</td>
<td>El interés compensatorio por el período de morosidad</td>
</tr>
<tr>
<td>periodTwo</td>
<td>integer</td>
<td>El período de capitalización 2</td>
</tr>
<tr>
<td>interestArrears</td>
<td>double</td>
<td>Interés moratorio del periodo</td>
</tr>
<tr>
<td>periodTwo</td>
<td>integer</td>
<td>El período de capitalización 3</td>
</tr>
<tr>
<td>specialClauses</td>
<td>string</td>
<td>Las Cláusulas especiales que pueda contener el Pagaré</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>El token de validación de firmas para proveedores</td>
</tr>
<tr>
<td>additionalField1</td>
<td>string</td>
<td>Campo adicional 1</td>
</tr>
<tr>
<td>additionalField2</td>
<td>string</td>
<td>Campo adicional 2</td>
</tr>
<tr>
<td>client</td>
<td>object</td>
<td><a href="#cliente-cavali">Cliente</a> del Pagaré</td>
</tr>
<tr>
<td>representatives</td>
<td>array</td>
<td>Arreglo de <a href="#representantes-cavali">Representantes</a> del cliente</td>
</tr>
<tr>
<td>guarantees</td>
<td>array</td>
<td>Arreglo de <a href="#garantías-cavali">Garantías</a> del cliente</td>
</tr>
</tbody></table>
<h3 id='cliente-cavali'>Cliente Cavali</h3>
<p>El cliente del pagaré. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>Id del firmante</td>
</tr>
<tr>
<td>civilStatus</td>
<td>integer</td>
<td>Estado civil del cliente. Puede tener los siguientes valores: <code>1 (SOLTERO)</code>, <code>2 (CASADO)</code>, <code>3 (DIVORCIADO)</code>, <code>4 (VIUDO)</code></td>
</tr>
<tr>
<td>domicile</td>
<td>string</td>
<td>Domicilio del cliente <code>Máximo 100 de longitud</code></td>
</tr>
</tbody></table>
<h3 id='representantes-cavali'>Representantes Cavali</h3>
<p>Representante del cliente. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>Id del firmante</td>
</tr>
</tbody></table>
<h3 id='garantias-cavali'>Garantías Cavali</h3>
<p>Garantía del cliente. El elemento está compuesto por:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>userId</td>
<td>integer</td>
<td>Id del firmante</td>
</tr>
<tr>
<td>civilStatus</td>
<td>integer</td>
<td>Estado civil. Puede tener los siguientes valores: <code>1 (SOLTERO)</code>, <code>2 (CASADO)</code>, <code>3 (DIVORCIADO)</code>, <code>4 (VIUDO)</code></td>
</tr>
<tr>
<td>domicile</td>
<td>string</td>
<td>Domicilio <code>Máximo 100 de longitud</code></td>
</tr>
<tr>
<td>representative</td>
<td>array</td>
<td>Arreglo de <a href="#representantes-cavali">Representantes</a></td>
</tr>
</tbody></table>
<h2 id='crear-un-contrato'>Crear un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">title</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Contract created by API</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">language</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">es</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">userEmailNotifications</span><span class="se">\"</span><span class="s2">: true,</span><span class="se">\n\t\"</span><span class="s2">templateId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">keynua-peru-default</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">documents</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">DocumentPdf.pdf</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">base64</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">YOUR-BASE64-PDF-HERE</span><span class="se">\"\n</span><span class="s2">    }</span><span class="se">\n</span><span class="s2">  ],</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">users</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Manuel Silva</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">msilva@keynua.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\t\"</span><span class="s2">groups</span><span class="se">\"</span><span class="s2">: [ </span><span class="se">\"</span><span class="s2">signers</span><span class="se">\"</span><span class="s2"> ]</span><span class="se">\n</span><span class="s2">    }</span><span class="se">\n</span><span class="s2">  ]</span><span class="se">\n</span><span class="s2">}</span><span class="se">\n</span><span class="s2">"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">title</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Contract created by API</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">language</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">es</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">userEmailNotifications</span><span class="se">\"</span><span class="s">: false,</span><span class="se">\n\t\"</span><span class="s">templateId</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">keynua-peru-default</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">documents</span><span class="se">\"</span><span class="s">: [</span><span class="se">\n</span><span class="s">    {</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">name</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">DocumentPdf.pdf</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">base64</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">YOUR-BASE64-PDF-HERE</span><span class="se">\"\n</span><span class="s">    }</span><span class="se">\n</span><span class="s">  ],</span><span class="se">\n</span><span class="s">  </span><span class="se">\"</span><span class="s">users</span><span class="se">\"</span><span class="s">: [</span><span class="se">\n</span><span class="s">    {</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">name</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">Manuel Silva</span><span class="se">\"</span><span class="s">,</span><span class="se">\n</span><span class="s">      </span><span class="se">\"</span><span class="s">email</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">msilva@keynua.com</span><span class="se">\"</span><span class="s">,</span><span class="se">\n\t\t\"</span><span class="s">groups</span><span class="se">\"</span><span class="s">: [ </span><span class="se">\"</span><span class="s">signers</span><span class="se">\"</span><span class="s"> ]</span><span class="se">\n</span><span class="s">    }</span><span class="se">\n</span><span class="s">  ]</span><span class="se">\n</span><span class="s">}</span><span class="se">\n</span><span class="s">"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
    <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="s">"/contracts/v1"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1 <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
  "title": "Contract created by API",
  "language": "es",
  "userEmailNotifications": true,
  "templateId": "keynua-peru-default",
  "documents": [
    {
      "name": "DocumentPdf.pdf",
      "base64": "YOUR-BASE64-PDF-HERE"
    }
  ],
  "users": [
    {
      "name": "Manuel Silva",
      "email": "msilva@keynua.com",
      "groups": [ "signers" ]
    }
  ]
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Contract created by API</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">language</span><span class="p">:</span> <span class="dl">'</span><span class="s1">es</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">userEmailNotifications</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">templateId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">keynua-peru-default</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">documents</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">DocumentPdf.pdf</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">base64</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-BASE64-PDF-HERE</span><span class="dl">'</span>
    <span class="p">},</span>
  <span class="p">],</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Manuel Silva</span><span class="dl">'</span><span class="p">,</span> <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">msilva@keynua.com</span><span class="dl">'</span><span class="p">,</span> <span class="na">groups</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">signers</span><span class="dl">'</span><span class="p">]}</span>
  <span class="p">]</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>


<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue creado satisfactoramente, el API retorna un Json estructurado como aparece en la sección de <a href="#contratos">Contratos</a></p>
</blockquote>
<h3 id='http-request'>HTTP Request</h3>
<p><code>PUT /contracts/v1</code></p>
<h3 id='headers'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body'>Body</h3>
<p>Para crear el contrato, se tiene que enviar la data como un solo objeto JSON</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Título del contrato</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td><code>optional</code> Descripción del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td><code>optional</code> Referencia del contrato. Este campo es usado como clave de búsqueda en la plataforma web de Keynua</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td><code>Default &quot;es&quot;</code> Idioma del contrato. Puede ser <code>en</code> o <code>es</code></td>
</tr>
<tr>
<td>userEmailNotifications</td>
<td>boolean</td>
<td><code>Default &quot;false&quot;</code> Indica si los usuarios serán notificados por email cuando hay un error o finaliza un contrato</td>
</tr>
<tr>
<td>expirationInHours</td>
<td>integer</td>
<td><code>optional</code> Expiración del contrato en horas, a partir de la fecha de inicio del contrato. Mínimo uno (1)</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Id del template a usar. Puedes usar uno de los template públicos de Keynua como <code>keynua-peru-default</code>. Si es un proceso customizado, el equipo de Keynua te enviará este valor</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td>Arreglo de los documentos PDFs encodificados en base64 que van a ser firmados. Mínimo 1 y máximo 10. El peso máximo en total no debe ser mayor a 4.5 MB. En lugar de <code>base64</code> también se puede enviar <code>storageId</code>, como por ejemplo se obtiene de <a href="#generar-documentos-rellenados">este</a> API.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Arreglo de los usuarios que firmarán el contrato. El email es opcional y el valor a enviar en <strong>groups</strong> depende del templateId a usar. Para el caso de <code>keynua-peru-default</code>, el valor en groups debe ser <code>signers</code>. Si utilizan un template customizado en el que hay más de un grupo, por ejemplo firmas con DNI + Firma múltiple, el valor del grupo representará al grupo que pertenece dicho usuario</td>
</tr>
<tr>
<td>metadata</td>
<td>object</td>
<td><code>optional</code> Metadata del contrato. Puedes enviar información en este campo como key-value para poder identificar el contrato creado por Keynua con algún Identificador interno de tu sistema.</td>
</tr>
<tr>
<td>flags</td>
<td>object</td>
<td><code>optional</code> Se podrá enviar información adicional para crear un contrato. Por ejemplo la información de <a href="#cavali">Cavali</a> para crear un contrato con Pagaré Electrónico se enviará con el key <code>cavaliData</code></td>
</tr>
</tbody></table>
<h2 id='obtener-un-contrato'>Obtener un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1/{contractId}"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/contracts/v1/{contractId}"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> GET <span class="se">\</span>
  <span class="nt">--url</span> <span class="s1">'https://api.stg.keynua.com/contracts/v1/{contractId}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">hostname</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">path</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1/{contractId}</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">headers</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue obtenido satisfactoramente, el API retorna un Json estructurado como aparece en la sección de <a href="#contratos">Contratos</a></p>
</blockquote>

<p>Este API obtiene un contrato específico</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /contracts/v1/{contractId}</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>El ID del Contrato a obtener</td>
</tr>
</tbody></table>
<h2 id='eliminar-un-contrato'>Eliminar un Contrato</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1/{contractId}"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Delete</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
    <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span>
    <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span> <span class="s">"/contracts/v1/{contractId}"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> DELETE <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1/<span class="o">{</span>contractId<span class="o">}</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span> <span class="se">\</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">DELETE</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1/{contractId}</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si el contrato fue eliminado, el API retornará un JSON como el siguiente:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"deletedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-01-25T21:38:50.055Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Este API elimina un Contrato</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>DELETE /contracts/v1/{contractId}</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parámetro</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>El ID del Contrato a eliminar</td>
</tr>
</tbody></table>

<aside class="warning">No se puede eliminar un contrato que su estado es <code>done</code>. Si eliminas un contrato que aún no ha sido iniciado por el firmante, la transacción utilizada será reintegrada a tu saldo. Si el contrato ya fue iniciado por el firmante, se tomará como una transacción utilizada.</aside>
<h1 id='items-del-contrato'>Items del Contrato</h1>
<p>Para llevar a cabo el flujo de firma de un contrato, cada uno de los usuarios deberá ingresar la información necesaria para firmar. Por ejemplo: la foto de su DNI, el video diciendo el código corto o el número de su DNI. También hace referencia a los procesos internos llevados a cabo por Keynua, por ejemplo la generación del PDF final o validación biométrica. A cada uno de estos elementos los llamamos <strong>Item</strong></p>
<h2 id='propiedades-de-un-item'>Propiedades de un Item</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"userId"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Certificado y documentos"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signed-url"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador del item</td>
</tr>
<tr>
<td>version</td>
<td>integer</td>
<td>Versión del item. Siempre se mostrará la última versión disponible</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>El estado del item. Puede tener los siguientes valores: <code>success</code>, <code>pending</code>, <code>working</code>, <code>error</code></td>
</tr>
<tr>
<td>userId</td>
<td>integer</td>
<td>El identificador del usuario al que está relacionado este item</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>La referencia del item (está relacionado con la plantilla del contrato)</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Un título referente al item</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>El ID del <a href="#tipos-de-item">tipo del Item</a> al que pertenece</td>
</tr>
<tr>
<td>stageIndex</td>
<td>integer</td>
<td>El índice del nivel al que pertenece el item</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>El valor del item. La estructura varía de acuerdo al tipo del item. Cuando se trata de un Item que contiene un Archivo, habrá un key <strong>url</strong> el cual contiene la URL firmada para poder descargar el archivo. <strong>Las URLs firmadas tienen una duración máxima de 12 horas</strong></td>
</tr>
</tbody></table>
<h2 id='tipos-de-item'>Tipos de Item</h2>
<p>En la siguiente tabla podrás ver los Tipos de Items que existen en Keynua</p>

<table><thead>
<tr>
<th>Item</th>
<th>Id</th>
<th>User Input</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>Términos y condiciones</td>
<td>terms</td>
<td><code>si</code></td>
<td>Hace  referencia a si el usuario ha aceptado o no los términos y condiciones</td>
</tr>
<tr>
<td>Verificación de documentos</td>
<td>documents</td>
<td><code>si</code></td>
<td>Indica que se le han mostrado los documentos a firmar al usuario</td>
</tr>
<tr>
<td>Campo de Texto</td>
<td>text</td>
<td><code>si</code></td>
<td>Campo de texto ingresado por el usuario o por el creador del contrato, por ejemplo el número de Documento de Identidad</td>
</tr>
<tr>
<td>Imagen</td>
<td>image</td>
<td><code>si</code></td>
<td>Hace referencia a una imagen subida por un usuario, por ejemplo, foto del documento de identidad</td>
</tr>
<tr>
<td>Firma Ológrafa</td>
<td>imagesign</td>
<td><code>si</code></td>
<td>Firma ológrafa realizada por el usuario en el proceso de firma</td>
</tr>
<tr>
<td>Video</td>
<td>video</td>
<td><code>si</code></td>
<td>Video realizado por el usuario, en la mayoría de los casos hace referencia a la videofirma.</td>
</tr>
<tr>
<td>Email</td>
<td>email</td>
<td><code>no</code></td>
<td>Hace referencia al envío del email a un usuario</td>
</tr>
<tr>
<td>Reconocimiento de Documento</td>
<td>detectlabels</td>
<td><code>no</code></td>
<td>Proceso de Reconocimiento del formato de un Documento. Por ejemplo, si se le pide subir a un usuario la foto de su DNI del país y sube la foto de su pasaporte, este proceso detectará que no es el documento solicitado y arrojará un error</td>
</tr>
<tr>
<td>Reconocimiento de textos</td>
<td>checklabels</td>
<td><code>no</code></td>
<td>Este proceso realiza la verificación de textos entre 2 elementos, por ejemplo la búsqueda del documento de identidad ingresado y los textos extraídos de la imagen del documento</td>
</tr>
<tr>
<td>Conversión de Video</td>
<td>convertvideo</td>
<td><code>no</code></td>
<td>Proceso que indica que el video del firmante tiene un formato correcto para ser procesado</td>
</tr>
<tr>
<td>Reniec</td>
<td>reniec</td>
<td><code>no</code></td>
<td>Proceso que indica el resultado de la búsqueda del DNI ingresado en Reniec</td>
</tr>
<tr>
<td>Validación de Biometría Facial</td>
<td>facematch</td>
<td><code>no</code></td>
<td>Proceso que indica la validación Biométrica entre 2 elementos que pueden ser por ejemplo la foto obtenida de RENIEC y la videofirma realizada por el usuario</td>
</tr>
<tr>
<td>Reconocimiento de texto hablado</td>
<td>transcribe</td>
<td><code>no</code></td>
<td>Indica si el usuario dijo como texto hablado el código que corresponde con los documentos que está firmando</td>
</tr>
<tr>
<td>Prueba de vida</td>
<td>livenessdetection</td>
<td><code>no</code></td>
<td>Indica si se detectó vida en el video del usuario</td>
</tr>
<tr>
<td>Aprobación Manual</td>
<td>manualapproval</td>
<td><code>no</code></td>
<td>Indica si hubo una aprobación manual de algún Item como <code>detectlabels</code>, <code>facematch</code> o <code>transcribe</code></td>
</tr>
<tr>
<td>Generación de imágenes para insertar en el PDF final</td>
<td>generatethumbnails</td>
<td><code>no</code></td>
<td>Proceso que indica si se pudieron obtener los thumbnails necesarios antes de  poder crear el PDF de documento de firma final (Certificado)</td>
</tr>
<tr>
<td>Documento de Firma Electrónica/Digital</td>
<td>pdf</td>
<td><code>no</code></td>
<td>Indica si el archivo PDF de la firma electrónica se generó satisfactoriamente. <strong>En este Item puedes encontrar el PDF final de firma electrónica generado por Keynua</strong></td>
</tr>
<tr>
<td>Firma Digital</td>
<td>dsignature</td>
<td><code>no</code></td>
<td>Proceso de firma digital aplicado a un archivo de firma electrónica. En este Item puedes encontrar el archivo digital, en caso de que tu proceso incluya firma digital</td>
</tr>
<tr>
<td>Cavali - Perú</td>
<td>cavali</td>
<td><code>no</code></td>
<td>Proceso que indica el registro de un Pagaré electrónico en Cavali para Perú</td>
</tr>
<tr>
<td>Blockchain</td>
<td>blockchain</td>
<td><code>no</code></td>
<td>Proceso que indica si se registró correctamente el hash del documento de firma electrónica final(certificado) en Blockchain</td>
</tr>
<tr>
<td>Normativa NOM151 - México</td>
<td>knom151</td>
<td><code>no</code></td>
<td>Proceso que indica si se generó correctamente la constancia de conservación según la norma Méxicana NOM151</td>
</tr>
<tr>
<td>Firma Múltiple</td>
<td>bulksignature</td>
<td><code>no</code></td>
<td>Indica si se solicitó firmar al usuario de firma múltiple o si firmó satsifactoriamente. El estado &quot;error&quot; no está implementado por el momento en este Item.</td>
</tr>
</tbody></table>
<h2 id='actualizar-el-valor-de-un-item'>Actualizar el valor de un item</h2>
<aside class="notice">Este procedimiento sólo será realizado en caso quieran construir su propio proceso de firma. Keynua ofrece el proceso de firmar sin costo adicional bajo el propio dominio de Keynua o la posibilidad de incrustar el proceso de firma bajo tu dominio o App móvil mediante nuestro <code><a href="https://github.com/Keynua/public-docs/wiki/Widget">Keynua Widget</a></code></aside>

<p>Para poder actualizar el valor de cada item, se debe utilizar la información que se obtiene luego de crear un certificado o de obtener un certificado por id. Así, podemos saber los tipos (type) de cada item y seguir los siguientes pasos para realizar la actualización.</p>

<aside class="warning">Este procedimiento solo aplica para los items del tipo <code>image</code> y <code>video</code></aside>
<h3 id='paso-1-solicitar-la-informacion-antes-de-subir-un-archivo'>Paso 1: solicitar la información antes de subir un archivo</h3>
<blockquote>
<p>Body payload</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some:user:token"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some_file.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"md5"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a333cae630cf48165d18a9b1d33f5dd"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Si la solicitud fue satisfactoria, la respuesta tendrá la información para que puedas subir el contenido del archivo</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"linkId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some:id"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some:url:for:upload"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/jpeg"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Content-MD5"</span><span class="p">:</span><span class="w"> </span><span class="s2">"solo si se envió md5"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST /contracts/v1/sign/upload</code></p>
<h3 id='headers-2'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-2'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario del cual se actualizará el item</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del archivo que se va a subir. Debe incluir su extensión</td>
</tr>
<tr>
<td>md5</td>
<td>string</td>
<td><code>opcional</code> El valor md5 del archivo</td>
</tr>
</tbody></table>
<h3 id='paso-2-subir-el-contenido-del-archivo'>Paso 2: subir el contenido del archivo</h3><div class="highlight"><pre class="highlight plaintext"><code>curl --request PUT \
  --url 'https://some:url:for:upload' \
  --header 'content-type: image/jpeg' \
  --header 'Content-MD5: contentMD5' \
  --data some_file.jpeg
</code></pre></div>
<blockquote>
<p>Si no hubo errores al subir el archivo, se retornará el código de estado 200</p>
</blockquote>

<p>Con la información obtenida en el paso 1, se subirá el archivo.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>POST {URL-STEP-1}</code></p>
<h3 id='headers-3'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>{Content-Type-Step-1}</td>
</tr>
<tr>
<td>Content-MD5</td>
<td>contentMD5</td>
</tr>
</tbody></table>
<h3 id='body-3'>Body</h3>
<p>El archivo en Base64</p>
<h3 id='paso-3-actualizar-el-valor-del-item'>Paso 3: actualizar el valor del item</h3><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--request</span> PUT <span class="se">\</span>
  <span class="nt">--url</span> https://api.stg.keynua.com/contracts/v1/sign <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
  <span class="nt">--data</span> <span class="s1">'{
    "token": "USER-TOKEN-HERE",
    "itemId": 2,
    "version": 8,
    "value": {
        "linkId": "LINK-ID-HERE"
    }
}'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="na">token</span><span class="p">:</span> <span class="dl">'</span><span class="s1">USER-TOKEN-HERE</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">itemId</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="na">version</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
  <span class="na">value</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">linkId</span><span class="p">:</span> <span class="dl">'</span><span class="s1">LINK-ID-HERE</span><span class="dl">'</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">PUT</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">"</span><span class="s2">api.stg.keynua.com</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/contracts/v1/sign</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">content-type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">content-length</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="s">"{</span><span class="se">\n\t\"</span><span class="s">token</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">USER-TOKEN-HERE</span><span class="se">\"</span><span class="s">,</span><span class="se">\n\t\"</span><span class="s">itemId</span><span class="se">\"</span><span class="s">: 2,</span><span class="se">\n\t\"</span><span class="s">version</span><span class="se">\"</span><span class="s">: 8,</span><span class="se">\n\t\"</span><span class="s">value</span><span class="se">\"</span><span class="s">: {</span><span class="se">\n\t\t\"</span><span class="s">linkId</span><span class="se">\"</span><span class="s">: </span><span class="se">\"</span><span class="s">LINK-ID-HERE</span><span class="se">\"\n\t</span><span class="s">}</span><span class="se">\n</span><span class="s">}"</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span> <span class="s">'content-type'</span><span class="p">:</span> <span class="s">"application/json"</span> <span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"PUT"</span><span class="p">,</span> <span class="s">"/contracts/v1/sign"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contracts/v1/sign"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Put</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"content-type"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'application/json'</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n\t\"</span><span class="s2">token</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">USER-TOKEN-HERE</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n\t\"</span><span class="s2">itemId</span><span class="se">\"</span><span class="s2">: 2,</span><span class="se">\n\t\"</span><span class="s2">version</span><span class="se">\"</span><span class="s2">: 8,</span><span class="se">\n\t\"</span><span class="s2">value</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\n\t\t\"</span><span class="s2">linkId</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">LINK-ID-HERE</span><span class="se">\"\n\t</span><span class="s2">}</span><span class="se">\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div>
<blockquote>
<p>Si la actualización fue exitosa, se devolverá el cuerpo del <a href="#items-del-contrato">item</a> actualizado</p>
</blockquote>

<p>En este paso se realizará la actualización de la imagen o el video del item.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>PUT /contracts/v1/sign</code></p>
<h3 id='headers-4'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-4'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>El token del usuario del cual se actualizará el item</td>
</tr>
<tr>
<td>itemId</td>
<td>integer</td>
<td>El identificador del item del que se actualizará el valor</td>
</tr>
<tr>
<td>version</td>
<td>integer</td>
<td>La versión del item del que se actualizará el valor</td>
</tr>
<tr>
<td>value</td>
<td>object</td>
<td>Dentro del objeto value debes enviar el linkId obtenido en el paso 1 con el key <code>linkId</code></td>
</tr>
</tbody></table>

<aside class="notice">Los valores <code>itemId</code> y <code>version</code> del Item se obtienen de la respuesta de crear un Contrato o de obtener un Contrato por id</aside>
<h1 id='plantillas-de-documento'>Plantillas de documento</h1>
<p>Permite listar, obtener y rellenar plantillas de documentos PDF.</p>

<aside class="notice">Estas plantillas son creadas únicamente desde el Web App. Si quieres usar esta funcionalidad ponte en contacto con el equipo de soporte de Keynua.</aside>
<h2 id='propiedades-de-una-plantilla-de-documento'>Propiedades de una plantilla de documento</h2><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z8f8bc671-626d-4212-9c8c-c5d5f9464fa6"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4ea8-88ab-248e672d88bd"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A document template"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"creatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"creator@keynua.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="err">DocumentTemplateField</span><span class="p">[],</span><span class="w">
  </span><span class="nl">"files"</span><span class="p">:</span><span class="w"> </span><span class="err">DocumentTemplateFile</span><span class="p">[],</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>templateId</td>
<td>string</td>
<td>No</td>
<td>El id de la plantilla de documento</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>No</td>
<td>El id del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>No</td>
<td>El nombre de la plantilla de documento</td>
</tr>
<tr>
<td>creatorEmail</td>
<td>string</td>
<td>No</td>
<td>El email del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>fields</td>
<td><a href="#propiedades-de-documenttemplatefield">DocumentTemplateField</a>[]</td>
<td>No</td>
<td>Contiene las reglas para cada campo de la plantilla de documento. Los valores de estos campos serán utilizados para generar los archivos finales.</td>
</tr>
<tr>
<td>files</td>
<td><a href="#propiedades-de-documenttemplatefile">DocumentTemplateFile</a>[]</td>
<td>No</td>
<td>Los archivos pdf que serán utilizados como base para generar los archivos que incluyan los valores de los campos</td>
</tr>
<tr>
<td>updatedAt</td>
<td>string</td>
<td>No</td>
<td>La fecha y hora de la última modificación en formato ISO</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>No</td>
<td>La fecha y hora de creación en formato ISO</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-documenttemplatefield'>Propiedades de DocumentTemplateField</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email-0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default value"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"minLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"maxLength"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"regex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^</span><span class="se">\\</span><span class="s2">d?$"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A placeholder"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>El id del campo</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>No</td>
<td>El nombre del campo</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>No</td>
<td>El tipo del campo. <code>string</code>, <code>date</code> o <code>number</code>.</td>
</tr>
<tr>
<td>required</td>
<td>boolean</td>
<td>No</td>
<td>Si el campo es obligatorio</td>
</tr>
<tr>
<td>default</td>
<td>string</td>
<td>Sí</td>
<td>Un valor por defecto para el campo</td>
</tr>
<tr>
<td>minLength</td>
<td>number</td>
<td>Sí</td>
<td>La longitud mínima para campos de tipo <code>string</code></td>
</tr>
<tr>
<td>maxLength</td>
<td>number</td>
<td>Sí</td>
<td>La longitud máxima para campos de tipo <code>string</code></td>
</tr>
<tr>
<td>regex</td>
<td>string</td>
<td>Sí</td>
<td>Regex para validar campos de tipo <code>string</code></td>
</tr>
<tr>
<td>placeholder</td>
<td>string</td>
<td>Sí</td>
<td>Texto adicional</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-documenttemplatefile'>Propiedades de DocumentTemplateFile</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/48101c38-f770-4ea8-88ab-25"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b5d1b359-3736-424b-b83d-f0d0da910a89"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"isotype_stamp.pdf"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3708</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>No</td>
<td>Url que contiene el documento original</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>No</td>
<td>Id del archivo</td>
</tr>
<tr>
<td>name</td>
<td>boolean</td>
<td>No</td>
<td>Nombre del archivo</td>
</tr>
<tr>
<td>size</td>
<td>number</td>
<td>No</td>
<td>Tamaño del archivo</td>
</tr>
</tbody></table>
<h2 id='listar-plantillas-de-documento'>Listar plantillas de documento</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contract-manager-document-templates/api"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/contract-manager-document-templates/api"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s1">'https://api.stg.keynua.com/contract-manager-document-templates/api'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">method</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">hostname</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.stg.keynua.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/contract-manager-document-templates/api</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">x-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-KEY-HERE</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-TOKEN-HERE</span><span class="dl">'</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Success response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"templates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z8f8bc671-626d-4212-9c8c-c5d5f9464fa6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f570-4ea8-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test 1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"creator@keynua.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fileCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fieldCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-05-07T22:10:14.935Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"templateId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-11T21:18:18.463Z962ce87f-d3b7-4cbb-afa0-04e85e2791b2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48101c38-f770-4e28-88ab-258e672d88bd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test 2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creatorEmail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"creator@keynua.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fileCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fieldCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-11T21:18:18.463Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-11T21:18:18.463Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJwayI6IjQ4MTAxYzM4LWY3NzAtNGVhOC04OGFiLTI1OGU2NzJkODhiZDp0ZW1wbGF0ZSIsInJrIjoiMjAyMS0wMi0wMlQyMToxMzozNy42NDhaNGE3YWZiZDEtMTQ0Yi00YmRmLWI1NTUtOWFlZTQ2MDMxZGE1In0="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Permite obtener una lista de las plantillas de documento que pertenecen al usuario o a su organización.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET /contract-manager-document-templates/api</code></p>
<h3 id='headers-5'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h3 id='search-params'>Search params</h3>
<table><thead>
<tr>
<th>Nombre</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>string</td>
<td>Sí</td>
<td>La cantidad máxima de items que el api debe devolver. Si no se envía, el api devuelve todos.</td>
</tr>
<tr>
<td>start</td>
<td>string</td>
<td>Sí</td>
<td>Sirve para obtener la siguiente porción de items en la lista. Recibe el valor de <code>next</code> que se obtiene en la respuesta.</td>
</tr>
<tr>
<td>organizational</td>
<td>boolean</td>
<td>Sí</td>
<td><code>true</code> si se quiere las plantillas de documento de la organización</td>
</tr>
</tbody></table>
<h3 id='response-body'>Response body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>templates</td>
<td><a href="#response-body-templateitem">TemplateItem</a></td>
<td>Lista de plantillas de documento</td>
</tr>
<tr>
<td>next</td>
<td>string</td>
<td><code>opcional</code> Envía este valor en <code>start</code> para obtener la siguiente porción de la lista. Si no se encuetra en la respuesta, entonces no quedan más items en la lista.</td>
</tr>
</tbody></table>
<h3 id='response-body-templateitem'>Response body TemplateItem</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>templateId</td>
<td>string</td>
<td>El id de la plantilla de documento</td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>El id del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre de la plantilla de documento</td>
</tr>
<tr>
<td>creatorEmail</td>
<td>string</td>
<td>El email del usuario que creó la plantilla de documento</td>
</tr>
<tr>
<td>fileCount</td>
<td>number</td>
<td>Cantidad de archivos en la plantilla</td>
</tr>
<tr>
<td>fieldCount</td>
<td>number</td>
<td>Cantidad de campos en la plantilla</td>
</tr>
<tr>
<td>updatedAt</td>
<td>string</td>
<td>La fecha y hora de la última modificación en formato ISO</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>La fecha y hora de creación en formato ISO</td>
</tr>
</tbody></table>
<h2 id='obtener-plantilla-de-documento'>Obtener plantilla de documento</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s2">"uri"</span>
<span class="nb">require</span> <span class="s2">"net/http"</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contract-manager-document-templates/api/{templateId}"</span><span class="p">)</span>

<span class="n">https</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">https</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Get</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">https</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span> <span class="s">"/contract-manager-document-templates/api/{templateId}"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> GET <span class="s1">'https://api.stg.keynua.com/contract-manager-document-templates/api/{templateId}'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'x-api-key: YOUR-API-KEY-HERE'</span> <span class="se">\</span>
  <span class="nt">--header</span> <span class="s1">'authorization: YOUR-API-TOKEN-HERE'</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">method</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">GET</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">hostname</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.dev.keynua.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/contract-manager-document-templates/api/{templateId}</span><span class="dl">'</span><span class="p">,</span>
  <span class="dl">'</span><span class="s1">headers</span><span class="dl">'</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">'</span><span class="s1">x-api-key</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-KEY-HERE</span><span class="dl">'</span><span class="p">,</span>
    <span class="dl">'</span><span class="s1">authorization</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">YOUR-API-TOKEN-HERE</span><span class="dl">'</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Si la plantilla fue obtenida satisfactoramente, el API retorna un Json estructurado como aparece en la sección de <a href="#propiedades-de-una-plantilla-de-documento">Plantilla de documento</a></p>
</blockquote>

<p>Permite obtener una plantilla de documento.</p>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET /contract-manager-document-templates/api/{templateId}</code></p>
<h3 id='headers-6'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
</tbody></table>
<h2 id='generar-documentos-rellenados'>Generar documentos rellenados</h2><div class="highlight"><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'uri'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'openssl'</span>

<span class="n">url</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.stg.keynua.com/contract-manager-document-templates/api/create-filled-files/{templateId}"</span><span class="p">)</span>

<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">url</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_NONE</span>

<span class="n">request</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="o">::</span><span class="no">Post</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"x-api-key"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-KEY-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"authorization"</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YOUR-API-TOKEN-HERE'</span>
<span class="n">request</span><span class="p">[</span><span class="s2">"Content-Type"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"application/json"</span>
<span class="n">request</span><span class="p">.</span><span class="nf">body</span> <span class="o">=</span> <span class="s2">"{</span><span class="se">\n</span><span class="s2">  </span><span class="se">\"</span><span class="s2">fieldValues</span><span class="se">\"</span><span class="s2">: [</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">email-0</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">value</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">user@mail.com</span><span class="se">\"\n</span><span class="s2">    },</span><span class="se">\n</span><span class="s2">    {</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">date-0</span><span class="se">\"</span><span class="s2">,</span><span class="se">\n</span><span class="s2">      </span><span class="se">\"</span><span class="s2">value</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2020-10-09</span><span class="se">\"\n</span><span class="s2">    }</span><span class="se">\n</span><span class="s2">  ]</span><span class="se">\n</span><span class="s2">}"</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">request</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="nb">puts</span> <span class="n">response</span><span class="p">.</span><span class="nf">read_body</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">http.client</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">HTTPSConnection</span><span class="p">(</span><span class="s">"api.stg.keynua.com"</span><span class="p">)</span>

<span class="n">payload</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">({</span>
  <span class="s">"fieldValues"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s">"name"</span><span class="p">:</span> <span class="s">"email-0"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"user@mail.com"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="s">"name"</span><span class="p">:</span> <span class="s">"date-0"</span><span class="p">,</span>
      <span class="s">"value"</span><span class="p">:</span> <span class="s">"2020-10-09"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">})</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'x-api-key'</span><span class="p">:</span> <span class="s">"YOUR-API-KEY-HERE"</span><span class="p">,</span>
  <span class="s">'authorization'</span><span class="p">:</span> <span class="s">"YOUR-API-TOKEN-HERE"</span><span class="p">,</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">conn</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span> <span class="s">"/contract-manager-document-templates/api/create-filled-files/{templateId}"</span><span class="p">,</span> <span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">conn</span><span class="p">.</span><span class="n">getresponse</span><span class="p">()</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="s">"utf-8"</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://api.stg.keynua.com/contract-manager-document-templates/api/create-filled-files/{templateId} \
  --header '</span>x-api-key: YOUR-API-KEY-HERE<span class="s1">' \
  --header '</span>authorization: YOUR-API-TOKEN-HERE<span class="s1">'
  --header '</span>Content-Type: application/json<span class="s1">' \
  --data-raw '</span><span class="o">{</span>
    <span class="s2">"fieldValues"</span>: <span class="o">[</span>
      <span class="o">{</span>
        <span class="s2">"name"</span>: <span class="s2">"email-0"</span>,
        <span class="s2">"value"</span>: <span class="s2">"user@mail.com"</span>
      <span class="o">}</span>,
      <span class="o">{</span>
        <span class="s2">"name"</span>: <span class="s2">"date-0"</span>,
        <span class="s2">"value"</span>: <span class="s2">"2020-10-09"</span>
      <span class="o">}</span>
    <span class="o">]</span>
  <span class="o">}</span><span class="s1">'
</span></code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">https</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">'</span><span class="s1">POST</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="dl">'</span><span class="s1">api.stg.keynua.com</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">/contract-manager-document-templates/api/create-filled-files/{templateId</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">x-api-key</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-KEY-HERE</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">authorization</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">YOUR-API-TOKEN-HERE</span><span class="dl">"</span>
    <span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">application/json</span><span class="dl">"</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">req</span> <span class="o">=</span> <span class="nx">https</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">chunks</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">chunks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">end</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">chunks</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">res</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">postData</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">fieldValues</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">email-0</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user@mail.com</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">date-0</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">value</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2020-10-09</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">});</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">postData</span><span class="p">);</span>

<span class="nx">req</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p>Success response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b5d1b359-3736-424b-b83d-f0d0da910a89"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"storageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJidWNrZXQiOiJjb250cmFjdC1tYW5hZ2VyLWRvY3Vt"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/id-del-documento"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">8568</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sha256"</span><span class="p">:</span><span class="w"> </span><span class="s2">"edd34e53e6b709fc4344f6799a8c228320e879fd7f92c95ed6ad8d7c4e0cd812"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"428c25aa-6d9e-405e-9c19-9fafc9f1a3ec"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"storageId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJidWNrZXQiOiJjb250cmFjdC1tYW5hZ2VyLWRvY3Vt"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/id-del-documento"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">56628</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sha256"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b4b488d71896341ff6520881e56da7e5cfe41a603de5f16eef68114c2c9acda3"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>En base a cada documento de una plantilla, este API genera otros documentos pdf que incluyen el valor de cada campo enviado.</p>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>POST /contract-manager-document-templates/api/create-filled-files/{templateId}</code></p>
<h3 id='headers-7'>Headers</h3>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>x-api-key</td>
<td>your-api-key</td>
</tr>
<tr>
<td>authorization</td>
<td>your-api-token</td>
</tr>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
</tbody></table>
<h3 id='body-5'>Body</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Opcional</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>fieldValues</td>
<td><a href="#propiedades-de-fieldvalues">FieldValues</a>[]</td>
<td>No</td>
<td>Lista de items que contienen el id y valor de cada campo</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-fieldvalues'>Propiedades de FieldValues</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Id que indica a qué <a href="#propiedades-de-documenttemplatefield">DocumentTemplateField</a> de la plantilla corresponde <code>value</code></td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>Valor del campo que es validado con las reglas de <a href="#propiedades-de-documenttemplatefield">DocumentTemplateField</a></td>
</tr>
</tbody></table>
<h3 id='response-body-item'>Response body item</h3>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Id del archivo dentro de la plantilla</td>
</tr>
<tr>
<td>storageId</td>
<td>string</td>
<td>Id de almacenamiento. Se puede utilizar para <a href="#crear-un-contrato">crear contratos</a>.</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>Url para descargar el documento generado</td>
</tr>
<tr>
<td>size</td>
<td>number</td>
<td>Tamaño en bytes del documento generado</td>
</tr>
<tr>
<td>sha256</td>
<td>string</td>
<td>Hash sha256 del documento generado</td>
</tr>
</tbody></table>
<h1 id='webhooks'>Webhooks</h1>
<p>Los Webhooks permiten suscribirte a ciertos eventos del Contrato, por ejemplo cuando un contrato es creado, cuando ocurre un error en el proceso de firma o el contrato ha sido firmado satisfactoriamente. Cuando ocurre uno de estos eventos, enviaremos un request <strong>HTTP POST</strong> a la API configurada en el webhook.</p>
<h2 id='configuracion-del-webhook'>Configuración del Webhook</h2>
<aside class="warning">Para poder configurar tu Webhook debes contactar al equipo de Keynua</aside>

<p>Una vez ya tengas una cuenta en el ambiente de pruebas de Keynua, puedes acceder a la sección <a href="https://app.stg.keynua.com/developers">Developers</a> y configurar tu Webhook.</p>

<p>Si tu API necesita unos headers específicos, puedes agregarlo en la configuración del Webhook y nosotros lo enviaremos en cada request.</p>

<p>Entre los eventos que puedes escoger están:</p>

<table><thead>
<tr>
<th>Evento</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>Created</td>
<td>Serás notificado cuando un contrato fue creado satisfactoriamente</td>
</tr>
<tr>
<td>Started</td>
<td>Serás notificado cuando un contrato fue creado satisfactoriamente y está listo para ser firmado. <strong>Recomendamos usar este evento en lugar del evento Created ya que este evento te notificará cuando el contrato está listo para comenzar el proceso de firma</strong></td>
</tr>
<tr>
<td>Finished</td>
<td>Serás notificado cuando el contrato ha sido firmado por todos y finalizó correctamente</td>
</tr>
<tr>
<td>ItemWorking</td>
<td>Serás notificado cada vez que se comienza a procesar un <a href="#propiedades-de-un-item">Item</a></td>
</tr>
<tr>
<td>ItemSuccess</td>
<td>Serás notificado cada vez que un <a href="#propiedades-de-un-item">Item</a> ha concluído satisactoriamente</td>
</tr>
<tr>
<td>ItemError</td>
<td>Serás notificado cada vez que ocurre un error en un <a href="#propiedades-de-un-item">Item</a></td>
</tr>
</tbody></table>

<p>Una vez configurado el Webhook, te llegará un email de confirmación al correo que ingresaste. Luego, debes seleccionar la opción <strong>Habilitar</strong> para poder activar el Webhook. Keynua enviará un HTTP POST al API configurado y será activado si cumple estos requisitos:</p>

<ul>
<li>El API debe ser de acceso público</li>
<li>El API debe ser HTTPS</li>
<li>El API debe retornar status code 200 y el body del response debe ser <code>KEYNUA</code></li>
</ul>

<p>Una vez tengas habilitado tu Webhook, puedes comenzar a escuchar las notificaciones de tus contratos siguiendo la siguiente <a href="#especificación-del-webhook">Especificación del Webhook</a>.</p>

<aside class="notice">Si ya estás listo para integrar en producción, por favor contacta al equipo de <code>Keynua</code></aside>
<h2 id='especificacion-del-webhook'>Especificación del Webhook</h2>
<p>El request tendrá la siguiente estructura</p>
<h3 id='headers-8'>Headers</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/json"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractFinished"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-TS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1604957455847"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"X-Keynua-Webhook-Sig"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ec7584cb..."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Key</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>application/json</td>
</tr>
<tr>
<td>x-keynua-webhook-sig</td>
<td>Firma del request para el control de la manipulacion de la peticion. Para más información revisa la sección de <a href="#verificar-keynua-signature-webhook">Verificar Keynua Signature Webhook</a></td>
</tr>
<tr>
<td>x-keynua-webhook-ts</td>
<td>Numero de millisegundos desde UNIX Epoch (01/01/1970) cuando se envio el evento</td>
</tr>
<tr>
<td>x-keynua-webhook-type</td>
<td>Nombre del evento emitido</td>
</tr>
</tbody></table>
<h3 id='body-6'>Body</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractFinished"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d6c5ce27-fa63-4fb8-8f0f-83278c6b7985"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>Nombre del <a href="#tipos-de-eventos-webhook">tipo de evento</a> emitido. Puede ser <code>ContractCreated</code>, <code>ContractStarted</code>, <code>ContractItemUpdated</code>, <code>ContractFinished</code></td>
</tr>
<tr>
<td>accountId</td>
<td>string</td>
<td>Codigo de la cuenta propietaria del webhook</td>
</tr>
<tr>
<td>payload</td>
<td>object</td>
<td>Datos del evento que varian segun el valor de <a href="#tipos-de-eventos-webhook">type</a></td>
</tr>
</tbody></table>
<h2 id='tipos-de-eventos-webhook'>Tipos de Eventos Webhook</h2>
<p>Keynua enviará un request a tu API configurado por cada Evento registrado. En esta tabla podrás ver la relación que existe entre cada evento registrado y los tipos de eventos disponibles</p>

<table><thead>
<tr>
<th>Evento del Webhook</th>
<th>Tipo de Evento</th>
</tr>
</thead><tbody>
<tr>
<td>Created</td>
<td><a href="#propiedades-de-contractcreated">ContractCreated</a></td>
</tr>
<tr>
<td>Started</td>
<td><a href="#propiedades-de-contractstarted">ContractStarted</a></td>
</tr>
<tr>
<td>Finished</td>
<td><a href="#propiedades-de-contractfinished">ContractFinished</a></td>
</tr>
<tr>
<td>ItemWorking</td>
<td><a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a>. Item.state <code>working</code></td>
</tr>
<tr>
<td>ItemSuccess</td>
<td><a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a>. Item.state <code>success</code></td>
</tr>
<tr>
<td>ItemError</td>
<td><a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a>. Item.state <code>error</code></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractcreated'>Propiedades de ContractCreated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractCreated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mi primer webhook"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ejemplo de mi primer webhook"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato ha sido creado.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Codigo del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripcion del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idima del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creacion del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metada del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractstarted'>Propiedades de ContractStarted</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractStarted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mi primer webhook"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T01:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"longCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"signers"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3028</span><span class="p">,</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato está listo para ser firmado.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Codigo del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripcion del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idima del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creacion del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metada del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>longCode</td>
<td>string</td>
<td>Código largo del contrato</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-usuario-webhook">Usuarios</a> del Contrato</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-documento-webhook">Documentos</a> del contrato</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractfinished'>Propiedades de ContractFinished</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractFinished"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing WH CC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T01:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"finishedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T02:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"longCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="s2">"signers"</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"documents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3028</span><span class="p">,</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https..."</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando el contrato ha sido firmado por todos y ha finalizado correctamente.</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Codigo del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripcion del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idima del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creacion del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>finishedAt</td>
<td>string</td>
<td>Fecha de finalización del proceso de firma del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metada del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>longCode</td>
<td>string</td>
<td>Código largo del contrato</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-usuario-webhook">Usuarios</a> del Contrato</td>
</tr>
<tr>
<td>documents</td>
<td>array</td>
<td>Arreglo de <a href="#propiedades-de-un-documento-webhook">Documentos</a> del contrato. Acá encontrarás los <strong>documentos originales del contrato</strong>, NO el documento final de firma. Si lo que quieres es el documento final de firma, podrás obtenerlo desde el <a href="#propiedades-de-un-item">Item</a> <strong>PDF</strong> en <a href="#propiedades-de-contractitemupdated">ContractItemUpdated</a></td>
</tr>
</tbody></table>
<h3 id='propiedades-de-contractitemupdated'>Propiedades de ContractItemUpdated</h3>
<blockquote>
<p>Ejemplo de Body</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ContractItemUpdated"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000000"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contractId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00000000-0000-0000-0000-000000000001"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing WH CC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"startedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01T01:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"docCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"itemCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"userCount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"longCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"item"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"refId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signersemail"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"working"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"stageIndex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"email"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mail de inicio de firma"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"signers"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Se emite cuando un elemento del contrato ha cambiado de estado. Los estados pueden ser <code>working</code>, <code>success</code>, <code>error</code></p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>contractId</td>
<td>string</td>
<td>Codigo del contrato</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>Referencia del contrato</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>Titulo del contrato</td>
</tr>
<tr>
<td>templateId</td>
<td>string</td>
<td>Identificador del Template</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Descripcion del contrato</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>Idima del contrato</td>
</tr>
<tr>
<td>createdAt</td>
<td>string</td>
<td>Fecha de creacion del contrato</td>
</tr>
<tr>
<td>startedAt</td>
<td>string</td>
<td>Fecha de inicio del proceso de firma del contrato</td>
</tr>
<tr>
<td>docCount</td>
<td>integer</td>
<td>Cantidad de documentos que tiene el contrato</td>
</tr>
<tr>
<td>itemCount</td>
<td>integer</td>
<td>Cantidad de items que tiene el contrato</td>
</tr>
<tr>
<td>userCount</td>
<td>integer</td>
<td>Cantidad de usuarios que tiene el contrato</td>
</tr>
<tr>
<td>metadata</td>
<td>integer</td>
<td>Metada del contrato. Esta Metadata será la misma que se envió al <a href="#crear-un-contrato">crear un Contrato</a></td>
</tr>
<tr>
<td>longCode</td>
<td>string</td>
<td>Código largo del contrato</td>
</tr>
<tr>
<td>shortCode</td>
<td>string</td>
<td>Código corto del contrato para facilitar su identificación</td>
</tr>
<tr>
<td>item</td>
<td>object</td>
<td><a href="#propiedades-de-un-item">Item</a> del contrato que ha cambiado de estado</td>
</tr>
<tr>
<td>user</td>
<td>object</td>
<td><a href="#propiedades-de-un-usuario-webhook">Usuario</a> al que pertence el elemento modificado. Si el valor es null el elemento le pertenece a todos los usuarios</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-usuario-webhook'>Propiedades de un Usuario Webhook</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example@keynua.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ref"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"signers"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>Identificador único del usuario en el contrato</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>El nombre del usuario</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>El correo electrónico del usuario</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>El teléfono del usuario</td>
</tr>
<tr>
<td>groups</td>
<td>array</td>
<td>Nombre de los grupos a los que pertenece el usuario</td>
</tr>
</tbody></table>
<h3 id='propiedades-de-un-documento-webhook'>Propiedades de un Documento Webhook</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"application/pdf"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3028</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Atributo</th>
<th>Tipo</th>
<th>Descripción</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>Nombre del documento</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>Tipo del documento en formato MIME</td>
</tr>
<tr>
<td>size</td>
<td>integer</td>
<td>Peso del documento en bytes</td>
</tr>
<tr>
<td>url</td>
<td>integer</td>
<td>Link del documento. <strong>Expira en 12 horas</strong></td>
</tr>
</tbody></table>
<h2 id='verificar-keynua-signature-webhook'>Verificar Keynua Signature Webhook</h2><div class="highlight"><pre class="highlight plaintext"><code>SHA_256(requestPayloadAsString + ts + webHookSecret)
</code></pre></div>
<p>Si quieres verificar la integridad del payload y asegurarte de que Keynua es quién está golpeando tu API Webhook, debes verificar el Signature que envía Keynua en el header <code>X-Keynua-Webhook-Sig</code></p>

<p>Para verificar este valor necesitas:</p>

<ul>
<li>El object payload del body <code>body.payload</code> como string</li>
<li>El valor del header <code>X-Keynua-Webhook-TS</code></li>
<li>El valor del <code>secret</code> que obtuviste al crear el webhook</li>
</ul>

<p>Luego de ello debes concatenar todos estos valores y aplicarle SHA256, el resultado debe ser el mismo que el valor del header <code>X-Keynua-Webhook-Sig</code></p>

<aside class="notice">Si el resultado de tu hash coincide con el que te enviamos, puedes tener la seguridad de que es Keynua quién envió la información a tu API y que la información no ha sido alterada en tránsito.</aside>
<h1 id='errors'>Errors</h1>
<p>El API de Keynua usa los siguientes códigos de errores.</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Tu request no es válido.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Las credenciales no son válidas o pueden haber expirado.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Acceso denegado, es probable que no estés enviando las credenciales o sean incorrectas.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- El Item que estás buscando no existe..</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- Tus request son muy consecutivos, baja la velocidad de los request!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- Tenemos problemas en nuestro servidores, intenta más tarde por favor.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- Estamos temporalmente fuera de servicio, intenta más tarde por favor.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="javascript">Node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
